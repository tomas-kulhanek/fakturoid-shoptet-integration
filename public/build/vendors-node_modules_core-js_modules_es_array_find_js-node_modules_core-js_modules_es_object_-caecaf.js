(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_core-js_modules_es_array_find_js-node_modules_core-js_modules_es_object_-caecaf"],{

/***/ "./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] == undefined) {
  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/array-iteration.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var arraySpeciesCreate = __webpack_require__(/*! ../internals/array-species-create */ "./node_modules/core-js/internals/array-species-create.js");

var push = uncurryThis([].push);

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var IS_FILTER_REJECT = TYPE == 7;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var boundFunction = bind(callbackfn, that);
    var length = lengthOfArrayLike(self);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push(target, value);      // filter
        } else switch (TYPE) {
          case 4: return false;             // every
          case 7: push(target, value);      // filterReject
        }
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6),
  // `Array.prototype.filterReject` method
  // https://github.com/tc39/proposal-array-filtering
  filterReject: createMethod(7)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var SPECIES = wellKnownSymbol('species');
var Array = global.Array;

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? Array : C;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-create.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arraySpeciesConstructor = __webpack_require__(/*! ../internals/array-species-constructor */ "./node_modules/core-js/internals/array-species-constructor.js");

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/classof.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classofRaw = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var Object = global.Object;

// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-bind-context.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");

var bind = uncurryThis(uncurryThis.bind);

// optional / simple context binding
module.exports = function (fn, that) {
  aCallable(fn);
  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/html.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/html.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),

/***/ "./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/is-array.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) == 'Array';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-constructor.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/is-constructor.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");

var noop = function () { /* empty */ };
var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.exec(noop);

var isConstructorModern = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(noop, empty, argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
  }
  try {
    // we can't check .prototype since constructors produced by .bind haven't it
    // `Function#toString` throws on some built-it function in some legacy engines
    // (for example, `DOMQuad` and similar in FF41-)
    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
  } catch (error) {
    return true;
  }
};

isConstructorLegacy.sham = true;

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;


/***/ }),

/***/ "./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-create.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* global ActiveXObject -- old IE, WSH */
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var definePropertiesModule = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var html = __webpack_require__(/*! ../internals/html */ "./node_modules/core-js/internals/html.js");
var documentCreateElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(/*! ../internals/v8-prototype-define-bug */ "./node_modules/core-js/internals/v8-prototype-define-bug.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var props = toIndexedObject(Properties);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/object-to-string.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

// `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
  return '[object ' + classof(this) + ']';
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim-forced.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim-forced.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var PROPER_FUNCTION_NAME = (__webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").PROPER);
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var non = '\u200B\u0085\u180E';

// check that a method works with the correct list
// of whitespaces and has a correct name
module.exports = function (METHOD_NAME) {
  return fails(function () {
    return !!whitespaces[METHOD_NAME]()
      || non[METHOD_NAME]() !== non
      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var replace = uncurryThis(''.replace);
var whitespace = '[' + whitespaces + ']';
var ltrim = RegExp('^' + whitespace + whitespace + '*');
var rtrim = RegExp(whitespace + whitespace + '*$');

// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation
var createMethod = function (TYPE) {
  return function ($this) {
    var string = toString(requireObjectCoercible($this));
    if (TYPE & 1) string = replace(string, ltrim, '');
    if (TYPE & 2) string = replace(string, rtrim, '');
    return string;
  };
};

module.exports = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod(3)
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),

/***/ "./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-string.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

var String = global.String;

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');
  return String(argument);
};


/***/ }),

/***/ "./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/whitespaces.js ***!
  \*******************************************************/
/***/ ((module) => {

// a string of all valid unicode whitespaces
module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' +
  '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.find.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.find.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $find = (__webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").find);
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

var FIND = 'find';
var SKIPS_HOLES = true;

// Shouldn't skip holes
if (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });

// `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find
$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables(FIND);


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var toString = __webpack_require__(/*! ../internals/object-to-string */ "./node_modules/core-js/internals/object-to-string.js");

// `Object.prototype.toString` method
// https://tc39.es/ecma262/#sec-object.prototype.tostring
if (!TO_STRING_TAG_SUPPORT) {
  redefine(Object.prototype, 'toString', toString, { unsafe: true });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.trim.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.trim.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $trim = (__webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim);
var forcedStringTrimMethod = __webpack_require__(/*! ../internals/string-trim-forced */ "./node_modules/core-js/internals/string-trim-forced.js");

// `String.prototype.trim` method
// https://tc39.es/ecma262/#sec-string.prototype.trim
$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {
  trim: function trim() {
    return $trim(this);
  }
});


/***/ }),

/***/ "./node_modules/ublaboo-datagrid/assets/datagrid-instant-url-refresh.js":
/*!******************************************************************************!*\
  !*** ./node_modules/ublaboo-datagrid/assets/datagrid-instant-url-refresh.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var naja = __webpack_require__(/*! naja */ "./node_modules/naja/dist/Naja.esm.js")["default"];
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var dataGridRegisterAjaxCall;

if (typeof naja !== "undefined") {
	dataGridRegisterAjaxCall = function (params) {
		var method = params.type || 'GET';
		var data = params.data || null;

		naja.makeRequest(method, params.url, data, {
			history: 'replace'
		})
			.then(params.success)
			.catch(params.error);
	};

} else {
		dataGridRegisterAjaxCall = function (params) {
			$.nette.ajax(params);
		};
}

document.addEventListener('DOMContentLoaded', function () {
	var element = document.querySelector('.datagrid');

	if (element !== null) {
		return dataGridRegisterAjaxCall({
			type: 'GET',
			url: element.getAttribute('data-refresh-state')
		});
	}
});


/***/ }),

/***/ "./node_modules/ublaboo-datagrid/assets/datagrid-spinners.js":
/*!*******************************************************************!*\
  !*** ./node_modules/ublaboo-datagrid/assets/datagrid-spinners.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var naja = __webpack_require__(/*! naja */ "./node_modules/naja/dist/Naja.esm.js")["default"];
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var dataGridRegisterExtension;

if (typeof naja !== "undefined") {
	var isNaja2 = function () { return naja && naja.VERSION && naja.VERSION >= 2 };
	var najaEventParams = function (params) { return isNaja2() ? params.detail : params };
	var najaRequest = function (params) { return isNaja2() ? params.detail.request : params.xhr };
	dataGridRegisterExtension = function (name, extension) {
		var init = extension.init;
		var success = extension.success;
		var before = extension.before;
		var complete = extension.complete;


		var NewExtension = function NewExtension(naja, name) {
			this.name = name;

			this.initialize = function (naja) {
				if(init) {
					naja.addEventListener('init', function (params)  {
						init(najaEventParams(params).defaultOptions);
					});
				}

				if(success) {
					naja.addEventListener('success', function (params)  {
						var payload = isNaja2() ? params.detail.payload : params.response;
						success(payload, najaEventParams(params).options);
					});
				}

				if(before) {
					naja.addEventListener('before', function (params) {
						before(najaRequest(params), najaEventParams(params).options);
					});
				}

				if(complete) {
					naja.addEventListener('complete', function (params) {
						complete(najaRequest(params), najaEventParams(params).options);
					});
				}
			}
			if (!isNaja2()) {
				this.initialize(naja);
			}
			return this;
		}

		if (isNaja2()) {
			naja.registerExtension(new NewExtension(null, name));
		} else {
			naja.registerExtension(NewExtension, name);
		}
	};
} else if ($.nette) {
		dataGridRegisterExtension = function (name, extension) {
			$.nette.ext(name, extension);
		};
}

dataGridRegisterExtension('ublaboo-spinners', {
	before: function(xhr, settings) {
		var el, id, row_detail, spinner_template, grid_fullname;
		if (settings.nette) {
			el = settings.nette.el;
			spinner_template = $('<div class="ublaboo-spinner ublaboo-spinner-small"><i></i><i></i><i></i><i></i></div>');
			if (el.is('.datagrid [name="group_action[submit]"]')) {
				return el.after(spinner_template);
			} else if (el.is('.datagrid a') && el.data('toggle-detail')) {
				id = settings.nette.el.attr('data-toggle-detail');
				grid_fullname = settings.nette.el.attr('data-toggle-detail-grid-fullname');
				row_detail = $('.item-detail-' + grid_fullname + '-id-' + id);
				if (!row_detail.hasClass('loaded')) {
					return el.addClass('ublaboo-spinner-icon');
				}
			} else if (el.is('.datagrid .col-pagination a')) {
				return el.closest('.row-grid-bottom').find('.col-per-page').prepend(spinner_template);
			} else if (el.is('.datagrid .datagrid-per-page-submit')) {
				return el.closest('.row-grid-bottom').find('.col-per-page').prepend(spinner_template);
			} else if (el.is('.datagrid .reset-filter')) {
				return el.closest('.row-grid-bottom').find('.col-per-page').prepend(spinner_template);
			}
		}
	},
	complete: function() {
		$('.ublaboo-spinner').remove();
		return $('.ublaboo-spinner-icon').removeClass('ublaboo-spinner-icon');
	}
});


/***/ }),

/***/ "./node_modules/ublaboo-datagrid/assets/datagrid.js":
/*!**********************************************************!*\
  !*** ./node_modules/ublaboo-datagrid/assets/datagrid.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var naja = __webpack_require__(/*! naja */ "./node_modules/naja/dist/Naja.esm.js")["default"];
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var dataGridRegisterExtension, dataGridRegisterAjaxCall, dataGridLoad, dataGridSubmitForm;

if (typeof naja !== "undefined") {
	var isNaja2 = function () { return naja && naja.VERSION && naja.VERSION >= 2 };
	var najaEventParams = function (params) { return isNaja2() ? params.detail : params };
	var najaRequest = function (params) { return isNaja2() ? params.detail.request : params.xhr };
	dataGridRegisterExtension = function (name, extension) {
		var init = extension.init;
		var success = extension.success;
		var before = extension.before;
		var complete = extension.complete;
		var interaction = extension.interaction;


		var NewExtension = function NewExtension(naja, name) {
			this.name = name;

			this.initialize = function (naja) {
				if(init) {
					naja.addEventListener('init', function (params)  {
						init(najaEventParams(params).defaultOptions);
					});
				}

				if(success) {
					naja.addEventListener('success', function (params)  {
						var payload = isNaja2() ? params.detail.payload : params.response;
						success(payload, najaEventParams(params).options);
					});
				}

				var interactionTarget = naja;
				if (isNaja2()) {
					interactionTarget = interactionTarget.uiHandler;
				}

				interactionTarget.addEventListener('interaction', function (params) {
					if (isNaja2()) {
						params.detail.options.nette = {
							el: $(params.detail.element)
						}
					} else {
						params.options.nette = {
							el: $(params.element)
						}
					}
					if (interaction) {
						if (!interaction(najaEventParams(params).options)){
							params.preventDefault();
						}
					}
				});

				if(before) {
					naja.addEventListener('before', function (params) {
						if (!before(najaRequest(params), najaEventParams(params).options))
							params.preventDefault();
					});
				}

				if(complete) {
					naja.addEventListener('complete', function (params) {
						complete(najaRequest(params), najaEventParams(params).options);
					});
				}
			}
			if (!isNaja2()) {
				this.initialize(naja);
			}
			return this;
		}

		if (isNaja2()) {
			naja.registerExtension(new NewExtension(null, name));
		} else {
			naja.registerExtension(NewExtension, name);
		}
	};


	dataGridRegisterAjaxCall = function (params) {
        var method = params.type || 'GET';
        var data = params.data || null;

		naja.makeRequest(method, params.url, data, {})
			.then(params.success)
			.catch(params.error);
	};

	dataGridLoad = function () {
		naja.load();
	};

	dataGridSubmitForm = function (form) {
		return naja.uiHandler.submitForm(form.get(0));
	};
} else if ($.nette) {
	dataGridRegisterExtension = function (name, extension) {
		$.nette.ext(name, extension);
	};
	dataGridRegisterAjaxCall = function (params) {
		$.nette.ajax(params);
	};
	dataGridLoad = function () {
		$.nette.load();
	};
	dataGridSubmitForm = function (form) {
		return form.submit();
	};
} else {
	throw new Error("Include Naja.js or nette.ajax for datagrids to work!")
}


var datagridFitlerMultiSelect, datagridGroupActionMultiSelect, datagridShiftGroupSelection, datagridSortable, datagridSortableTree, getEventDomPath,
	indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

$(document).on('click', '[data-datagrid-confirm]:not(.ajax)', function(e) {
	if (!confirm($(e.target).closest('a').attr('data-datagrid-confirm'))) {
		e.stopPropagation();
		return e.preventDefault();
	}
});

if (typeof naja !== "undefined") {
	dataGridRegisterExtension('datagrid.confirm', {
		interaction: function(settings) {
			var confirm_message;
			if (settings.nette) {
				confirm_message = settings.nette.el.data('datagrid-confirm');
				if (confirm_message) {
					return confirm(confirm_message);
				}
			}
			return true;
		}
	});
} else {
	dataGridRegisterExtension('datagrid.confirm', {
		before: function(xhr, settings) {
			var confirm_message;
			if (settings.nette) {
				confirm_message = settings.nette.el.data('datagrid-confirm');
				if (confirm_message) {
					return confirm(confirm_message);
				}
			}
			return true;
		}
	});
}


$(document).on('change', 'select[data-autosubmit-per-page]', function() {
	var button;
	button = $(this).parent().find('input[type=submit]');
	if (button.length === 0) {
		button = $(this).parent().find('button[type=submit]');
	}
	return button.click();
}).on('change', 'select[data-autosubmit]', function() {
	return dataGridSubmitForm($(this).closest('form').first());
}).on('change', 'input[data-autosubmit][data-autosubmit-change]', function(e) {
	var $this, code;
	code = e.which || e.keyCode || 0;
	clearTimeout(window.datagrid_autosubmit_timer);
	$this = $(this);
	return window.datagrid_autosubmit_timer = setTimeout((function(_this) {
		return function() {
			return dataGridSubmitForm($this.closest('form').first());
		};
	})(this), 200);
}).on('keyup', 'input[data-autosubmit]', function(e) {
	var $this, code;
	code = e.which || e.keyCode || 0;
	if ((code !== 13) && ((code >= 9 && code <= 40) || (code >= 112 && code <= 123))) {
		return;
	}
	clearTimeout(window.datagrid_autosubmit_timer);
	$this = $(this);
	return window.datagrid_autosubmit_timer = setTimeout((function(_this) {
		return function() {
			return dataGridSubmitForm($this.closest('form').first());
		};
	})(this), 200);
}).on('keydown', '.datagrid-inline-edit input', function(e) {
	var code;
	code = e.which || e.keyCode || 0;
	if (code === 13) {
		e.stopPropagation();
		e.preventDefault();
		return $(this).closest('tr').find('.col-action-inline-edit [name="inline_edit[submit]"]').click();
	}
});

$(document).on('keydown', 'input[data-datagrid-manualsubmit]', function(e) {
	var code;
	code = e.which || e.keyCode || 0;
	if (code === 13) {
		e.stopPropagation();
		e.preventDefault();
		return dataGridSubmitForm($(this).closest('form').first());
	}
});

getEventDomPath = function(e) {
	var node, path;
	if (indexOf.call(e, path) >= 0) {
		return e.path;
	}
	path = [];
	node = e.target;
	while (node !== document.body) {
		if (node === null) {
			break;
		}
		path.push(node);
		node = node.parentNode;
	}
	return path;
};

datagridShiftGroupSelection = function() {
	var last_checkbox;
	last_checkbox = null;
	return document.addEventListener('click', function(e) {
		var checkboxes_rows, current_checkbox_row, el, event, i, ie, input, j, k, last_checkbox_row, last_checkbox_tbody, len, len1, len2, ref, ref1, results, row, rows;
		ref = getEventDomPath(e);
		for (i = 0, len = ref.length; i < len; i++) {
			el = ref[i];
			if ($(el).is('.col-checkbox') && last_checkbox && e.shiftKey) {
				current_checkbox_row = $(el).closest('tr');
				last_checkbox_row = last_checkbox.closest('tr');
				last_checkbox_tbody = last_checkbox_row.closest('tbody');
				checkboxes_rows = last_checkbox_tbody.find('tr').toArray();
				if (current_checkbox_row.index() > last_checkbox_row.index()) {
					rows = checkboxes_rows.slice(last_checkbox_row.index(), current_checkbox_row.index());
				} else if (current_checkbox_row.index() < last_checkbox_row.index()) {
					rows = checkboxes_rows.slice(current_checkbox_row.index() + 1, last_checkbox_row.index());
				}
				if (!rows) {
					return;
				}
				for (j = 0, len1 = rows.length; j < len1; j++) {
					row = rows[j];
					input = $(row).find('.col-checkbox input[type=checkbox]')[0];
					if (input) {
						input.checked = true;
						ie = window.navigator.userAgent.indexOf("MSIE ");
						if (ie) {
							event = document.createEvent('Event');
							event.initEvent('change', true, true);
						} else {
							event = new Event('change', {
								'bubbles': true
							});
						}
						input.dispatchEvent(event);
					}
				}
			}
		}
		ref1 = getEventDomPath(e);
		results = [];
		for (k = 0, len2 = ref1.length; k < len2; k++) {
			el = ref1[k];
			if ($(el).is('.col-checkbox')) {
				results.push(last_checkbox = $(el));
			} else {
				results.push(void 0);
			}
		}
		return results;
	});
};

datagridShiftGroupSelection();

document.addEventListener('change', function(e) {
	var buttons, checked_inputs, counter, event, grid, i, ie, input, inputs, len, results, select, total;
	grid = e.target.getAttribute('data-check');
	if (grid) {
		checked_inputs = document.querySelectorAll('input[data-check-all-' + grid + ']:checked');
		select = document.querySelector('.datagrid-' + grid + ' select[name="group_action[group_action]"]');
		buttons = document.querySelectorAll('.datagrid-' + grid + ' .row-group-actions *[type="submit"]');
		counter = document.querySelector('.datagrid-' + grid + ' .datagrid-selected-rows-count');

		if (checked_inputs.length) {
			if (buttons) {
				buttons.forEach(function (button) {
					button.disabled = false;
				});
			}
			if (select) {
				select.disabled = false;
			}
			total = document.querySelectorAll('input[data-check-all-' + grid + ']').length;
			if (counter) {
				counter.innerHTML = checked_inputs.length + '/' + total;
			}
		} else {
			if (buttons) {
				buttons.forEach(function (button) {
					button.disabled = true;
				});
			}
			if (select) {
				select.disabled = true;
				select.value = "";
			}
			if (counter) {
				counter.innerHTML = "";
			}
		}
		ie = window.navigator.userAgent.indexOf("MSIE ");
		if (ie) {
			event = document.createEvent('Event');
			event.initEvent('change', true, true);
		} else {
			event = new Event('change', {
				'bubbles': true
			});
		}
		if (select) {
			select.dispatchEvent(event);
		}
	}
	grid = e.target.getAttribute('data-check-all');
	if (grid) {
		inputs = document.querySelectorAll('input[type=checkbox][data-check-all-' + grid + ']');
		results = [];
		for (i = 0, len = inputs.length; i < len; i++) {
			input = inputs[i];
			input.checked = e.target.checked;
			ie = window.navigator.userAgent.indexOf("MSIE ");
			if (ie) {
				event = document.createEvent('Event');
				event.initEvent('change', true, true);
			} else {
				event = new Event('change', {
					'bubbles': true
				});
			}
			results.push(input.dispatchEvent(event));
		}
		return results;
	}
});


window.datagridSerializeUrl = function(obj, prefix) {
var str = [];
for(var p in obj) {
	if (obj.hasOwnProperty(p)) {
		var k = prefix ? prefix + "[" + p + "]" : p, v = obj[p];
		if (v !== null && v !== "") {
			if (typeof v == "object") {
				var r = window.datagridSerializeUrl(v, k);
					if (r) {
						str.push(r);
					}
			} else {
				str.push(encodeURIComponent(k) + "=" + encodeURIComponent(v));
			}
		}
	}
}
return str.join("&");
}
;

datagridSortable = function() {
	if (typeof $.fn.sortable === 'undefined') {
		return;
	}
	return $('.datagrid [data-sortable]').sortable({
		handle: '.handle-sort',
		items: 'tr',
		axis: 'y',
		update: function(event, ui) {
			var component_prefix, data, item_id, next_id, prev_id, row, url;
			row = ui.item.closest('tr[data-id]');
			item_id = row.data('id');
			prev_id = null;
			next_id = null;
			if (row.prev().length) {
				prev_id = row.prev().data('id');
			}
			if (row.next().length) {
				next_id = row.next().data('id');
			}
			url = $(this).data('sortable-url');
			data = {};
			component_prefix = row.closest('.datagrid').find('tbody').attr('data-sortable-parent-path');
			data[(component_prefix + '-item_id').replace(/^-/, '')] = item_id;
			if (prev_id !== null) {
				data[(component_prefix + '-prev_id').replace(/^-/, '')] = prev_id;
			}
			if (next_id !== null) {
				data[(component_prefix + '-next_id').replace(/^-/, '')] = next_id;
			}
			return dataGridRegisterAjaxCall({
				type: 'GET',
				url: url,
				data: data,
				error: function(jqXHR, textStatus, errorThrown) {
					return alert(jqXHR.statusText);
				}
			});
		},
		helper: function(e, ui) {
			ui.children().each(function() {
				return $(this).width($(this).width());
			});
			return ui;
		}
	});
};

$(function() {
	return datagridSortable();
});

if (typeof datagridSortableTree === 'undefined') {
	datagridSortableTree = function() {
		if (typeof $('.datagrid-tree-item-children').sortable === 'undefined') {
			return;
		}
		return $('.datagrid-tree-item-children').sortable({
			handle: '.handle-sort',
			items: '.datagrid-tree-item:not(.datagrid-tree-header)',
			toleranceElement: '> .datagrid-tree-item-content',
			connectWith: '.datagrid-tree-item-children',
			update: function(event, ui) {
				var component_prefix, data, item_id, next_id, parent, parent_id, prev_id, row, url;
				$('.toggle-tree-to-delete').remove();
				row = ui.item.closest('.datagrid-tree-item[data-id]');
				item_id = row.data('id');
				prev_id = null;
				next_id = null;
				parent_id = null;
				if (row.prev().length) {
					prev_id = row.prev().data('id');
				}
				if (row.next().length) {
					next_id = row.next().data('id');
				}
				parent = row.parent().closest('.datagrid-tree-item');
				if (parent.length) {
					parent.find('.datagrid-tree-item-children').first().css({
						display: 'block'
					});
					parent.addClass('has-children');
					parent_id = parent.data('id');
				}
				url = $(this).data('sortable-url');
				if (!url) {
					return;
				}
				parent.find('[data-toggle-tree]').first().removeClass('hidden');
				component_prefix = row.closest('.datagrid-tree').attr('data-sortable-parent-path');
				data = {};
				data[(component_prefix + '-item_id').replace(/^-/, '')] = item_id;
				if (prev_id !== null) {
					data[(component_prefix + '-prev_id').replace(/^-/, '')] = prev_id;
				}
				if (next_id !== null) {
					data[(component_prefix + '-next_id').replace(/^-/, '')] = next_id;
				}
				data[(component_prefix + '-parent_id').replace(/^-/, '')] = parent_id;
				return dataGridRegisterAjaxCall({
					type: 'GET',
					url: url,
					data: data,
					error: function(jqXHR, textStatus, errorThrown) {
						if (errorThrown !== 'abort') {
							return alert(jqXHR.statusText);
						}
					}
				});
			},
			stop: function(event, ui) {
				return $('.toggle-tree-to-delete').removeClass('toggle-tree-to-delete');
			},
			start: function(event, ui) {
				var parent;
				parent = ui.item.parent().closest('.datagrid-tree-item');
				if (parent.length) {
					if (parent.find('.datagrid-tree-item').length === 2) {
						return parent.find('[data-toggle-tree]').addClass('toggle-tree-to-delete');
					}
				}
			}
		});
	};
}

$(function() {
	return datagridSortableTree();
});

dataGridRegisterExtension('datagrid.happy', {
	success: function() {
		var c, checked_rows, class_selector, classes, event, grid, grids, i, ie, input, j, len, len1, results;
		if (window.happy) {
			window.happy.reset();
		}
		grids = $('.datagrid');
		results = [];
		for (i = 0, len = grids.length; i < len; i++) {
			grid = grids[i];
			classes = grid.classList;
			class_selector = '';
			for (j = 0, len1 = classes.length; j < len1; j++) {
				c = classes[j];
				class_selector = class_selector + '.' + c;
			}
			checked_rows = document.querySelectorAll(class_selector + ' ' + 'input[data-check]:checked');
			if (checked_rows.length === 1 && checked_rows[0].getAttribute('name') === 'toggle-all') {
				input = document.querySelector(class_selector + ' input[name=toggle-all]');
				if (input) {
					input.checked = false;
					ie = window.navigator.userAgent.indexOf("MSIE ");
					if (ie) {
						event = document.createEvent('Event');
						event.initEvent('change', true, true);
					} else {
						event = new Event('change', {
							'bubbles': true
						});
					}
					results.push(input.dispatchEvent(event));
				} else {
					results.push(void 0);
				}
			} else {
				results.push(void 0);
			}
		}
		return results;
	}
});

dataGridRegisterExtension('datagrid.sortable', {
	success: function() {
		return datagridSortable();
	}
});

dataGridRegisterExtension('datagrid.forms', {
	success: function() {
		return $('.datagrid').find('form').each(function() {
			return window.Nette.initForm(this);
		});
	}
});

dataGridRegisterExtension('datagrid.url', {
	success: function(payload) {
		var host, path, query, url;
		if (payload._datagrid_url) {
			if (window.history.replaceState) {
				host = window.location.protocol + "//" + window.location.host;
				path = window.location.pathname;
				query = window.datagridSerializeUrl(payload.state).replace(/&+$/gm, '');
				if (query) {
					url = host + path + "?" + query.replace(/\&*$/, '');
				} else {
					url = host + path;
				}
				url += window.location.hash;
				if (window.location.href !== url) {
					return window.history.replaceState({
						path: url
					}, '', url);
				}
			}
		}
	}
});

dataGridRegisterExtension('datagrid.sort', {
	success: function(payload) {
		var href, key, ref, results;
		if (payload._datagrid_sort) {
			ref = payload._datagrid_sort;
			results = [];
			for (key in ref) {
				href = ref[key];
				results.push($('#datagrid-sort-' + key).attr('href', href));
			}
			return results;
		}
	}
});

dataGridRegisterExtension('datargid.item_detail', {
	before: function(xhr, settings) {
		var id, row_detail, grid_fullname;
		if (settings.nette && settings.nette.el.attr('data-toggle-detail')) {
			id = settings.nette.el.attr('data-toggle-detail');
			grid_fullname = settings.nette.el.attr('data-toggle-detail-grid-fullname');
			row_detail = $('.item-detail-' + grid_fullname + '-id-' + id);
			if (row_detail.hasClass('loaded')) {
				if (!row_detail.find('.item-detail-content').length) {
					row_detail.removeClass('toggled');
					return true;
				}
				if (row_detail.hasClass('toggled')) {
					row_detail.find('.item-detail-content').slideToggle('fast', (function(_this) {
						return function() {
							return row_detail.toggleClass('toggled');
						};
					})(this));
				} else {
					row_detail.toggleClass('toggled');
					row_detail.find('.item-detail-content').slideToggle('fast');
				}
				return false;
			} else {
				return row_detail.addClass('loaded');
			}
		}
		return true;
	},
	success: function(payload) {
		var id, row_detail, grid_fullname;
		if (payload._datagrid_toggle_detail && payload._datagrid_name) {
			id = payload._datagrid_toggle_detail;
			grid_fullname = payload._datagrid_name;
			row_detail = $('.item-detail-' + grid_fullname + '-id-' + id);
			row_detail.toggleClass('toggled');
			return row_detail.find('.item-detail-content').slideToggle('fast');
		}
	}
});

dataGridRegisterExtension('datagrid.tree', {
	before: function(xhr, settings) {
		var children_block;
		if (settings.nette && settings.nette.el.attr('data-toggle-tree')) {
			settings.nette.el.toggleClass('toggle-rotate');
			children_block = settings.nette.el.closest('.datagrid-tree-item').find('.datagrid-tree-item-children').first();
			if (children_block.hasClass('loaded')) {
				children_block.slideToggle('fast');
				return false;
			}
		}
		return true;
	},
	success: function(payload) {
		var children_block, content, id, name, ref, snippet, template;
		if (payload._datagrid_tree) {
			id = payload._datagrid_tree;
			children_block = $('.datagrid-tree-item[data-id="' + id + '"]').find('.datagrid-tree-item-children').first();
			children_block.addClass('loaded');
			ref = payload.snippets;
			for (name in ref) {
				snippet = ref[name];
				content = $(snippet);
				template = $('<div class="datagrid-tree-item" id="' + name + '">');
				template.attr('data-id', content.attr('data-id'));
				template.append(content);
				if (content.data('has-children')) {
					template.addClass('has-children');
				}
				children_block.append(template);
			}
			children_block.addClass('loaded');
			children_block.slideToggle('fast');
			dataGridLoad();
		}
		return datagridSortableTree();
	}
});

$(document).on('click', '[data-datagrid-editable-url]', function(event) {
	var attr_name, attr_value, attrs, cell, cellValue, cell_height, cell_lines, cell_padding, input, line_height, submit, valueToEdit;
	cell = $(this);
	if (event.target.tagName.toLowerCase() === 'a') {
		return;
	}
	if (cell.hasClass('datagrid-inline-edit')) {
		return;
	}
	if (!cell.hasClass('editing')) {
		cell.addClass('editing');
		cellValue = cell.html().trim().replace('<br>', '\n');
		if (cell.attr('data-datagrid-editable-value')) {
			valueToEdit = cell.data('datagrid-editable-value');
		} else {
			valueToEdit = cellValue;
		}
		cell.data('originalValue', cellValue);
		cell.data('valueToEdit', valueToEdit);
		if (cell.data('datagrid-editable-type') === 'textarea') {
			input = $('<textarea>' + valueToEdit + '</textarea>');
			cell_padding = parseInt(cell.css('padding').replace(/[^-\d\.]/g, ''), 10);
			cell_height = cell.outerHeight();
			line_height = Math.round(parseFloat(cell.css('line-height')));
			cell_lines = (cell_height - (2 * cell_padding)) / line_height;
			input.attr('rows', Math.round(cell_lines));
		} else if (cell.data('datagrid-editable-type') === 'select') {
			input = $(cell.data('datagrid-editable-element'));
			input.find("option[value='" + valueToEdit + "']").prop('selected', true);
		} else {
			input = $('<input type="' + cell.data('datagrid-editable-type') + '">');
			input.val(valueToEdit);
		}
		attrs = cell.data('datagrid-editable-attrs');
		for (attr_name in attrs) {
			attr_value = attrs[attr_name];
			input.attr(attr_name, attr_value);
		}
		cell.removeClass('edited');
		cell.html(input);
		submit = function(cell, el) {
			var value;
			value = el.val();
			if (value !== cell.data('valueToEdit')) {
				dataGridRegisterAjaxCall({
					url: cell.data('datagrid-editable-url'),
					data: {
						value: value
					},
					type: 'POST',
					success: function(payload) {
						if (cell.data('datagrid-editable-type') === 'select') {
							cell.html(input.find("option[value='" + value + "']").html());
						} else {
							if (payload._datagrid_editable_new_value) {
								value = payload._datagrid_editable_new_value;
							}
							cell.html(value);
						}
						return cell.addClass('edited');
					},
					error: function() {
						cell.html(cell.data('originalValue'));
						return cell.addClass('edited-error');
					}
				});
			} else {
				cell.html(cell.data('originalValue'));
			}
			return setTimeout(function() {
				return cell.removeClass('editing');
			}, 1200);
		};
		cell.find('input,textarea,select').focus().on('blur', function() {
			return submit(cell, $(this));
		}).on('keydown', function(e) {
			if (cell.data('datagrid-editable-type') !== 'textarea') {
				if (e.which === 13) {
					e.stopPropagation();
					e.preventDefault();
					return submit(cell, $(this));
				}
			}
			if (e.which === 27) {
				e.stopPropagation();
				e.preventDefault();
				cell.removeClass('editing');
				return cell.html(cell.data('originalValue'));
			}
		});
		return cell.find('select').on('change', function() {
			return submit(cell, $(this));
		});
	}
});

dataGridRegisterExtension('datagrid.after_inline_edit', {
	success: function(payload) {
		var grid = $('.datagrid-' + payload._datagrid_name);

		if (payload._datagrid_inline_edited) {
			grid.find('tr[data-id=' + payload._datagrid_inline_edited + '] > td').addClass('edited');
			return grid.find('.datagrid-inline-edit-trigger').removeClass('hidden');
		} else if (payload._datagrid_inline_edit_cancel) {
			return grid.find('.datagrid-inline-edit-trigger').removeClass('hidden');
		}
	}
});

$(document).on('mouseup', '[data-datagrid-cancel-inline-add]', function(e) {
	var code = e.which || e.keyCode || 0;
	if (code === 1) {
		e.stopPropagation();
		e.preventDefault();
		return $('.datagrid-row-inline-add').addClass('datagrid-row-inline-add-hidden');
	}
});

dataGridRegisterExtension('datagrid-toggle-inline-add', {
	success: function(payload) {
		var grid = $('.datagrid-' + payload._datagrid_name);

		if (payload._datagrid_inline_adding) {
			var row = grid.find('.datagrid-row-inline-add');

			if (row.hasClass('datagrid-row-inline-add-hidden')) {
				row.removeClass('datagrid-row-inline-add-hidden');
			}

			row.find('input:not([readonly]),textarea:not([readonly])').first().focus();
		}
	}
});

datagridFitlerMultiSelect = function() {
	var select = $('.selectpicker').first();

	if ($.fn.selectpicker) {
		return $.fn.selectpicker.defaults = {
			countSelectedText: select.data('i18n-selected'),
			iconBase: '',
			tickIcon: select.data('selected-icon-check')
		};
	}
};

$(function() {
	return datagridFitlerMultiSelect();
});

datagridGroupActionMultiSelect = function() {
	var selects;

	if (!$.fn.selectpicker) {
		return;
	}

	selects = $('[data-datagrid-multiselect-id]');

	return selects.each(function() {
		var id;
		if ($(this).hasClass('selectpicker')) {
			$(this).removeAttr('id');
			id = $(this).data('datagrid-multiselect-id');
			$(this).on('loaded.bs.select', function(e) {
				$(this).parent().attr('style', 'display:none;');
				return $(this).parent().find('.hidden').removeClass('hidden').addClass('btn-default btn-secondary');
			});
			return $(this).on('rendered.bs.select', function(e) {
				return $(this).parent().attr('id', id);
			});
		}
	});
};

$(function() {
	return datagridGroupActionMultiSelect();
});

dataGridRegisterExtension('datagrid.fitlerMultiSelect', {
	success: function() {
		datagridFitlerMultiSelect();
		if ($.fn.selectpicker) {
			return $('.selectpicker').selectpicker({
				iconBase: 'fa'
			});
		}
	}
});

dataGridRegisterExtension('datagrid.groupActionMultiSelect', {
	success: function() {
		return datagridGroupActionMultiSelect();
	}
});

dataGridRegisterExtension('datagrid.inline-editing', {
	success: function(payload) {
		var grid;
		if (payload._datagrid_inline_editing) {
			grid = $('.datagrid-' + payload._datagrid_name);
			return grid.find('.datagrid-inline-edit-trigger').addClass('hidden');
		}
	}
});

dataGridRegisterExtension('datagrid.redraw-item', {
	success: function(payload) {
		var row;
		if (payload._datagrid_redraw_item_class) {
			row = $('tr[data-id=' + payload._datagrid_redraw_item_id + ']');
			return row.attr('class', payload._datagrid_redraw_item_class);
		}
	}
});

dataGridRegisterExtension('datagrid.reset-filter-by-column', {
	success: function(payload) {
		var grid, href, i, key, len, ref;
		if (!payload._datagrid_name) {
			return;
		}
		grid = $('.datagrid-' + payload._datagrid_name);
		grid.find('[data-datagrid-reset-filter-by-column]').addClass('hidden');
		if (payload.non_empty_filters && payload.non_empty_filters.length) {
			ref = payload.non_empty_filters;
			for (i = 0, len = ref.length; i < len; i++) {
				key = ref[i];
				grid.find('[data-datagrid-reset-filter-by-column=' + key + ']').removeClass('hidden');
			}
			href = grid.find('.reset-filter').attr('href');
			return grid.find('[data-datagrid-reset-filter-by-column]').each(function() {
				var new_href;
				key = $(this).attr('data-datagrid-reset-filter-by-column');
				new_href = href.replace('do=' + payload._datagrid_name + '-resetFilter', 'do=' + payload._datagrid_name + '-resetColumnFilter');
				new_href += '&' + payload._datagrid_name + '-key=' + key;
				return $(this).attr('href', new_href);
			});
		}
	}
});


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfY29yZS1qc19tb2R1bGVzX2VzX2FycmF5X2ZpbmRfanMtbm9kZV9tb2R1bGVzX2NvcmUtanNfbW9kdWxlc19lc19vYmplY3RfLWNhZWNhZi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLHNCQUFzQixtQkFBTyxDQUFDLDZGQUFnQztBQUM5RCxhQUFhLG1CQUFPLENBQUMscUZBQTRCO0FBQ2pELDJCQUEyQixtQkFBTyxDQUFDLHVHQUFxQzs7QUFFeEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDbkJBLFdBQVcsbUJBQU8sQ0FBQyxxR0FBb0M7QUFDdkQsa0JBQWtCLG1CQUFPLENBQUMscUdBQW9DO0FBQzlELG9CQUFvQixtQkFBTyxDQUFDLHVGQUE2QjtBQUN6RCxlQUFlLG1CQUFPLENBQUMsNkVBQXdCO0FBQy9DLHdCQUF3QixtQkFBTyxDQUFDLG1HQUFtQztBQUNuRSx5QkFBeUIsbUJBQU8sQ0FBQyxtR0FBbUM7O0FBRXBFOztBQUVBLHNCQUFzQixrRUFBa0U7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBLDRDQUE0QztBQUM1Qyw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBQzVDLDRDQUE0QztBQUM1QyxVQUFVO0FBQ1YsNENBQTRDO0FBQzVDLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Qzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsQ0FBQztBQUNYO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLENBQUM7QUFDVjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsQ0FBQztBQUNWO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxTQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsQ0FBQztBQUNYO0FBQ0E7QUFDQSxXQUFXLENBQUM7QUFDWixJQUFJO0FBQ0o7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1pdGVyYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY3JlYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jbGFzc29mLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2h0bWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWFycmF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1jb25zdHJ1Y3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0aWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qta2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LXRvLXN0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3RyaW5nLXRyaW0tZm9yY2VkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zdHJpbmctdHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tc3RyaW5nLXRhZy1zdXBwb3J0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3doaXRlc3BhY2VzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdWJsYWJvby1kYXRhZ3JpZC9hc3NldHMvZGF0YWdyaWQtaW5zdGFudC11cmwtcmVmcmVzaC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdWJsYWJvby1kYXRhZ3JpZC9hc3NldHMvZGF0YWdyaWQtc3Bpbm5lcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VibGFib28tZGF0YWdyaWQvYXNzZXRzL2RhdGFncmlkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBjcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZScpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcblxudmFyIFVOU0NPUEFCTEVTID0gd2VsbEtub3duU3ltYm9sKCd1bnNjb3BhYmxlcycpO1xudmFyIEFycmF5UHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlO1xuXG4vLyBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLUBAdW5zY29wYWJsZXNcbmlmIChBcnJheVByb3RvdHlwZVtVTlNDT1BBQkxFU10gPT0gdW5kZWZpbmVkKSB7XG4gIGRlZmluZVByb3BlcnR5TW9kdWxlLmYoQXJyYXlQcm90b3R5cGUsIFVOU0NPUEFCTEVTLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiBjcmVhdGUobnVsbClcbiAgfSk7XG59XG5cbi8vIGFkZCBhIGtleSB0byBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICBBcnJheVByb3RvdHlwZVtVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuIiwidmFyIGJpbmQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1jb250ZXh0Jyk7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbmRleGVkLW9iamVjdCcpO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9iamVjdCcpO1xudmFyIGxlbmd0aE9mQXJyYXlMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2xlbmd0aC1vZi1hcnJheS1saWtlJyk7XG52YXIgYXJyYXlTcGVjaWVzQ3JlYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY3JlYXRlJyk7XG5cbnZhciBwdXNoID0gdW5jdXJyeVRoaXMoW10ucHVzaCk7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUueyBmb3JFYWNoLCBtYXAsIGZpbHRlciwgc29tZSwgZXZlcnksIGZpbmQsIGZpbmRJbmRleCwgZmlsdGVyUmVqZWN0IH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoVFlQRSkge1xuICB2YXIgSVNfTUFQID0gVFlQRSA9PSAxO1xuICB2YXIgSVNfRklMVEVSID0gVFlQRSA9PSAyO1xuICB2YXIgSVNfU09NRSA9IFRZUEUgPT0gMztcbiAgdmFyIElTX0VWRVJZID0gVFlQRSA9PSA0O1xuICB2YXIgSVNfRklORF9JTkRFWCA9IFRZUEUgPT0gNjtcbiAgdmFyIElTX0ZJTFRFUl9SRUpFQ1QgPSBUWVBFID09IDc7XG4gIHZhciBOT19IT0xFUyA9IFRZUEUgPT0gNSB8fCBJU19GSU5EX0lOREVYO1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBjYWxsYmFja2ZuLCB0aGF0LCBzcGVjaWZpY0NyZWF0ZSkge1xuICAgIHZhciBPID0gdG9PYmplY3QoJHRoaXMpO1xuICAgIHZhciBzZWxmID0gSW5kZXhlZE9iamVjdChPKTtcbiAgICB2YXIgYm91bmRGdW5jdGlvbiA9IGJpbmQoY2FsbGJhY2tmbiwgdGhhdCk7XG4gICAgdmFyIGxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlKHNlbGYpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGNyZWF0ZSA9IHNwZWNpZmljQ3JlYXRlIHx8IGFycmF5U3BlY2llc0NyZWF0ZTtcbiAgICB2YXIgdGFyZ2V0ID0gSVNfTUFQID8gY3JlYXRlKCR0aGlzLCBsZW5ndGgpIDogSVNfRklMVEVSIHx8IElTX0ZJTFRFUl9SRUpFQ1QgPyBjcmVhdGUoJHRoaXMsIDApIDogdW5kZWZpbmVkO1xuICAgIHZhciB2YWx1ZSwgcmVzdWx0O1xuICAgIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSBpZiAoTk9fSE9MRVMgfHwgaW5kZXggaW4gc2VsZikge1xuICAgICAgdmFsdWUgPSBzZWxmW2luZGV4XTtcbiAgICAgIHJlc3VsdCA9IGJvdW5kRnVuY3Rpb24odmFsdWUsIGluZGV4LCBPKTtcbiAgICAgIGlmIChUWVBFKSB7XG4gICAgICAgIGlmIChJU19NQVApIHRhcmdldFtpbmRleF0gPSByZXN1bHQ7IC8vIG1hcFxuICAgICAgICBlbHNlIGlmIChyZXN1bHQpIHN3aXRjaCAoVFlQRSkge1xuICAgICAgICAgIGNhc2UgMzogcmV0dXJuIHRydWU7ICAgICAgICAgICAgICAvLyBzb21lXG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gdmFsdWU7ICAgICAgICAgICAgIC8vIGZpbmRcbiAgICAgICAgICBjYXNlIDY6IHJldHVybiBpbmRleDsgICAgICAgICAgICAgLy8gZmluZEluZGV4XG4gICAgICAgICAgY2FzZSAyOiBwdXNoKHRhcmdldCwgdmFsdWUpOyAgICAgIC8vIGZpbHRlclxuICAgICAgICB9IGVsc2Ugc3dpdGNoIChUWVBFKSB7XG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgIC8vIGV2ZXJ5XG4gICAgICAgICAgY2FzZSA3OiBwdXNoKHRhcmdldCwgdmFsdWUpOyAgICAgIC8vIGZpbHRlclJlamVjdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBJU19GSU5EX0lOREVYID8gLTEgOiBJU19TT01FIHx8IElTX0VWRVJZID8gSVNfRVZFUlkgOiB0YXJnZXQ7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5mb3JFYWNoYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZm9yZWFjaFxuICBmb3JFYWNoOiBjcmVhdGVNZXRob2QoMCksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUubWFwYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUubWFwXG4gIG1hcDogY3JlYXRlTWV0aG9kKDEpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbHRlcmAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbHRlclxuICBmaWx0ZXI6IGNyZWF0ZU1ldGhvZCgyKSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5zb21lYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuc29tZVxuICBzb21lOiBjcmVhdGVNZXRob2QoMyksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZXZlcnlgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5ldmVyeVxuICBldmVyeTogY3JlYXRlTWV0aG9kKDQpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbmRgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maW5kXG4gIGZpbmQ6IGNyZWF0ZU1ldGhvZCg1KSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXhgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maW5kSW5kZXhcbiAgZmluZEluZGV4OiBjcmVhdGVNZXRob2QoNiksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZmlsdGVyUmVqZWN0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtYXJyYXktZmlsdGVyaW5nXG4gIGZpbHRlclJlamVjdDogY3JlYXRlTWV0aG9kKDcpXG59O1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWFycmF5Jyk7XG52YXIgaXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jb25zdHJ1Y3RvcicpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xudmFyIEFycmF5ID0gZ2xvYmFsLkFycmF5O1xuXG4vLyBhIHBhcnQgb2YgYEFycmF5U3BlY2llc0NyZWF0ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5c3BlY2llc2NyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3JpZ2luYWxBcnJheSkge1xuICB2YXIgQztcbiAgaWYgKGlzQXJyYXkob3JpZ2luYWxBcnJheSkpIHtcbiAgICBDID0gb3JpZ2luYWxBcnJheS5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjcm9zcy1yZWFsbSBmYWxsYmFja1xuICAgIGlmIChpc0NvbnN0cnVjdG9yKEMpICYmIChDID09PSBBcnJheSB8fCBpc0FycmF5KEMucHJvdG90eXBlKSkpIEMgPSB1bmRlZmluZWQ7XG4gICAgZWxzZSBpZiAoaXNPYmplY3QoQykpIHtcbiAgICAgIEMgPSBDW1NQRUNJRVNdO1xuICAgICAgaWYgKEMgPT09IG51bGwpIEMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IHJldHVybiBDID09PSB1bmRlZmluZWQgPyBBcnJheSA6IEM7XG59O1xuIiwidmFyIGFycmF5U3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3InKTtcblxuLy8gYEFycmF5U3BlY2llc0NyZWF0ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5c3BlY2llc2NyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3JpZ2luYWxBcnJheSwgbGVuZ3RoKSB7XG4gIHJldHVybiBuZXcgKGFycmF5U3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsQXJyYXkpKShsZW5ndGggPT09IDAgPyAwIDogbGVuZ3RoKTtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIFRPX1NUUklOR19UQUdfU1VQUE9SVCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmctdGFnLXN1cHBvcnQnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgY2xhc3NvZlJhdyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mLXJhdycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgVE9fU1RSSU5HX1RBRyA9IHdlbGxLbm93blN5bWJvbCgndG9TdHJpbmdUYWcnKTtcbnZhciBPYmplY3QgPSBnbG9iYWwuT2JqZWN0O1xuXG4vLyBFUzMgd3JvbmcgaGVyZVxudmFyIENPUlJFQ1RfQVJHVU1FTlRTID0gY2xhc3NvZlJhdyhmdW5jdGlvbiAoKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPT0gJ0FyZ3VtZW50cyc7XG5cbi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yXG52YXIgdHJ5R2V0ID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaXRba2V5XTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxufTtcblxuLy8gZ2V0dGluZyB0YWcgZnJvbSBFUzYrIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYFxubW9kdWxlLmV4cG9ydHMgPSBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPyBjbGFzc29mUmF3IDogZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBPLCB0YWcsIHJlc3VsdDtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG4gICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlXG4gICAgOiB0eXBlb2YgKHRhZyA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVE9fU1RSSU5HX1RBRykpID09ICdzdHJpbmcnID8gdGFnXG4gICAgLy8gYnVpbHRpblRhZyBjYXNlXG4gICAgOiBDT1JSRUNUX0FSR1VNRU5UUyA/IGNsYXNzb2ZSYXcoTylcbiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrXG4gICAgOiAocmVzdWx0ID0gY2xhc3NvZlJhdyhPKSkgPT0gJ09iamVjdCcgJiYgaXNDYWxsYWJsZShPLmNhbGxlZSkgPyAnQXJndW1lbnRzJyA6IHJlc3VsdDtcbn07XG4iLCJ2YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgYUNhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2EtY2FsbGFibGUnKTtcbnZhciBOQVRJVkVfQklORCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLW5hdGl2ZScpO1xuXG52YXIgYmluZCA9IHVuY3VycnlUaGlzKHVuY3VycnlUaGlzLmJpbmQpO1xuXG4vLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuLCB0aGF0KSB7XG4gIGFDYWxsYWJsZShmbik7XG4gIHJldHVybiB0aGF0ID09PSB1bmRlZmluZWQgPyBmbiA6IE5BVElWRV9CSU5EID8gYmluZChmbiwgdGhhdCkgOiBmdW5jdGlvbiAoLyogLi4uYXJncyAqLykge1xuICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICB9O1xufTtcbiIsInZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEJ1aWx0SW4oJ2RvY3VtZW50JywgJ2RvY3VtZW50RWxlbWVudCcpO1xuIiwidmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcblxuLy8gYElzQXJyYXlgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1pc2FycmF5XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tYXJyYXktaXNhcnJheSAtLSBzYWZlXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gaXNBcnJheShhcmd1bWVudCkge1xuICByZXR1cm4gY2xhc3NvZihhcmd1bWVudCkgPT0gJ0FycmF5Jztcbn07XG4iLCJ2YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG52YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcbnZhciBpbnNwZWN0U291cmNlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luc3BlY3Qtc291cmNlJyk7XG5cbnZhciBub29wID0gZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9O1xudmFyIGVtcHR5ID0gW107XG52YXIgY29uc3RydWN0ID0gZ2V0QnVpbHRJbignUmVmbGVjdCcsICdjb25zdHJ1Y3QnKTtcbnZhciBjb25zdHJ1Y3RvclJlZ0V4cCA9IC9eXFxzKig/OmNsYXNzfGZ1bmN0aW9uKVxcYi87XG52YXIgZXhlYyA9IHVuY3VycnlUaGlzKGNvbnN0cnVjdG9yUmVnRXhwLmV4ZWMpO1xudmFyIElOQ09SUkVDVF9UT19TVFJJTkcgPSAhY29uc3RydWN0b3JSZWdFeHAuZXhlYyhub29wKTtcblxudmFyIGlzQ29uc3RydWN0b3JNb2Rlcm4gPSBmdW5jdGlvbiBpc0NvbnN0cnVjdG9yKGFyZ3VtZW50KSB7XG4gIGlmICghaXNDYWxsYWJsZShhcmd1bWVudCkpIHJldHVybiBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdHJ1Y3Qobm9vcCwgZW1wdHksIGFyZ3VtZW50KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbnZhciBpc0NvbnN0cnVjdG9yTGVnYWN5ID0gZnVuY3Rpb24gaXNDb25zdHJ1Y3Rvcihhcmd1bWVudCkge1xuICBpZiAoIWlzQ2FsbGFibGUoYXJndW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gIHN3aXRjaCAoY2xhc3NvZihhcmd1bWVudCkpIHtcbiAgICBjYXNlICdBc3luY0Z1bmN0aW9uJzpcbiAgICBjYXNlICdHZW5lcmF0b3JGdW5jdGlvbic6XG4gICAgY2FzZSAnQXN5bmNHZW5lcmF0b3JGdW5jdGlvbic6IHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIC8vIHdlIGNhbid0IGNoZWNrIC5wcm90b3R5cGUgc2luY2UgY29uc3RydWN0b3JzIHByb2R1Y2VkIGJ5IC5iaW5kIGhhdmVuJ3QgaXRcbiAgICAvLyBgRnVuY3Rpb24jdG9TdHJpbmdgIHRocm93cyBvbiBzb21lIGJ1aWx0LWl0IGZ1bmN0aW9uIGluIHNvbWUgbGVnYWN5IGVuZ2luZXNcbiAgICAvLyAoZm9yIGV4YW1wbGUsIGBET01RdWFkYCBhbmQgc2ltaWxhciBpbiBGRjQxLSlcbiAgICByZXR1cm4gSU5DT1JSRUNUX1RPX1NUUklORyB8fCAhIWV4ZWMoY29uc3RydWN0b3JSZWdFeHAsIGluc3BlY3RTb3VyY2UoYXJndW1lbnQpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuaXNDb25zdHJ1Y3RvckxlZ2FjeS5zaGFtID0gdHJ1ZTtcblxuLy8gYElzQ29uc3RydWN0b3JgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1pc2NvbnN0cnVjdG9yXG5tb2R1bGUuZXhwb3J0cyA9ICFjb25zdHJ1Y3QgfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICB2YXIgY2FsbGVkO1xuICByZXR1cm4gaXNDb25zdHJ1Y3Rvck1vZGVybihpc0NvbnN0cnVjdG9yTW9kZXJuLmNhbGwpXG4gICAgfHwgIWlzQ29uc3RydWN0b3JNb2Rlcm4oT2JqZWN0KVxuICAgIHx8ICFpc0NvbnN0cnVjdG9yTW9kZXJuKGZ1bmN0aW9uICgpIHsgY2FsbGVkID0gdHJ1ZTsgfSlcbiAgICB8fCBjYWxsZWQ7XG59KSA/IGlzQ29uc3RydWN0b3JMZWdhY3kgOiBpc0NvbnN0cnVjdG9yTW9kZXJuO1xuIiwiLyogZ2xvYmFsIEFjdGl2ZVhPYmplY3QgLS0gb2xkIElFLCBXU0ggKi9cbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBkZWZpbmVQcm9wZXJ0aWVzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydGllcycpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VudW0tYnVnLWtleXMnKTtcbnZhciBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGRlbi1rZXlzJyk7XG52YXIgaHRtbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9odG1sJyk7XG52YXIgZG9jdW1lbnRDcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvY3VtZW50LWNyZWF0ZS1lbGVtZW50Jyk7XG52YXIgc2hhcmVkS2V5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1rZXknKTtcblxudmFyIEdUID0gJz4nO1xudmFyIExUID0gJzwnO1xudmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xudmFyIFNDUklQVCA9ICdzY3JpcHQnO1xudmFyIElFX1BST1RPID0gc2hhcmVkS2V5KCdJRV9QUk9UTycpO1xuXG52YXIgRW1wdHlDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfTtcblxudmFyIHNjcmlwdFRhZyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gIHJldHVybiBMVCArIFNDUklQVCArIEdUICsgY29udGVudCArIExUICsgJy8nICsgU0NSSVBUICsgR1Q7XG59O1xuXG4vLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgQWN0aXZlWCBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIE51bGxQcm90b09iamVjdFZpYUFjdGl2ZVggPSBmdW5jdGlvbiAoYWN0aXZlWERvY3VtZW50KSB7XG4gIGFjdGl2ZVhEb2N1bWVudC53cml0ZShzY3JpcHRUYWcoJycpKTtcbiAgYWN0aXZlWERvY3VtZW50LmNsb3NlKCk7XG4gIHZhciB0ZW1wID0gYWN0aXZlWERvY3VtZW50LnBhcmVudFdpbmRvdy5PYmplY3Q7XG4gIGFjdGl2ZVhEb2N1bWVudCA9IG51bGw7IC8vIGF2b2lkIG1lbW9yeSBsZWFrXG4gIHJldHVybiB0ZW1wO1xufTtcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIE51bGxQcm90b09iamVjdFZpYUlGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWdcbiAgdmFyIGlmcmFtZSA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gIHZhciBKUyA9ICdqYXZhJyArIFNDUklQVCArICc6JztcbiAgdmFyIGlmcmFtZURvY3VtZW50O1xuICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgaHRtbC5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvNDc1XG4gIGlmcmFtZS5zcmMgPSBTdHJpbmcoSlMpO1xuICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xuICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7XG4gIGlmcmFtZURvY3VtZW50LndyaXRlKHNjcmlwdFRhZygnZG9jdW1lbnQuRj1PYmplY3QnKSk7XG4gIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG4gIHJldHVybiBpZnJhbWVEb2N1bWVudC5GO1xufTtcblxuLy8gQ2hlY2sgZm9yIGRvY3VtZW50LmRvbWFpbiBhbmQgYWN0aXZlIHggc3VwcG9ydFxuLy8gTm8gbmVlZCB0byB1c2UgYWN0aXZlIHggYXBwcm9hY2ggd2hlbiBkb2N1bWVudC5kb21haW4gaXMgbm90IHNldFxuLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbS9pc3N1ZXMvMTUwXG4vLyB2YXJpYXRpb24gb2YgaHR0cHM6Ly9naXRodWIuY29tL2tpdGNhbWJyaWRnZS9lczUtc2hpbS9jb21taXQvNGY3MzhhYzA2NjM0NlxuLy8gYXZvaWQgSUUgR0MgYnVnXG52YXIgYWN0aXZlWERvY3VtZW50O1xudmFyIE51bGxQcm90b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBhY3RpdmVYRG9jdW1lbnQgPSBuZXcgQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogaWdub3JlICovIH1cbiAgTnVsbFByb3RvT2JqZWN0ID0gdHlwZW9mIGRvY3VtZW50ICE9ICd1bmRlZmluZWQnXG4gICAgPyBkb2N1bWVudC5kb21haW4gJiYgYWN0aXZlWERvY3VtZW50XG4gICAgICA/IE51bGxQcm90b09iamVjdFZpYUFjdGl2ZVgoYWN0aXZlWERvY3VtZW50KSAvLyBvbGQgSUVcbiAgICAgIDogTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lKClcbiAgICA6IE51bGxQcm90b09iamVjdFZpYUFjdGl2ZVgoYWN0aXZlWERvY3VtZW50KTsgLy8gV1NIXG4gIHZhciBsZW5ndGggPSBlbnVtQnVnS2V5cy5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkgZGVsZXRlIE51bGxQcm90b09iamVjdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2xlbmd0aF1dO1xuICByZXR1cm4gTnVsbFByb3RvT2JqZWN0KCk7XG59O1xuXG5oaWRkZW5LZXlzW0lFX1BST1RPXSA9IHRydWU7XG5cbi8vIGBPYmplY3QuY3JlYXRlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmNyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmIChPICE9PSBudWxsKSB7XG4gICAgRW1wdHlDb25zdHJ1Y3RvcltQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7XG4gICAgcmVzdWx0ID0gbmV3IEVtcHR5Q29uc3RydWN0b3IoKTtcbiAgICBFbXB0eUNvbnN0cnVjdG9yW1BST1RPVFlQRV0gPSBudWxsO1xuICAgIC8vIGFkZCBcIl9fcHJvdG9fX1wiIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGxcbiAgICByZXN1bHRbSUVfUFJPVE9dID0gTztcbiAgfSBlbHNlIHJlc3VsdCA9IE51bGxQcm90b09iamVjdCgpO1xuICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZGVmaW5lUHJvcGVydGllc01vZHVsZS5mKHJlc3VsdCwgUHJvcGVydGllcyk7XG59O1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgVjhfUFJPVE9UWVBFX0RFRklORV9CVUcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdjgtcHJvdG90eXBlLWRlZmluZS1idWcnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgb2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cycpO1xuXG4vLyBgT2JqZWN0LmRlZmluZVByb3BlcnRpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydGllc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1kZWZpbmVwcm9wZXJ0aWVzIC0tIHNhZmVcbmV4cG9ydHMuZiA9IERFU0NSSVBUT1JTICYmICFWOF9QUk9UT1RZUEVfREVGSU5FX0JVRyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICB2YXIgcHJvcHMgPSB0b0luZGV4ZWRPYmplY3QoUHJvcGVydGllcyk7XG4gIHZhciBrZXlzID0gb2JqZWN0S2V5cyhQcm9wZXJ0aWVzKTtcbiAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIga2V5O1xuICB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIGRlZmluZVByb3BlcnR5TW9kdWxlLmYoTywga2V5ID0ga2V5c1tpbmRleCsrXSwgcHJvcHNba2V5XSk7XG4gIHJldHVybiBPO1xufTtcbiIsInZhciBpbnRlcm5hbE9iamVjdEtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWtleXMtaW50ZXJuYWwnKTtcbnZhciBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbnVtLWJ1Zy1rZXlzJyk7XG5cbi8vIGBPYmplY3Qua2V5c2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5rZXlzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWtleXMgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pIHtcbiAgcmV0dXJuIGludGVybmFsT2JqZWN0S2V5cyhPLCBlbnVtQnVnS2V5cyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIFRPX1NUUklOR19UQUdfU1VQUE9SVCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmctdGFnLXN1cHBvcnQnKTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YnKTtcblxuLy8gYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgIG1ldGhvZCBpbXBsZW1lbnRhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nXG5tb2R1bGUuZXhwb3J0cyA9IFRPX1NUUklOR19UQUdfU1VQUE9SVCA/IHt9LnRvU3RyaW5nIDogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnW29iamVjdCAnICsgY2xhc3NvZih0aGlzKSArICddJztcbn07XG4iLCJ2YXIgUFJPUEVSX0ZVTkNUSU9OX05BTUUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tbmFtZScpLlBST1BFUjtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIHdoaXRlc3BhY2VzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3doaXRlc3BhY2VzJyk7XG5cbnZhciBub24gPSAnXFx1MjAwQlxcdTAwODVcXHUxODBFJztcblxuLy8gY2hlY2sgdGhhdCBhIG1ldGhvZCB3b3JrcyB3aXRoIHRoZSBjb3JyZWN0IGxpc3Rcbi8vIG9mIHdoaXRlc3BhY2VzIGFuZCBoYXMgYSBjb3JyZWN0IG5hbWVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE1FVEhPRF9OQU1FKSB7XG4gIHJldHVybiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhd2hpdGVzcGFjZXNbTUVUSE9EX05BTUVdKClcbiAgICAgIHx8IG5vbltNRVRIT0RfTkFNRV0oKSAhPT0gbm9uXG4gICAgICB8fCAoUFJPUEVSX0ZVTkNUSU9OX05BTUUgJiYgd2hpdGVzcGFjZXNbTUVUSE9EX05BTUVdLm5hbWUgIT09IE1FVEhPRF9OQU1FKTtcbiAgfSk7XG59O1xuIiwidmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgd2hpdGVzcGFjZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2hpdGVzcGFjZXMnKTtcblxudmFyIHJlcGxhY2UgPSB1bmN1cnJ5VGhpcygnJy5yZXBsYWNlKTtcbnZhciB3aGl0ZXNwYWNlID0gJ1snICsgd2hpdGVzcGFjZXMgKyAnXSc7XG52YXIgbHRyaW0gPSBSZWdFeHAoJ14nICsgd2hpdGVzcGFjZSArIHdoaXRlc3BhY2UgKyAnKicpO1xudmFyIHJ0cmltID0gUmVnRXhwKHdoaXRlc3BhY2UgKyB3aGl0ZXNwYWNlICsgJyokJyk7XG5cbi8vIGBTdHJpbmcucHJvdG90eXBlLnsgdHJpbSwgdHJpbVN0YXJ0LCB0cmltRW5kLCB0cmltTGVmdCwgdHJpbVJpZ2h0IH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoVFlQRSkge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzKSB7XG4gICAgdmFyIHN0cmluZyA9IHRvU3RyaW5nKHJlcXVpcmVPYmplY3RDb2VyY2libGUoJHRoaXMpKTtcbiAgICBpZiAoVFlQRSAmIDEpIHN0cmluZyA9IHJlcGxhY2Uoc3RyaW5nLCBsdHJpbSwgJycpO1xuICAgIGlmIChUWVBFICYgMikgc3RyaW5nID0gcmVwbGFjZShzdHJpbmcsIHJ0cmltLCAnJyk7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgU3RyaW5nLnByb3RvdHlwZS57IHRyaW1MZWZ0LCB0cmltU3RhcnQgfWAgbWV0aG9kc1xuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUudHJpbXN0YXJ0XG4gIHN0YXJ0OiBjcmVhdGVNZXRob2QoMSksXG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLnsgdHJpbVJpZ2h0LCB0cmltRW5kIH1gIG1ldGhvZHNcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLnRyaW1lbmRcbiAgZW5kOiBjcmVhdGVNZXRob2QoMiksXG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLnRyaW1gIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUudHJpbVxuICB0cmltOiBjcmVhdGVNZXRob2QoMylcbn07XG4iLCJ2YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xudmFyIHRlc3QgPSB7fTtcblxudGVzdFtUT19TVFJJTkdfVEFHXSA9ICd6JztcblxubW9kdWxlLmV4cG9ydHMgPSBTdHJpbmcodGVzdCkgPT09ICdbb2JqZWN0IHpdJztcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG5cbnZhciBTdHJpbmcgPSBnbG9iYWwuU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoY2xhc3NvZihhcmd1bWVudCkgPT09ICdTeW1ib2wnKSB0aHJvdyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGEgU3ltYm9sIHZhbHVlIHRvIGEgc3RyaW5nJyk7XG4gIHJldHVybiBTdHJpbmcoYXJndW1lbnQpO1xufTtcbiIsIi8vIGEgc3RyaW5nIG9mIGFsbCB2YWxpZCB1bmljb2RlIHdoaXRlc3BhY2VzXG5tb2R1bGUuZXhwb3J0cyA9ICdcXHUwMDA5XFx1MDAwQVxcdTAwMEJcXHUwMDBDXFx1MDAwRFxcdTAwMjBcXHUwMEEwXFx1MTY4MFxcdTIwMDBcXHUyMDAxXFx1MjAwMicgK1xuICAnXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMEFcXHUyMDJGXFx1MjA1RlxcdTMwMDBcXHUyMDI4XFx1MjAyOVxcdUZFRkYnO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgJGZpbmQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZmluZDtcbnZhciBhZGRUb1Vuc2NvcGFibGVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcycpO1xuXG52YXIgRklORCA9ICdmaW5kJztcbnZhciBTS0lQU19IT0xFUyA9IHRydWU7XG5cbi8vIFNob3VsZG4ndCBza2lwIGhvbGVzXG5pZiAoRklORCBpbiBbXSkgQXJyYXkoMSlbRklORF0oZnVuY3Rpb24gKCkgeyBTS0lQU19IT0xFUyA9IGZhbHNlOyB9KTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS5maW5kYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRcbiQoeyB0YXJnZXQ6ICdBcnJheScsIHByb3RvOiB0cnVlLCBmb3JjZWQ6IFNLSVBTX0hPTEVTIH0sIHtcbiAgZmluZDogZnVuY3Rpb24gZmluZChjYWxsYmFja2ZuIC8qICwgdGhhdCA9IHVuZGVmaW5lZCAqLykge1xuICAgIHJldHVybiAkZmluZCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS1AQHVuc2NvcGFibGVzXG5hZGRUb1Vuc2NvcGFibGVzKEZJTkQpO1xuIiwidmFyIFRPX1NUUklOR19UQUdfU1VQUE9SVCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmctdGFnLXN1cHBvcnQnKTtcbnZhciByZWRlZmluZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWRlZmluZScpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC10by1zdHJpbmcnKTtcblxuLy8gYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nXG5pZiAoIVRPX1NUUklOR19UQUdfU1VQUE9SVCkge1xuICByZWRlZmluZShPYmplY3QucHJvdG90eXBlLCAndG9TdHJpbmcnLCB0b1N0cmluZywgeyB1bnNhZmU6IHRydWUgfSk7XG59XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciAkdHJpbSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctdHJpbScpLnRyaW07XG52YXIgZm9yY2VkU3RyaW5nVHJpbU1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctdHJpbS1mb3JjZWQnKTtcblxuLy8gYFN0cmluZy5wcm90b3R5cGUudHJpbWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUudHJpbVxuJCh7IHRhcmdldDogJ1N0cmluZycsIHByb3RvOiB0cnVlLCBmb3JjZWQ6IGZvcmNlZFN0cmluZ1RyaW1NZXRob2QoJ3RyaW0nKSB9LCB7XG4gIHRyaW06IGZ1bmN0aW9uIHRyaW0oKSB7XG4gICAgcmV0dXJuICR0cmltKHRoaXMpO1xuICB9XG59KTtcbiIsInZhciBkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGw7XG5cbmlmICh0eXBlb2YgbmFqYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdFx0dmFyIG1ldGhvZCA9IHBhcmFtcy50eXBlIHx8ICdHRVQnO1xuXHRcdHZhciBkYXRhID0gcGFyYW1zLmRhdGEgfHwgbnVsbDtcblxuXHRcdG5hamEubWFrZVJlcXVlc3QobWV0aG9kLCBwYXJhbXMudXJsLCBkYXRhLCB7XG5cdFx0XHRoaXN0b3J5OiAncmVwbGFjZSdcblx0XHR9KVxuXHRcdFx0LnRoZW4ocGFyYW1zLnN1Y2Nlc3MpXG5cdFx0XHQuY2F0Y2gocGFyYW1zLmVycm9yKTtcblx0fTtcblxufSBlbHNlIHtcblx0XHRkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdFx0XHQkLm5ldHRlLmFqYXgocGFyYW1zKTtcblx0XHR9O1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRhZ3JpZCcpO1xuXG5cdGlmIChlbGVtZW50ICE9PSBudWxsKSB7XG5cdFx0cmV0dXJuIGRhdGFHcmlkUmVnaXN0ZXJBamF4Q2FsbCh7XG5cdFx0XHR0eXBlOiAnR0VUJyxcblx0XHRcdHVybDogZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVmcmVzaC1zdGF0ZScpXG5cdFx0fSk7XG5cdH1cbn0pO1xuIiwidmFyIGRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb247XG5cbmlmICh0eXBlb2YgbmFqYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHR2YXIgaXNOYWphMiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hamEgJiYgbmFqYS5WRVJTSU9OICYmIG5hamEuVkVSU0lPTiA+PSAyIH07XG5cdHZhciBuYWphRXZlbnRQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zKSB7IHJldHVybiBpc05hamEyKCkgPyBwYXJhbXMuZGV0YWlsIDogcGFyYW1zIH07XG5cdHZhciBuYWphUmVxdWVzdCA9IGZ1bmN0aW9uIChwYXJhbXMpIHsgcmV0dXJuIGlzTmFqYTIoKSA/IHBhcmFtcy5kZXRhaWwucmVxdWVzdCA6IHBhcmFtcy54aHIgfTtcblx0ZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbiA9IGZ1bmN0aW9uIChuYW1lLCBleHRlbnNpb24pIHtcblx0XHR2YXIgaW5pdCA9IGV4dGVuc2lvbi5pbml0O1xuXHRcdHZhciBzdWNjZXNzID0gZXh0ZW5zaW9uLnN1Y2Nlc3M7XG5cdFx0dmFyIGJlZm9yZSA9IGV4dGVuc2lvbi5iZWZvcmU7XG5cdFx0dmFyIGNvbXBsZXRlID0gZXh0ZW5zaW9uLmNvbXBsZXRlO1xuXG5cblx0XHR2YXIgTmV3RXh0ZW5zaW9uID0gZnVuY3Rpb24gTmV3RXh0ZW5zaW9uKG5hamEsIG5hbWUpIHtcblx0XHRcdHRoaXMubmFtZSA9IG5hbWU7XG5cblx0XHRcdHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChuYWphKSB7XG5cdFx0XHRcdGlmKGluaXQpIHtcblx0XHRcdFx0XHRuYWphLmFkZEV2ZW50TGlzdGVuZXIoJ2luaXQnLCBmdW5jdGlvbiAocGFyYW1zKSAge1xuXHRcdFx0XHRcdFx0aW5pdChuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5kZWZhdWx0T3B0aW9ucyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihzdWNjZXNzKSB7XG5cdFx0XHRcdFx0bmFqYS5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgZnVuY3Rpb24gKHBhcmFtcykgIHtcblx0XHRcdFx0XHRcdHZhciBwYXlsb2FkID0gaXNOYWphMigpID8gcGFyYW1zLmRldGFpbC5wYXlsb2FkIDogcGFyYW1zLnJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0c3VjY2VzcyhwYXlsb2FkLCBuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5vcHRpb25zKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGJlZm9yZSkge1xuXHRcdFx0XHRcdG5hamEuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlJywgZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdFx0XHRcdFx0YmVmb3JlKG5hamFSZXF1ZXN0KHBhcmFtcyksIG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLm9wdGlvbnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYoY29tcGxldGUpIHtcblx0XHRcdFx0XHRuYWphLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdFx0XHRcdFx0Y29tcGxldGUobmFqYVJlcXVlc3QocGFyYW1zKSwgbmFqYUV2ZW50UGFyYW1zKHBhcmFtcykub3B0aW9ucyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICghaXNOYWphMigpKSB7XG5cdFx0XHRcdHRoaXMuaW5pdGlhbGl6ZShuYWphKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmIChpc05hamEyKCkpIHtcblx0XHRcdG5hamEucmVnaXN0ZXJFeHRlbnNpb24obmV3IE5ld0V4dGVuc2lvbihudWxsLCBuYW1lKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5hamEucmVnaXN0ZXJFeHRlbnNpb24oTmV3RXh0ZW5zaW9uLCBuYW1lKTtcblx0XHR9XG5cdH07XG59IGVsc2UgaWYgKCQubmV0dGUpIHtcblx0XHRkYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uID0gZnVuY3Rpb24gKG5hbWUsIGV4dGVuc2lvbikge1xuXHRcdFx0JC5uZXR0ZS5leHQobmFtZSwgZXh0ZW5zaW9uKTtcblx0XHR9O1xufVxuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCd1YmxhYm9vLXNwaW5uZXJzJywge1xuXHRiZWZvcmU6IGZ1bmN0aW9uKHhociwgc2V0dGluZ3MpIHtcblx0XHR2YXIgZWwsIGlkLCByb3dfZGV0YWlsLCBzcGlubmVyX3RlbXBsYXRlLCBncmlkX2Z1bGxuYW1lO1xuXHRcdGlmIChzZXR0aW5ncy5uZXR0ZSkge1xuXHRcdFx0ZWwgPSBzZXR0aW5ncy5uZXR0ZS5lbDtcblx0XHRcdHNwaW5uZXJfdGVtcGxhdGUgPSAkKCc8ZGl2IGNsYXNzPVwidWJsYWJvby1zcGlubmVyIHVibGFib28tc3Bpbm5lci1zbWFsbFwiPjxpPjwvaT48aT48L2k+PGk+PC9pPjxpPjwvaT48L2Rpdj4nKTtcblx0XHRcdGlmIChlbC5pcygnLmRhdGFncmlkIFtuYW1lPVwiZ3JvdXBfYWN0aW9uW3N1Ym1pdF1cIl0nKSkge1xuXHRcdFx0XHRyZXR1cm4gZWwuYWZ0ZXIoc3Bpbm5lcl90ZW1wbGF0ZSk7XG5cdFx0XHR9IGVsc2UgaWYgKGVsLmlzKCcuZGF0YWdyaWQgYScpICYmIGVsLmRhdGEoJ3RvZ2dsZS1kZXRhaWwnKSkge1xuXHRcdFx0XHRpZCA9IHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbCcpO1xuXHRcdFx0XHRncmlkX2Z1bGxuYW1lID0gc2V0dGluZ3MubmV0dGUuZWwuYXR0cignZGF0YS10b2dnbGUtZGV0YWlsLWdyaWQtZnVsbG5hbWUnKTtcblx0XHRcdFx0cm93X2RldGFpbCA9ICQoJy5pdGVtLWRldGFpbC0nICsgZ3JpZF9mdWxsbmFtZSArICctaWQtJyArIGlkKTtcblx0XHRcdFx0aWYgKCFyb3dfZGV0YWlsLmhhc0NsYXNzKCdsb2FkZWQnKSkge1xuXHRcdFx0XHRcdHJldHVybiBlbC5hZGRDbGFzcygndWJsYWJvby1zcGlubmVyLWljb24nKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChlbC5pcygnLmRhdGFncmlkIC5jb2wtcGFnaW5hdGlvbiBhJykpIHtcblx0XHRcdFx0cmV0dXJuIGVsLmNsb3Nlc3QoJy5yb3ctZ3JpZC1ib3R0b20nKS5maW5kKCcuY29sLXBlci1wYWdlJykucHJlcGVuZChzcGlubmVyX3RlbXBsYXRlKTtcblx0XHRcdH0gZWxzZSBpZiAoZWwuaXMoJy5kYXRhZ3JpZCAuZGF0YWdyaWQtcGVyLXBhZ2Utc3VibWl0JykpIHtcblx0XHRcdFx0cmV0dXJuIGVsLmNsb3Nlc3QoJy5yb3ctZ3JpZC1ib3R0b20nKS5maW5kKCcuY29sLXBlci1wYWdlJykucHJlcGVuZChzcGlubmVyX3RlbXBsYXRlKTtcblx0XHRcdH0gZWxzZSBpZiAoZWwuaXMoJy5kYXRhZ3JpZCAucmVzZXQtZmlsdGVyJykpIHtcblx0XHRcdFx0cmV0dXJuIGVsLmNsb3Nlc3QoJy5yb3ctZ3JpZC1ib3R0b20nKS5maW5kKCcuY29sLXBlci1wYWdlJykucHJlcGVuZChzcGlubmVyX3RlbXBsYXRlKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHQkKCcudWJsYWJvby1zcGlubmVyJykucmVtb3ZlKCk7XG5cdFx0cmV0dXJuICQoJy51YmxhYm9vLXNwaW5uZXItaWNvbicpLnJlbW92ZUNsYXNzKCd1YmxhYm9vLXNwaW5uZXItaWNvbicpO1xuXHR9XG59KTtcbiIsInZhciBkYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uLCBkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwsIGRhdGFHcmlkTG9hZCwgZGF0YUdyaWRTdWJtaXRGb3JtO1xuXG5pZiAodHlwZW9mIG5hamEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0dmFyIGlzTmFqYTIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuYWphICYmIG5hamEuVkVSU0lPTiAmJiBuYWphLlZFUlNJT04gPj0gMiB9O1xuXHR2YXIgbmFqYUV2ZW50UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykgeyByZXR1cm4gaXNOYWphMigpID8gcGFyYW1zLmRldGFpbCA6IHBhcmFtcyB9O1xuXHR2YXIgbmFqYVJlcXVlc3QgPSBmdW5jdGlvbiAocGFyYW1zKSB7IHJldHVybiBpc05hamEyKCkgPyBwYXJhbXMuZGV0YWlsLnJlcXVlc3QgOiBwYXJhbXMueGhyIH07XG5cdGRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24gPSBmdW5jdGlvbiAobmFtZSwgZXh0ZW5zaW9uKSB7XG5cdFx0dmFyIGluaXQgPSBleHRlbnNpb24uaW5pdDtcblx0XHR2YXIgc3VjY2VzcyA9IGV4dGVuc2lvbi5zdWNjZXNzO1xuXHRcdHZhciBiZWZvcmUgPSBleHRlbnNpb24uYmVmb3JlO1xuXHRcdHZhciBjb21wbGV0ZSA9IGV4dGVuc2lvbi5jb21wbGV0ZTtcblx0XHR2YXIgaW50ZXJhY3Rpb24gPSBleHRlbnNpb24uaW50ZXJhY3Rpb247XG5cblxuXHRcdHZhciBOZXdFeHRlbnNpb24gPSBmdW5jdGlvbiBOZXdFeHRlbnNpb24obmFqYSwgbmFtZSkge1xuXHRcdFx0dGhpcy5uYW1lID0gbmFtZTtcblxuXHRcdFx0dGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKG5hamEpIHtcblx0XHRcdFx0aWYoaW5pdCkge1xuXHRcdFx0XHRcdG5hamEuYWRkRXZlbnRMaXN0ZW5lcignaW5pdCcsIGZ1bmN0aW9uIChwYXJhbXMpICB7XG5cdFx0XHRcdFx0XHRpbml0KG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLmRlZmF1bHRPcHRpb25zKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKHN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRuYWphLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBmdW5jdGlvbiAocGFyYW1zKSAge1xuXHRcdFx0XHRcdFx0dmFyIHBheWxvYWQgPSBpc05hamEyKCkgPyBwYXJhbXMuZGV0YWlsLnBheWxvYWQgOiBwYXJhbXMucmVzcG9uc2U7XG5cdFx0XHRcdFx0XHRzdWNjZXNzKHBheWxvYWQsIG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLm9wdGlvbnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGludGVyYWN0aW9uVGFyZ2V0ID0gbmFqYTtcblx0XHRcdFx0aWYgKGlzTmFqYTIoKSkge1xuXHRcdFx0XHRcdGludGVyYWN0aW9uVGFyZ2V0ID0gaW50ZXJhY3Rpb25UYXJnZXQudWlIYW5kbGVyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aW50ZXJhY3Rpb25UYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignaW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdFx0XHRcdFx0aWYgKGlzTmFqYTIoKSkge1xuXHRcdFx0XHRcdFx0cGFyYW1zLmRldGFpbC5vcHRpb25zLm5ldHRlID0ge1xuXHRcdFx0XHRcdFx0XHRlbDogJChwYXJhbXMuZGV0YWlsLmVsZW1lbnQpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHBhcmFtcy5vcHRpb25zLm5ldHRlID0ge1xuXHRcdFx0XHRcdFx0XHRlbDogJChwYXJhbXMuZWxlbWVudClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGludGVyYWN0aW9uKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWludGVyYWN0aW9uKG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLm9wdGlvbnMpKXtcblx0XHRcdFx0XHRcdFx0cGFyYW1zLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZihiZWZvcmUpIHtcblx0XHRcdFx0XHRuYWphLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0XHRcdFx0XHRcdGlmICghYmVmb3JlKG5hamFSZXF1ZXN0KHBhcmFtcyksIG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLm9wdGlvbnMpKVxuXHRcdFx0XHRcdFx0XHRwYXJhbXMucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGNvbXBsZXRlKSB7XG5cdFx0XHRcdFx0bmFqYS5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0XHRcdFx0XHRcdGNvbXBsZXRlKG5hamFSZXF1ZXN0KHBhcmFtcyksIG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLm9wdGlvbnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWlzTmFqYTIoKSkge1xuXHRcdFx0XHR0aGlzLmluaXRpYWxpemUobmFqYSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRpZiAoaXNOYWphMigpKSB7XG5cdFx0XHRuYWphLnJlZ2lzdGVyRXh0ZW5zaW9uKG5ldyBOZXdFeHRlbnNpb24obnVsbCwgbmFtZSkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuYWphLnJlZ2lzdGVyRXh0ZW5zaW9uKE5ld0V4dGVuc2lvbiwgbmFtZSk7XG5cdFx0fVxuXHR9O1xuXG5cblx0ZGF0YUdyaWRSZWdpc3RlckFqYXhDYWxsID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICB2YXIgbWV0aG9kID0gcGFyYW1zLnR5cGUgfHwgJ0dFVCc7XG4gICAgICAgIHZhciBkYXRhID0gcGFyYW1zLmRhdGEgfHwgbnVsbDtcblxuXHRcdG5hamEubWFrZVJlcXVlc3QobWV0aG9kLCBwYXJhbXMudXJsLCBkYXRhLCB7fSlcblx0XHRcdC50aGVuKHBhcmFtcy5zdWNjZXNzKVxuXHRcdFx0LmNhdGNoKHBhcmFtcy5lcnJvcik7XG5cdH07XG5cblx0ZGF0YUdyaWRMb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdG5hamEubG9hZCgpO1xuXHR9O1xuXG5cdGRhdGFHcmlkU3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7XG5cdFx0cmV0dXJuIG5hamEudWlIYW5kbGVyLnN1Ym1pdEZvcm0oZm9ybS5nZXQoMCkpO1xuXHR9O1xufSBlbHNlIGlmICgkLm5ldHRlKSB7XG5cdGRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24gPSBmdW5jdGlvbiAobmFtZSwgZXh0ZW5zaW9uKSB7XG5cdFx0JC5uZXR0ZS5leHQobmFtZSwgZXh0ZW5zaW9uKTtcblx0fTtcblx0ZGF0YUdyaWRSZWdpc3RlckFqYXhDYWxsID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdCQubmV0dGUuYWpheChwYXJhbXMpO1xuXHR9O1xuXHRkYXRhR3JpZExvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JC5uZXR0ZS5sb2FkKCk7XG5cdH07XG5cdGRhdGFHcmlkU3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7XG5cdFx0cmV0dXJuIGZvcm0uc3VibWl0KCk7XG5cdH07XG59IGVsc2Uge1xuXHR0aHJvdyBuZXcgRXJyb3IoXCJJbmNsdWRlIE5hamEuanMgb3IgbmV0dGUuYWpheCBmb3IgZGF0YWdyaWRzIHRvIHdvcmshXCIpXG59XG5cblxudmFyIGRhdGFncmlkRml0bGVyTXVsdGlTZWxlY3QsIGRhdGFncmlkR3JvdXBBY3Rpb25NdWx0aVNlbGVjdCwgZGF0YWdyaWRTaGlmdEdyb3VwU2VsZWN0aW9uLCBkYXRhZ3JpZFNvcnRhYmxlLCBkYXRhZ3JpZFNvcnRhYmxlVHJlZSwgZ2V0RXZlbnREb21QYXRoLFxuXHRpbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1kYXRhZ3JpZC1jb25maXJtXTpub3QoLmFqYXgpJywgZnVuY3Rpb24oZSkge1xuXHRpZiAoIWNvbmZpcm0oJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2RhdGEtZGF0YWdyaWQtY29uZmlybScpKSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0cmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcblx0fVxufSk7XG5cbmlmICh0eXBlb2YgbmFqYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRkYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5jb25maXJtJywge1xuXHRcdGludGVyYWN0aW9uOiBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdFx0dmFyIGNvbmZpcm1fbWVzc2FnZTtcblx0XHRcdGlmIChzZXR0aW5ncy5uZXR0ZSkge1xuXHRcdFx0XHRjb25maXJtX21lc3NhZ2UgPSBzZXR0aW5ncy5uZXR0ZS5lbC5kYXRhKCdkYXRhZ3JpZC1jb25maXJtJyk7XG5cdFx0XHRcdGlmIChjb25maXJtX21lc3NhZ2UpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29uZmlybShjb25maXJtX21lc3NhZ2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH0pO1xufSBlbHNlIHtcblx0ZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuY29uZmlybScsIHtcblx0XHRiZWZvcmU6IGZ1bmN0aW9uKHhociwgc2V0dGluZ3MpIHtcblx0XHRcdHZhciBjb25maXJtX21lc3NhZ2U7XG5cdFx0XHRpZiAoc2V0dGluZ3MubmV0dGUpIHtcblx0XHRcdFx0Y29uZmlybV9tZXNzYWdlID0gc2V0dGluZ3MubmV0dGUuZWwuZGF0YSgnZGF0YWdyaWQtY29uZmlybScpO1xuXHRcdFx0XHRpZiAoY29uZmlybV9tZXNzYWdlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbmZpcm0oY29uZmlybV9tZXNzYWdlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuXG4kKGRvY3VtZW50KS5vbignY2hhbmdlJywgJ3NlbGVjdFtkYXRhLWF1dG9zdWJtaXQtcGVyLXBhZ2VdJywgZnVuY3Rpb24oKSB7XG5cdHZhciBidXR0b247XG5cdGJ1dHRvbiA9ICQodGhpcykucGFyZW50KCkuZmluZCgnaW5wdXRbdHlwZT1zdWJtaXRdJyk7XG5cdGlmIChidXR0b24ubGVuZ3RoID09PSAwKSB7XG5cdFx0YnV0dG9uID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdidXR0b25bdHlwZT1zdWJtaXRdJyk7XG5cdH1cblx0cmV0dXJuIGJ1dHRvbi5jbGljaygpO1xufSkub24oJ2NoYW5nZScsICdzZWxlY3RbZGF0YS1hdXRvc3VibWl0XScsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gZGF0YUdyaWRTdWJtaXRGb3JtKCQodGhpcykuY2xvc2VzdCgnZm9ybScpLmZpcnN0KCkpO1xufSkub24oJ2NoYW5nZScsICdpbnB1dFtkYXRhLWF1dG9zdWJtaXRdW2RhdGEtYXV0b3N1Ym1pdC1jaGFuZ2VdJywgZnVuY3Rpb24oZSkge1xuXHR2YXIgJHRoaXMsIGNvZGU7XG5cdGNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZSB8fCAwO1xuXHRjbGVhclRpbWVvdXQod2luZG93LmRhdGFncmlkX2F1dG9zdWJtaXRfdGltZXIpO1xuXHQkdGhpcyA9ICQodGhpcyk7XG5cdHJldHVybiB3aW5kb3cuZGF0YWdyaWRfYXV0b3N1Ym1pdF90aW1lciA9IHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGRhdGFHcmlkU3VibWl0Rm9ybSgkdGhpcy5jbG9zZXN0KCdmb3JtJykuZmlyc3QoKSk7XG5cdFx0fTtcblx0fSkodGhpcyksIDIwMCk7XG59KS5vbigna2V5dXAnLCAnaW5wdXRbZGF0YS1hdXRvc3VibWl0XScsIGZ1bmN0aW9uKGUpIHtcblx0dmFyICR0aGlzLCBjb2RlO1xuXHRjb2RlID0gZS53aGljaCB8fCBlLmtleUNvZGUgfHwgMDtcblx0aWYgKChjb2RlICE9PSAxMykgJiYgKChjb2RlID49IDkgJiYgY29kZSA8PSA0MCkgfHwgKGNvZGUgPj0gMTEyICYmIGNvZGUgPD0gMTIzKSkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0Y2xlYXJUaW1lb3V0KHdpbmRvdy5kYXRhZ3JpZF9hdXRvc3VibWl0X3RpbWVyKTtcblx0JHRoaXMgPSAkKHRoaXMpO1xuXHRyZXR1cm4gd2luZG93LmRhdGFncmlkX2F1dG9zdWJtaXRfdGltZXIgPSBzZXRUaW1lb3V0KChmdW5jdGlvbihfdGhpcykge1xuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkYXRhR3JpZFN1Ym1pdEZvcm0oJHRoaXMuY2xvc2VzdCgnZm9ybScpLmZpcnN0KCkpO1xuXHRcdH07XG5cdH0pKHRoaXMpLCAyMDApO1xufSkub24oJ2tleWRvd24nLCAnLmRhdGFncmlkLWlubGluZS1lZGl0IGlucHV0JywgZnVuY3Rpb24oZSkge1xuXHR2YXIgY29kZTtcblx0Y29kZSA9IGUud2hpY2ggfHwgZS5rZXlDb2RlIHx8IDA7XG5cdGlmIChjb2RlID09PSAxMykge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHJldHVybiAkKHRoaXMpLmNsb3Nlc3QoJ3RyJykuZmluZCgnLmNvbC1hY3Rpb24taW5saW5lLWVkaXQgW25hbWU9XCJpbmxpbmVfZWRpdFtzdWJtaXRdXCJdJykuY2xpY2soKTtcblx0fVxufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgJ2lucHV0W2RhdGEtZGF0YWdyaWQtbWFudWFsc3VibWl0XScsIGZ1bmN0aW9uKGUpIHtcblx0dmFyIGNvZGU7XG5cdGNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZSB8fCAwO1xuXHRpZiAoY29kZSA9PT0gMTMpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRyZXR1cm4gZGF0YUdyaWRTdWJtaXRGb3JtKCQodGhpcykuY2xvc2VzdCgnZm9ybScpLmZpcnN0KCkpO1xuXHR9XG59KTtcblxuZ2V0RXZlbnREb21QYXRoID0gZnVuY3Rpb24oZSkge1xuXHR2YXIgbm9kZSwgcGF0aDtcblx0aWYgKGluZGV4T2YuY2FsbChlLCBwYXRoKSA+PSAwKSB7XG5cdFx0cmV0dXJuIGUucGF0aDtcblx0fVxuXHRwYXRoID0gW107XG5cdG5vZGUgPSBlLnRhcmdldDtcblx0d2hpbGUgKG5vZGUgIT09IGRvY3VtZW50LmJvZHkpIHtcblx0XHRpZiAobm9kZSA9PT0gbnVsbCkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHBhdGgucHVzaChub2RlKTtcblx0XHRub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXHR9XG5cdHJldHVybiBwYXRoO1xufTtcblxuZGF0YWdyaWRTaGlmdEdyb3VwU2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdHZhciBsYXN0X2NoZWNrYm94O1xuXHRsYXN0X2NoZWNrYm94ID0gbnVsbDtcblx0cmV0dXJuIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdHZhciBjaGVja2JveGVzX3Jvd3MsIGN1cnJlbnRfY2hlY2tib3hfcm93LCBlbCwgZXZlbnQsIGksIGllLCBpbnB1dCwgaiwgaywgbGFzdF9jaGVja2JveF9yb3csIGxhc3RfY2hlY2tib3hfdGJvZHksIGxlbiwgbGVuMSwgbGVuMiwgcmVmLCByZWYxLCByZXN1bHRzLCByb3csIHJvd3M7XG5cdFx0cmVmID0gZ2V0RXZlbnREb21QYXRoKGUpO1xuXHRcdGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0ZWwgPSByZWZbaV07XG5cdFx0XHRpZiAoJChlbCkuaXMoJy5jb2wtY2hlY2tib3gnKSAmJiBsYXN0X2NoZWNrYm94ICYmIGUuc2hpZnRLZXkpIHtcblx0XHRcdFx0Y3VycmVudF9jaGVja2JveF9yb3cgPSAkKGVsKS5jbG9zZXN0KCd0cicpO1xuXHRcdFx0XHRsYXN0X2NoZWNrYm94X3JvdyA9IGxhc3RfY2hlY2tib3guY2xvc2VzdCgndHInKTtcblx0XHRcdFx0bGFzdF9jaGVja2JveF90Ym9keSA9IGxhc3RfY2hlY2tib3hfcm93LmNsb3Nlc3QoJ3Rib2R5Jyk7XG5cdFx0XHRcdGNoZWNrYm94ZXNfcm93cyA9IGxhc3RfY2hlY2tib3hfdGJvZHkuZmluZCgndHInKS50b0FycmF5KCk7XG5cdFx0XHRcdGlmIChjdXJyZW50X2NoZWNrYm94X3Jvdy5pbmRleCgpID4gbGFzdF9jaGVja2JveF9yb3cuaW5kZXgoKSkge1xuXHRcdFx0XHRcdHJvd3MgPSBjaGVja2JveGVzX3Jvd3Muc2xpY2UobGFzdF9jaGVja2JveF9yb3cuaW5kZXgoKSwgY3VycmVudF9jaGVja2JveF9yb3cuaW5kZXgoKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY3VycmVudF9jaGVja2JveF9yb3cuaW5kZXgoKSA8IGxhc3RfY2hlY2tib3hfcm93LmluZGV4KCkpIHtcblx0XHRcdFx0XHRyb3dzID0gY2hlY2tib3hlc19yb3dzLnNsaWNlKGN1cnJlbnRfY2hlY2tib3hfcm93LmluZGV4KCkgKyAxLCBsYXN0X2NoZWNrYm94X3Jvdy5pbmRleCgpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIXJvd3MpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Zm9yIChqID0gMCwgbGVuMSA9IHJvd3MubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdFx0XHRcdFx0cm93ID0gcm93c1tqXTtcblx0XHRcdFx0XHRpbnB1dCA9ICQocm93KS5maW5kKCcuY29sLWNoZWNrYm94IGlucHV0W3R5cGU9Y2hlY2tib3hdJylbMF07XG5cdFx0XHRcdFx0aWYgKGlucHV0KSB7XG5cdFx0XHRcdFx0XHRpbnB1dC5jaGVja2VkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGllID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUUgXCIpO1xuXHRcdFx0XHRcdFx0aWYgKGllKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LmluaXRFdmVudCgnY2hhbmdlJywgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRldmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywge1xuXHRcdFx0XHRcdFx0XHRcdCdidWJibGVzJzogdHJ1ZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZWYxID0gZ2V0RXZlbnREb21QYXRoKGUpO1xuXHRcdHJlc3VsdHMgPSBbXTtcblx0XHRmb3IgKGsgPSAwLCBsZW4yID0gcmVmMS5sZW5ndGg7IGsgPCBsZW4yOyBrKyspIHtcblx0XHRcdGVsID0gcmVmMVtrXTtcblx0XHRcdGlmICgkKGVsKS5pcygnLmNvbC1jaGVja2JveCcpKSB7XG5cdFx0XHRcdHJlc3VsdHMucHVzaChsYXN0X2NoZWNrYm94ID0gJChlbCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHZvaWQgMCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9KTtcbn07XG5cbmRhdGFncmlkU2hpZnRHcm91cFNlbGVjdGlvbigpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG5cdHZhciBidXR0b25zLCBjaGVja2VkX2lucHV0cywgY291bnRlciwgZXZlbnQsIGdyaWQsIGksIGllLCBpbnB1dCwgaW5wdXRzLCBsZW4sIHJlc3VsdHMsIHNlbGVjdCwgdG90YWw7XG5cdGdyaWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2hlY2snKTtcblx0aWYgKGdyaWQpIHtcblx0XHRjaGVja2VkX2lucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W2RhdGEtY2hlY2stYWxsLScgKyBncmlkICsgJ106Y2hlY2tlZCcpO1xuXHRcdHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRhZ3JpZC0nICsgZ3JpZCArICcgc2VsZWN0W25hbWU9XCJncm91cF9hY3Rpb25bZ3JvdXBfYWN0aW9uXVwiXScpO1xuXHRcdGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0YWdyaWQtJyArIGdyaWQgKyAnIC5yb3ctZ3JvdXAtYWN0aW9ucyAqW3R5cGU9XCJzdWJtaXRcIl0nKTtcblx0XHRjb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGFncmlkLScgKyBncmlkICsgJyAuZGF0YWdyaWQtc2VsZWN0ZWQtcm93cy1jb3VudCcpO1xuXG5cdFx0aWYgKGNoZWNrZWRfaW5wdXRzLmxlbmd0aCkge1xuXHRcdFx0aWYgKGJ1dHRvbnMpIHtcblx0XHRcdFx0YnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidXR0b24pIHtcblx0XHRcdFx0XHRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2VsZWN0KSB7XG5cdFx0XHRcdHNlbGVjdC5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dG90YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtkYXRhLWNoZWNrLWFsbC0nICsgZ3JpZCArICddJykubGVuZ3RoO1xuXHRcdFx0aWYgKGNvdW50ZXIpIHtcblx0XHRcdFx0Y291bnRlci5pbm5lckhUTUwgPSBjaGVja2VkX2lucHV0cy5sZW5ndGggKyAnLycgKyB0b3RhbDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGJ1dHRvbnMpIHtcblx0XHRcdFx0YnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidXR0b24pIHtcblx0XHRcdFx0XHRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGlmIChzZWxlY3QpIHtcblx0XHRcdFx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0c2VsZWN0LnZhbHVlID0gXCJcIjtcblx0XHRcdH1cblx0XHRcdGlmIChjb3VudGVyKSB7XG5cdFx0XHRcdGNvdW50ZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWUgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSBcIik7XG5cdFx0aWYgKGllKSB7XG5cdFx0XHRldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdFx0ZXZlbnQuaW5pdEV2ZW50KCdjaGFuZ2UnLCB0cnVlLCB0cnVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScsIHtcblx0XHRcdFx0J2J1YmJsZXMnOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKHNlbGVjdCkge1xuXHRcdFx0c2VsZWN0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHRcdH1cblx0fVxuXHRncmlkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrLWFsbCcpO1xuXHRpZiAoZ3JpZCkge1xuXHRcdGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Y2hlY2tib3hdW2RhdGEtY2hlY2stYWxsLScgKyBncmlkICsgJ10nKTtcblx0XHRyZXN1bHRzID0gW107XG5cdFx0Zm9yIChpID0gMCwgbGVuID0gaW5wdXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpbnB1dCA9IGlucHV0c1tpXTtcblx0XHRcdGlucHV0LmNoZWNrZWQgPSBlLnRhcmdldC5jaGVja2VkO1xuXHRcdFx0aWUgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSBcIik7XG5cdFx0XHRpZiAoaWUpIHtcblx0XHRcdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0XHRcdFx0ZXZlbnQuaW5pdEV2ZW50KCdjaGFuZ2UnLCB0cnVlLCB0cnVlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7XG5cdFx0XHRcdFx0J2J1YmJsZXMnOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmVzdWx0cy5wdXNoKGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cbn0pO1xuXG5cbndpbmRvdy5kYXRhZ3JpZFNlcmlhbGl6ZVVybCA9IGZ1bmN0aW9uKG9iaiwgcHJlZml4KSB7XG52YXIgc3RyID0gW107XG5mb3IodmFyIHAgaW4gb2JqKSB7XG5cdGlmIChvYmouaGFzT3duUHJvcGVydHkocCkpIHtcblx0XHR2YXIgayA9IHByZWZpeCA/IHByZWZpeCArIFwiW1wiICsgcCArIFwiXVwiIDogcCwgdiA9IG9ialtwXTtcblx0XHRpZiAodiAhPT0gbnVsbCAmJiB2ICE9PSBcIlwiKSB7XG5cdFx0XHRpZiAodHlwZW9mIHYgPT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHR2YXIgciA9IHdpbmRvdy5kYXRhZ3JpZFNlcmlhbGl6ZVVybCh2LCBrKTtcblx0XHRcdFx0XHRpZiAocikge1xuXHRcdFx0XHRcdFx0c3RyLnB1c2gocik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodikpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxucmV0dXJuIHN0ci5qb2luKFwiJlwiKTtcbn1cbjtcblxuZGF0YWdyaWRTb3J0YWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mICQuZm4uc29ydGFibGUgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHJldHVybiAkKCcuZGF0YWdyaWQgW2RhdGEtc29ydGFibGVdJykuc29ydGFibGUoe1xuXHRcdGhhbmRsZTogJy5oYW5kbGUtc29ydCcsXG5cdFx0aXRlbXM6ICd0cicsXG5cdFx0YXhpczogJ3knLFxuXHRcdHVwZGF0ZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG5cdFx0XHR2YXIgY29tcG9uZW50X3ByZWZpeCwgZGF0YSwgaXRlbV9pZCwgbmV4dF9pZCwgcHJldl9pZCwgcm93LCB1cmw7XG5cdFx0XHRyb3cgPSB1aS5pdGVtLmNsb3Nlc3QoJ3RyW2RhdGEtaWRdJyk7XG5cdFx0XHRpdGVtX2lkID0gcm93LmRhdGEoJ2lkJyk7XG5cdFx0XHRwcmV2X2lkID0gbnVsbDtcblx0XHRcdG5leHRfaWQgPSBudWxsO1xuXHRcdFx0aWYgKHJvdy5wcmV2KCkubGVuZ3RoKSB7XG5cdFx0XHRcdHByZXZfaWQgPSByb3cucHJldigpLmRhdGEoJ2lkJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocm93Lm5leHQoKS5sZW5ndGgpIHtcblx0XHRcdFx0bmV4dF9pZCA9IHJvdy5uZXh0KCkuZGF0YSgnaWQnKTtcblx0XHRcdH1cblx0XHRcdHVybCA9ICQodGhpcykuZGF0YSgnc29ydGFibGUtdXJsJyk7XG5cdFx0XHRkYXRhID0ge307XG5cdFx0XHRjb21wb25lbnRfcHJlZml4ID0gcm93LmNsb3Nlc3QoJy5kYXRhZ3JpZCcpLmZpbmQoJ3Rib2R5JykuYXR0cignZGF0YS1zb3J0YWJsZS1wYXJlbnQtcGF0aCcpO1xuXHRcdFx0ZGF0YVsoY29tcG9uZW50X3ByZWZpeCArICctaXRlbV9pZCcpLnJlcGxhY2UoL14tLywgJycpXSA9IGl0ZW1faWQ7XG5cdFx0XHRpZiAocHJldl9pZCAhPT0gbnVsbCkge1xuXHRcdFx0XHRkYXRhWyhjb21wb25lbnRfcHJlZml4ICsgJy1wcmV2X2lkJykucmVwbGFjZSgvXi0vLCAnJyldID0gcHJldl9pZDtcblx0XHRcdH1cblx0XHRcdGlmIChuZXh0X2lkICE9PSBudWxsKSB7XG5cdFx0XHRcdGRhdGFbKGNvbXBvbmVudF9wcmVmaXggKyAnLW5leHRfaWQnKS5yZXBsYWNlKC9eLS8sICcnKV0gPSBuZXh0X2lkO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRhdGFHcmlkUmVnaXN0ZXJBamF4Q2FsbCh7XG5cdFx0XHRcdHR5cGU6ICdHRVQnLFxuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXHRcdFx0XHRcdHJldHVybiBhbGVydChqcVhIUi5zdGF0dXNUZXh0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRoZWxwZXI6IGZ1bmN0aW9uKGUsIHVpKSB7XG5cdFx0XHR1aS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkKHRoaXMpLndpZHRoKCQodGhpcykud2lkdGgoKSk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB1aTtcblx0XHR9XG5cdH0pO1xufTtcblxuJChmdW5jdGlvbigpIHtcblx0cmV0dXJuIGRhdGFncmlkU29ydGFibGUoKTtcbn0pO1xuXG5pZiAodHlwZW9mIGRhdGFncmlkU29ydGFibGVUcmVlID09PSAndW5kZWZpbmVkJykge1xuXHRkYXRhZ3JpZFNvcnRhYmxlVHJlZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0eXBlb2YgJCgnLmRhdGFncmlkLXRyZWUtaXRlbS1jaGlsZHJlbicpLnNvcnRhYmxlID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRyZXR1cm4gJCgnLmRhdGFncmlkLXRyZWUtaXRlbS1jaGlsZHJlbicpLnNvcnRhYmxlKHtcblx0XHRcdGhhbmRsZTogJy5oYW5kbGUtc29ydCcsXG5cdFx0XHRpdGVtczogJy5kYXRhZ3JpZC10cmVlLWl0ZW06bm90KC5kYXRhZ3JpZC10cmVlLWhlYWRlciknLFxuXHRcdFx0dG9sZXJhbmNlRWxlbWVudDogJz4gLmRhdGFncmlkLXRyZWUtaXRlbS1jb250ZW50Jyxcblx0XHRcdGNvbm5lY3RXaXRoOiAnLmRhdGFncmlkLXRyZWUtaXRlbS1jaGlsZHJlbicsXG5cdFx0XHR1cGRhdGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuXHRcdFx0XHR2YXIgY29tcG9uZW50X3ByZWZpeCwgZGF0YSwgaXRlbV9pZCwgbmV4dF9pZCwgcGFyZW50LCBwYXJlbnRfaWQsIHByZXZfaWQsIHJvdywgdXJsO1xuXHRcdFx0XHQkKCcudG9nZ2xlLXRyZWUtdG8tZGVsZXRlJykucmVtb3ZlKCk7XG5cdFx0XHRcdHJvdyA9IHVpLml0ZW0uY2xvc2VzdCgnLmRhdGFncmlkLXRyZWUtaXRlbVtkYXRhLWlkXScpO1xuXHRcdFx0XHRpdGVtX2lkID0gcm93LmRhdGEoJ2lkJyk7XG5cdFx0XHRcdHByZXZfaWQgPSBudWxsO1xuXHRcdFx0XHRuZXh0X2lkID0gbnVsbDtcblx0XHRcdFx0cGFyZW50X2lkID0gbnVsbDtcblx0XHRcdFx0aWYgKHJvdy5wcmV2KCkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0cHJldl9pZCA9IHJvdy5wcmV2KCkuZGF0YSgnaWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocm93Lm5leHQoKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRuZXh0X2lkID0gcm93Lm5leHQoKS5kYXRhKCdpZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBhcmVudCA9IHJvdy5wYXJlbnQoKS5jbG9zZXN0KCcuZGF0YWdyaWQtdHJlZS1pdGVtJyk7XG5cdFx0XHRcdGlmIChwYXJlbnQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0cGFyZW50LmZpbmQoJy5kYXRhZ3JpZC10cmVlLWl0ZW0tY2hpbGRyZW4nKS5maXJzdCgpLmNzcyh7XG5cdFx0XHRcdFx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cGFyZW50LmFkZENsYXNzKCdoYXMtY2hpbGRyZW4nKTtcblx0XHRcdFx0XHRwYXJlbnRfaWQgPSBwYXJlbnQuZGF0YSgnaWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR1cmwgPSAkKHRoaXMpLmRhdGEoJ3NvcnRhYmxlLXVybCcpO1xuXHRcdFx0XHRpZiAoIXVybCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRwYXJlbnQuZmluZCgnW2RhdGEtdG9nZ2xlLXRyZWVdJykuZmlyc3QoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHRcdGNvbXBvbmVudF9wcmVmaXggPSByb3cuY2xvc2VzdCgnLmRhdGFncmlkLXRyZWUnKS5hdHRyKCdkYXRhLXNvcnRhYmxlLXBhcmVudC1wYXRoJyk7XG5cdFx0XHRcdGRhdGEgPSB7fTtcblx0XHRcdFx0ZGF0YVsoY29tcG9uZW50X3ByZWZpeCArICctaXRlbV9pZCcpLnJlcGxhY2UoL14tLywgJycpXSA9IGl0ZW1faWQ7XG5cdFx0XHRcdGlmIChwcmV2X2lkICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0ZGF0YVsoY29tcG9uZW50X3ByZWZpeCArICctcHJldl9pZCcpLnJlcGxhY2UoL14tLywgJycpXSA9IHByZXZfaWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5leHRfaWQgIT09IG51bGwpIHtcblx0XHRcdFx0XHRkYXRhWyhjb21wb25lbnRfcHJlZml4ICsgJy1uZXh0X2lkJykucmVwbGFjZSgvXi0vLCAnJyldID0gbmV4dF9pZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhWyhjb21wb25lbnRfcHJlZml4ICsgJy1wYXJlbnRfaWQnKS5yZXBsYWNlKC9eLS8sICcnKV0gPSBwYXJlbnRfaWQ7XG5cdFx0XHRcdHJldHVybiBkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwoe1xuXHRcdFx0XHRcdHR5cGU6ICdHRVQnLFxuXHRcdFx0XHRcdHVybDogdXJsLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXHRcdFx0XHRcdFx0aWYgKGVycm9yVGhyb3duICE9PSAnYWJvcnQnKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBhbGVydChqcVhIUi5zdGF0dXNUZXh0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuXHRcdFx0XHRyZXR1cm4gJCgnLnRvZ2dsZS10cmVlLXRvLWRlbGV0ZScpLnJlbW92ZUNsYXNzKCd0b2dnbGUtdHJlZS10by1kZWxldGUnKTtcblx0XHRcdH0sXG5cdFx0XHRzdGFydDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG5cdFx0XHRcdHZhciBwYXJlbnQ7XG5cdFx0XHRcdHBhcmVudCA9IHVpLml0ZW0ucGFyZW50KCkuY2xvc2VzdCgnLmRhdGFncmlkLXRyZWUtaXRlbScpO1xuXHRcdFx0XHRpZiAocGFyZW50Lmxlbmd0aCkge1xuXHRcdFx0XHRcdGlmIChwYXJlbnQuZmluZCgnLmRhdGFncmlkLXRyZWUtaXRlbScpLmxlbmd0aCA9PT0gMikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhcmVudC5maW5kKCdbZGF0YS10b2dnbGUtdHJlZV0nKS5hZGRDbGFzcygndG9nZ2xlLXRyZWUtdG8tZGVsZXRlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG59XG5cbiQoZnVuY3Rpb24oKSB7XG5cdHJldHVybiBkYXRhZ3JpZFNvcnRhYmxlVHJlZSgpO1xufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLmhhcHB5Jywge1xuXHRzdWNjZXNzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYywgY2hlY2tlZF9yb3dzLCBjbGFzc19zZWxlY3RvciwgY2xhc3NlcywgZXZlbnQsIGdyaWQsIGdyaWRzLCBpLCBpZSwgaW5wdXQsIGosIGxlbiwgbGVuMSwgcmVzdWx0cztcblx0XHRpZiAod2luZG93LmhhcHB5KSB7XG5cdFx0XHR3aW5kb3cuaGFwcHkucmVzZXQoKTtcblx0XHR9XG5cdFx0Z3JpZHMgPSAkKCcuZGF0YWdyaWQnKTtcblx0XHRyZXN1bHRzID0gW107XG5cdFx0Zm9yIChpID0gMCwgbGVuID0gZ3JpZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGdyaWQgPSBncmlkc1tpXTtcblx0XHRcdGNsYXNzZXMgPSBncmlkLmNsYXNzTGlzdDtcblx0XHRcdGNsYXNzX3NlbGVjdG9yID0gJyc7XG5cdFx0XHRmb3IgKGogPSAwLCBsZW4xID0gY2xhc3Nlcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0XHRcdFx0YyA9IGNsYXNzZXNbal07XG5cdFx0XHRcdGNsYXNzX3NlbGVjdG9yID0gY2xhc3Nfc2VsZWN0b3IgKyAnLicgKyBjO1xuXHRcdFx0fVxuXHRcdFx0Y2hlY2tlZF9yb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjbGFzc19zZWxlY3RvciArICcgJyArICdpbnB1dFtkYXRhLWNoZWNrXTpjaGVja2VkJyk7XG5cdFx0XHRpZiAoY2hlY2tlZF9yb3dzLmxlbmd0aCA9PT0gMSAmJiBjaGVja2VkX3Jvd3NbMF0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICd0b2dnbGUtYWxsJykge1xuXHRcdFx0XHRpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3Nfc2VsZWN0b3IgKyAnIGlucHV0W25hbWU9dG9nZ2xlLWFsbF0nKTtcblx0XHRcdFx0aWYgKGlucHV0KSB7XG5cdFx0XHRcdFx0aW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGllID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUUgXCIpO1xuXHRcdFx0XHRcdGlmIChpZSkge1xuXHRcdFx0XHRcdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0XHRcdFx0XHRcdGV2ZW50LmluaXRFdmVudCgnY2hhbmdlJywgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7XG5cdFx0XHRcdFx0XHRcdCdidWJibGVzJzogdHJ1ZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaChpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzdWx0cy5wdXNoKHZvaWQgMCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdHMucHVzaCh2b2lkIDApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLnNvcnRhYmxlJywge1xuXHRzdWNjZXNzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZGF0YWdyaWRTb3J0YWJsZSgpO1xuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuZm9ybXMnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkKCcuZGF0YWdyaWQnKS5maW5kKCdmb3JtJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB3aW5kb3cuTmV0dGUuaW5pdEZvcm0odGhpcyk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC51cmwnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgaG9zdCwgcGF0aCwgcXVlcnksIHVybDtcblx0XHRpZiAocGF5bG9hZC5fZGF0YWdyaWRfdXJsKSB7XG5cdFx0XHRpZiAod2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG5cdFx0XHRcdGhvc3QgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdDtcblx0XHRcdFx0cGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblx0XHRcdFx0cXVlcnkgPSB3aW5kb3cuZGF0YWdyaWRTZXJpYWxpemVVcmwocGF5bG9hZC5zdGF0ZSkucmVwbGFjZSgvJiskL2dtLCAnJyk7XG5cdFx0XHRcdGlmIChxdWVyeSkge1xuXHRcdFx0XHRcdHVybCA9IGhvc3QgKyBwYXRoICsgXCI/XCIgKyBxdWVyeS5yZXBsYWNlKC9cXCYqJC8sICcnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR1cmwgPSBob3N0ICsgcGF0aDtcblx0XHRcdFx0fVxuXHRcdFx0XHR1cmwgKz0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRcdGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiAhPT0gdXJsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG5cdFx0XHRcdFx0XHRwYXRoOiB1cmxcblx0XHRcdFx0XHR9LCAnJywgdXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLnNvcnQnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgaHJlZiwga2V5LCByZWYsIHJlc3VsdHM7XG5cdFx0aWYgKHBheWxvYWQuX2RhdGFncmlkX3NvcnQpIHtcblx0XHRcdHJlZiA9IHBheWxvYWQuX2RhdGFncmlkX3NvcnQ7XG5cdFx0XHRyZXN1bHRzID0gW107XG5cdFx0XHRmb3IgKGtleSBpbiByZWYpIHtcblx0XHRcdFx0aHJlZiA9IHJlZltrZXldO1xuXHRcdFx0XHRyZXN1bHRzLnB1c2goJCgnI2RhdGFncmlkLXNvcnQtJyArIGtleSkuYXR0cignaHJlZicsIGhyZWYpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH1cblx0fVxufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFyZ2lkLml0ZW1fZGV0YWlsJywge1xuXHRiZWZvcmU6IGZ1bmN0aW9uKHhociwgc2V0dGluZ3MpIHtcblx0XHR2YXIgaWQsIHJvd19kZXRhaWwsIGdyaWRfZnVsbG5hbWU7XG5cdFx0aWYgKHNldHRpbmdzLm5ldHRlICYmIHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbCcpKSB7XG5cdFx0XHRpZCA9IHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbCcpO1xuXHRcdFx0Z3JpZF9mdWxsbmFtZSA9IHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbC1ncmlkLWZ1bGxuYW1lJyk7XG5cdFx0XHRyb3dfZGV0YWlsID0gJCgnLml0ZW0tZGV0YWlsLScgKyBncmlkX2Z1bGxuYW1lICsgJy1pZC0nICsgaWQpO1xuXHRcdFx0aWYgKHJvd19kZXRhaWwuaGFzQ2xhc3MoJ2xvYWRlZCcpKSB7XG5cdFx0XHRcdGlmICghcm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJvd19kZXRhaWwucmVtb3ZlQ2xhc3MoJ3RvZ2dsZWQnKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocm93X2RldGFpbC5oYXNDbGFzcygndG9nZ2xlZCcpKSB7XG5cdFx0XHRcdFx0cm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLnNsaWRlVG9nZ2xlKCdmYXN0JywgKGZ1bmN0aW9uKF90aGlzKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByb3dfZGV0YWlsLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0pKHRoaXMpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyb3dfZGV0YWlsLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG5cdFx0XHRcdFx0cm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLnNsaWRlVG9nZ2xlKCdmYXN0Jyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHJvd19kZXRhaWwuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBpZCwgcm93X2RldGFpbCwgZ3JpZF9mdWxsbmFtZTtcblx0XHRpZiAocGF5bG9hZC5fZGF0YWdyaWRfdG9nZ2xlX2RldGFpbCAmJiBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKSB7XG5cdFx0XHRpZCA9IHBheWxvYWQuX2RhdGFncmlkX3RvZ2dsZV9kZXRhaWw7XG5cdFx0XHRncmlkX2Z1bGxuYW1lID0gcGF5bG9hZC5fZGF0YWdyaWRfbmFtZTtcblx0XHRcdHJvd19kZXRhaWwgPSAkKCcuaXRlbS1kZXRhaWwtJyArIGdyaWRfZnVsbG5hbWUgKyAnLWlkLScgKyBpZCk7XG5cdFx0XHRyb3dfZGV0YWlsLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG5cdFx0XHRyZXR1cm4gcm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLnNsaWRlVG9nZ2xlKCdmYXN0Jyk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQudHJlZScsIHtcblx0YmVmb3JlOiBmdW5jdGlvbih4aHIsIHNldHRpbmdzKSB7XG5cdFx0dmFyIGNoaWxkcmVuX2Jsb2NrO1xuXHRcdGlmIChzZXR0aW5ncy5uZXR0ZSAmJiBzZXR0aW5ncy5uZXR0ZS5lbC5hdHRyKCdkYXRhLXRvZ2dsZS10cmVlJykpIHtcblx0XHRcdHNldHRpbmdzLm5ldHRlLmVsLnRvZ2dsZUNsYXNzKCd0b2dnbGUtcm90YXRlJyk7XG5cdFx0XHRjaGlsZHJlbl9ibG9jayA9IHNldHRpbmdzLm5ldHRlLmVsLmNsb3Nlc3QoJy5kYXRhZ3JpZC10cmVlLWl0ZW0nKS5maW5kKCcuZGF0YWdyaWQtdHJlZS1pdGVtLWNoaWxkcmVuJykuZmlyc3QoKTtcblx0XHRcdGlmIChjaGlsZHJlbl9ibG9jay5oYXNDbGFzcygnbG9hZGVkJykpIHtcblx0XHRcdFx0Y2hpbGRyZW5fYmxvY2suc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBjaGlsZHJlbl9ibG9jaywgY29udGVudCwgaWQsIG5hbWUsIHJlZiwgc25pcHBldCwgdGVtcGxhdGU7XG5cdFx0aWYgKHBheWxvYWQuX2RhdGFncmlkX3RyZWUpIHtcblx0XHRcdGlkID0gcGF5bG9hZC5fZGF0YWdyaWRfdHJlZTtcblx0XHRcdGNoaWxkcmVuX2Jsb2NrID0gJCgnLmRhdGFncmlkLXRyZWUtaXRlbVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpLmZpbmQoJy5kYXRhZ3JpZC10cmVlLWl0ZW0tY2hpbGRyZW4nKS5maXJzdCgpO1xuXHRcdFx0Y2hpbGRyZW5fYmxvY2suYWRkQ2xhc3MoJ2xvYWRlZCcpO1xuXHRcdFx0cmVmID0gcGF5bG9hZC5zbmlwcGV0cztcblx0XHRcdGZvciAobmFtZSBpbiByZWYpIHtcblx0XHRcdFx0c25pcHBldCA9IHJlZltuYW1lXTtcblx0XHRcdFx0Y29udGVudCA9ICQoc25pcHBldCk7XG5cdFx0XHRcdHRlbXBsYXRlID0gJCgnPGRpdiBjbGFzcz1cImRhdGFncmlkLXRyZWUtaXRlbVwiIGlkPVwiJyArIG5hbWUgKyAnXCI+Jyk7XG5cdFx0XHRcdHRlbXBsYXRlLmF0dHIoJ2RhdGEtaWQnLCBjb250ZW50LmF0dHIoJ2RhdGEtaWQnKSk7XG5cdFx0XHRcdHRlbXBsYXRlLmFwcGVuZChjb250ZW50KTtcblx0XHRcdFx0aWYgKGNvbnRlbnQuZGF0YSgnaGFzLWNoaWxkcmVuJykpIHtcblx0XHRcdFx0XHR0ZW1wbGF0ZS5hZGRDbGFzcygnaGFzLWNoaWxkcmVuJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2hpbGRyZW5fYmxvY2suYXBwZW5kKHRlbXBsYXRlKTtcblx0XHRcdH1cblx0XHRcdGNoaWxkcmVuX2Jsb2NrLmFkZENsYXNzKCdsb2FkZWQnKTtcblx0XHRcdGNoaWxkcmVuX2Jsb2NrLnNsaWRlVG9nZ2xlKCdmYXN0Jyk7XG5cdFx0XHRkYXRhR3JpZExvYWQoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGRhdGFncmlkU29ydGFibGVUcmVlKCk7XG5cdH1cbn0pO1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZGF0YWdyaWQtZWRpdGFibGUtdXJsXScsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdHZhciBhdHRyX25hbWUsIGF0dHJfdmFsdWUsIGF0dHJzLCBjZWxsLCBjZWxsVmFsdWUsIGNlbGxfaGVpZ2h0LCBjZWxsX2xpbmVzLCBjZWxsX3BhZGRpbmcsIGlucHV0LCBsaW5lX2hlaWdodCwgc3VibWl0LCB2YWx1ZVRvRWRpdDtcblx0Y2VsbCA9ICQodGhpcyk7XG5cdGlmIChldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKGNlbGwuaGFzQ2xhc3MoJ2RhdGFncmlkLWlubGluZS1lZGl0JykpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKCFjZWxsLmhhc0NsYXNzKCdlZGl0aW5nJykpIHtcblx0XHRjZWxsLmFkZENsYXNzKCdlZGl0aW5nJyk7XG5cdFx0Y2VsbFZhbHVlID0gY2VsbC5odG1sKCkudHJpbSgpLnJlcGxhY2UoJzxicj4nLCAnXFxuJyk7XG5cdFx0aWYgKGNlbGwuYXR0cignZGF0YS1kYXRhZ3JpZC1lZGl0YWJsZS12YWx1ZScpKSB7XG5cdFx0XHR2YWx1ZVRvRWRpdCA9IGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtdmFsdWUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFsdWVUb0VkaXQgPSBjZWxsVmFsdWU7XG5cdFx0fVxuXHRcdGNlbGwuZGF0YSgnb3JpZ2luYWxWYWx1ZScsIGNlbGxWYWx1ZSk7XG5cdFx0Y2VsbC5kYXRhKCd2YWx1ZVRvRWRpdCcsIHZhbHVlVG9FZGl0KTtcblx0XHRpZiAoY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS10eXBlJykgPT09ICd0ZXh0YXJlYScpIHtcblx0XHRcdGlucHV0ID0gJCgnPHRleHRhcmVhPicgKyB2YWx1ZVRvRWRpdCArICc8L3RleHRhcmVhPicpO1xuXHRcdFx0Y2VsbF9wYWRkaW5nID0gcGFyc2VJbnQoY2VsbC5jc3MoJ3BhZGRpbmcnKS5yZXBsYWNlKC9bXi1cXGRcXC5dL2csICcnKSwgMTApO1xuXHRcdFx0Y2VsbF9oZWlnaHQgPSBjZWxsLm91dGVySGVpZ2h0KCk7XG5cdFx0XHRsaW5lX2hlaWdodCA9IE1hdGgucm91bmQocGFyc2VGbG9hdChjZWxsLmNzcygnbGluZS1oZWlnaHQnKSkpO1xuXHRcdFx0Y2VsbF9saW5lcyA9IChjZWxsX2hlaWdodCAtICgyICogY2VsbF9wYWRkaW5nKSkgLyBsaW5lX2hlaWdodDtcblx0XHRcdGlucHV0LmF0dHIoJ3Jvd3MnLCBNYXRoLnJvdW5kKGNlbGxfbGluZXMpKTtcblx0XHR9IGVsc2UgaWYgKGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtdHlwZScpID09PSAnc2VsZWN0Jykge1xuXHRcdFx0aW5wdXQgPSAkKGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtZWxlbWVudCcpKTtcblx0XHRcdGlucHV0LmZpbmQoXCJvcHRpb25bdmFsdWU9J1wiICsgdmFsdWVUb0VkaXQgKyBcIiddXCIpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0ID0gJCgnPGlucHV0IHR5cGU9XCInICsgY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS10eXBlJykgKyAnXCI+Jyk7XG5cdFx0XHRpbnB1dC52YWwodmFsdWVUb0VkaXQpO1xuXHRcdH1cblx0XHRhdHRycyA9IGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtYXR0cnMnKTtcblx0XHRmb3IgKGF0dHJfbmFtZSBpbiBhdHRycykge1xuXHRcdFx0YXR0cl92YWx1ZSA9IGF0dHJzW2F0dHJfbmFtZV07XG5cdFx0XHRpbnB1dC5hdHRyKGF0dHJfbmFtZSwgYXR0cl92YWx1ZSk7XG5cdFx0fVxuXHRcdGNlbGwucmVtb3ZlQ2xhc3MoJ2VkaXRlZCcpO1xuXHRcdGNlbGwuaHRtbChpbnB1dCk7XG5cdFx0c3VibWl0ID0gZnVuY3Rpb24oY2VsbCwgZWwpIHtcblx0XHRcdHZhciB2YWx1ZTtcblx0XHRcdHZhbHVlID0gZWwudmFsKCk7XG5cdFx0XHRpZiAodmFsdWUgIT09IGNlbGwuZGF0YSgndmFsdWVUb0VkaXQnKSkge1xuXHRcdFx0XHRkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwoe1xuXHRcdFx0XHRcdHVybDogY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS11cmwnKSxcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWVcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHRpZiAoY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS10eXBlJykgPT09ICdzZWxlY3QnKSB7XG5cdFx0XHRcdFx0XHRcdGNlbGwuaHRtbChpbnB1dC5maW5kKFwib3B0aW9uW3ZhbHVlPSdcIiArIHZhbHVlICsgXCInXVwiKS5odG1sKCkpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBheWxvYWQuX2RhdGFncmlkX2VkaXRhYmxlX25ld192YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gcGF5bG9hZC5fZGF0YWdyaWRfZWRpdGFibGVfbmV3X3ZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGNlbGwuaHRtbCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2VsbC5hZGRDbGFzcygnZWRpdGVkJyk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRjZWxsLmh0bWwoY2VsbC5kYXRhKCdvcmlnaW5hbFZhbHVlJykpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNlbGwuYWRkQ2xhc3MoJ2VkaXRlZC1lcnJvcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjZWxsLmh0bWwoY2VsbC5kYXRhKCdvcmlnaW5hbFZhbHVlJykpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBjZWxsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XG5cdFx0XHR9LCAxMjAwKTtcblx0XHR9O1xuXHRcdGNlbGwuZmluZCgnaW5wdXQsdGV4dGFyZWEsc2VsZWN0JykuZm9jdXMoKS5vbignYmx1cicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHN1Ym1pdChjZWxsLCAkKHRoaXMpKTtcblx0XHR9KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdGlmIChjZWxsLmRhdGEoJ2RhdGFncmlkLWVkaXRhYmxlLXR5cGUnKSAhPT0gJ3RleHRhcmVhJykge1xuXHRcdFx0XHRpZiAoZS53aGljaCA9PT0gMTMpIHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyZXR1cm4gc3VibWl0KGNlbGwsICQodGhpcykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoZS53aGljaCA9PT0gMjcpIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRjZWxsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XG5cdFx0XHRcdHJldHVybiBjZWxsLmh0bWwoY2VsbC5kYXRhKCdvcmlnaW5hbFZhbHVlJykpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBjZWxsLmZpbmQoJ3NlbGVjdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBzdWJtaXQoY2VsbCwgJCh0aGlzKSk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5hZnRlcl9pbmxpbmVfZWRpdCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBncmlkID0gJCgnLmRhdGFncmlkLScgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKTtcblxuXHRcdGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9pbmxpbmVfZWRpdGVkKSB7XG5cdFx0XHRncmlkLmZpbmQoJ3RyW2RhdGEtaWQ9JyArIHBheWxvYWQuX2RhdGFncmlkX2lubGluZV9lZGl0ZWQgKyAnXSA+IHRkJykuYWRkQ2xhc3MoJ2VkaXRlZCcpO1xuXHRcdFx0cmV0dXJuIGdyaWQuZmluZCgnLmRhdGFncmlkLWlubGluZS1lZGl0LXRyaWdnZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0fSBlbHNlIGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9pbmxpbmVfZWRpdF9jYW5jZWwpIHtcblx0XHRcdHJldHVybiBncmlkLmZpbmQoJy5kYXRhZ3JpZC1pbmxpbmUtZWRpdC10cmlnZ2VyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdH1cblx0fVxufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwJywgJ1tkYXRhLWRhdGFncmlkLWNhbmNlbC1pbmxpbmUtYWRkXScsIGZ1bmN0aW9uKGUpIHtcblx0dmFyIGNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZSB8fCAwO1xuXHRpZiAoY29kZSA9PT0gMSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHJldHVybiAkKCcuZGF0YWdyaWQtcm93LWlubGluZS1hZGQnKS5hZGRDbGFzcygnZGF0YWdyaWQtcm93LWlubGluZS1hZGQtaGlkZGVuJyk7XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC10b2dnbGUtaW5saW5lLWFkZCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBncmlkID0gJCgnLmRhdGFncmlkLScgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKTtcblxuXHRcdGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9pbmxpbmVfYWRkaW5nKSB7XG5cdFx0XHR2YXIgcm93ID0gZ3JpZC5maW5kKCcuZGF0YWdyaWQtcm93LWlubGluZS1hZGQnKTtcblxuXHRcdFx0aWYgKHJvdy5oYXNDbGFzcygnZGF0YWdyaWQtcm93LWlubGluZS1hZGQtaGlkZGVuJykpIHtcblx0XHRcdFx0cm93LnJlbW92ZUNsYXNzKCdkYXRhZ3JpZC1yb3ctaW5saW5lLWFkZC1oaWRkZW4nKTtcblx0XHRcdH1cblxuXHRcdFx0cm93LmZpbmQoJ2lucHV0Om5vdChbcmVhZG9ubHldKSx0ZXh0YXJlYTpub3QoW3JlYWRvbmx5XSknKS5maXJzdCgpLmZvY3VzKCk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YWdyaWRGaXRsZXJNdWx0aVNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgc2VsZWN0ID0gJCgnLnNlbGVjdHBpY2tlcicpLmZpcnN0KCk7XG5cblx0aWYgKCQuZm4uc2VsZWN0cGlja2VyKSB7XG5cdFx0cmV0dXJuICQuZm4uc2VsZWN0cGlja2VyLmRlZmF1bHRzID0ge1xuXHRcdFx0Y291bnRTZWxlY3RlZFRleHQ6IHNlbGVjdC5kYXRhKCdpMThuLXNlbGVjdGVkJyksXG5cdFx0XHRpY29uQmFzZTogJycsXG5cdFx0XHR0aWNrSWNvbjogc2VsZWN0LmRhdGEoJ3NlbGVjdGVkLWljb24tY2hlY2snKVxuXHRcdH07XG5cdH1cbn07XG5cbiQoZnVuY3Rpb24oKSB7XG5cdHJldHVybiBkYXRhZ3JpZEZpdGxlck11bHRpU2VsZWN0KCk7XG59KTtcblxuZGF0YWdyaWRHcm91cEFjdGlvbk11bHRpU2VsZWN0ID0gZnVuY3Rpb24oKSB7XG5cdHZhciBzZWxlY3RzO1xuXG5cdGlmICghJC5mbi5zZWxlY3RwaWNrZXIpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRzZWxlY3RzID0gJCgnW2RhdGEtZGF0YWdyaWQtbXVsdGlzZWxlY3QtaWRdJyk7XG5cblx0cmV0dXJuIHNlbGVjdHMuZWFjaChmdW5jdGlvbigpIHtcblx0XHR2YXIgaWQ7XG5cdFx0aWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NlbGVjdHBpY2tlcicpKSB7XG5cdFx0XHQkKHRoaXMpLnJlbW92ZUF0dHIoJ2lkJyk7XG5cdFx0XHRpZCA9ICQodGhpcykuZGF0YSgnZGF0YWdyaWQtbXVsdGlzZWxlY3QtaWQnKTtcblx0XHRcdCQodGhpcykub24oJ2xvYWRlZC5icy5zZWxlY3QnLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuYXR0cignc3R5bGUnLCAnZGlzcGxheTpub25lOycpO1xuXHRcdFx0XHRyZXR1cm4gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdidG4tZGVmYXVsdCBidG4tc2Vjb25kYXJ5Jyk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiAkKHRoaXMpLm9uKCdyZW5kZXJlZC5icy5zZWxlY3QnLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdHJldHVybiAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2lkJywgaWQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn07XG5cbiQoZnVuY3Rpb24oKSB7XG5cdHJldHVybiBkYXRhZ3JpZEdyb3VwQWN0aW9uTXVsdGlTZWxlY3QoKTtcbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5maXRsZXJNdWx0aVNlbGVjdCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0ZGF0YWdyaWRGaXRsZXJNdWx0aVNlbGVjdCgpO1xuXHRcdGlmICgkLmZuLnNlbGVjdHBpY2tlcikge1xuXHRcdFx0cmV0dXJuICQoJy5zZWxlY3RwaWNrZXInKS5zZWxlY3RwaWNrZXIoe1xuXHRcdFx0XHRpY29uQmFzZTogJ2ZhJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuZ3JvdXBBY3Rpb25NdWx0aVNlbGVjdCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRhdGFncmlkR3JvdXBBY3Rpb25NdWx0aVNlbGVjdCgpO1xuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuaW5saW5lLWVkaXRpbmcnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgZ3JpZDtcblx0XHRpZiAocGF5bG9hZC5fZGF0YWdyaWRfaW5saW5lX2VkaXRpbmcpIHtcblx0XHRcdGdyaWQgPSAkKCcuZGF0YWdyaWQtJyArIHBheWxvYWQuX2RhdGFncmlkX25hbWUpO1xuXHRcdFx0cmV0dXJuIGdyaWQuZmluZCgnLmRhdGFncmlkLWlubGluZS1lZGl0LXRyaWdnZXInKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQucmVkcmF3LWl0ZW0nLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgcm93O1xuXHRcdGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9yZWRyYXdfaXRlbV9jbGFzcykge1xuXHRcdFx0cm93ID0gJCgndHJbZGF0YS1pZD0nICsgcGF5bG9hZC5fZGF0YWdyaWRfcmVkcmF3X2l0ZW1faWQgKyAnXScpO1xuXHRcdFx0cmV0dXJuIHJvdy5hdHRyKCdjbGFzcycsIHBheWxvYWQuX2RhdGFncmlkX3JlZHJhd19pdGVtX2NsYXNzKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5yZXNldC1maWx0ZXItYnktY29sdW1uJywge1xuXHRzdWNjZXNzOiBmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0dmFyIGdyaWQsIGhyZWYsIGksIGtleSwgbGVuLCByZWY7XG5cdFx0aWYgKCFwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGdyaWQgPSAkKCcuZGF0YWdyaWQtJyArIHBheWxvYWQuX2RhdGFncmlkX25hbWUpO1xuXHRcdGdyaWQuZmluZCgnW2RhdGEtZGF0YWdyaWQtcmVzZXQtZmlsdGVyLWJ5LWNvbHVtbl0nKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0aWYgKHBheWxvYWQubm9uX2VtcHR5X2ZpbHRlcnMgJiYgcGF5bG9hZC5ub25fZW1wdHlfZmlsdGVycy5sZW5ndGgpIHtcblx0XHRcdHJlZiA9IHBheWxvYWQubm9uX2VtcHR5X2ZpbHRlcnM7XG5cdFx0XHRmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0a2V5ID0gcmVmW2ldO1xuXHRcdFx0XHRncmlkLmZpbmQoJ1tkYXRhLWRhdGFncmlkLXJlc2V0LWZpbHRlci1ieS1jb2x1bW49JyArIGtleSArICddJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0fVxuXHRcdFx0aHJlZiA9IGdyaWQuZmluZCgnLnJlc2V0LWZpbHRlcicpLmF0dHIoJ2hyZWYnKTtcblx0XHRcdHJldHVybiBncmlkLmZpbmQoJ1tkYXRhLWRhdGFncmlkLXJlc2V0LWZpbHRlci1ieS1jb2x1bW5dJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld19ocmVmO1xuXHRcdFx0XHRrZXkgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZGF0YWdyaWQtcmVzZXQtZmlsdGVyLWJ5LWNvbHVtbicpO1xuXHRcdFx0XHRuZXdfaHJlZiA9IGhyZWYucmVwbGFjZSgnZG89JyArIHBheWxvYWQuX2RhdGFncmlkX25hbWUgKyAnLXJlc2V0RmlsdGVyJywgJ2RvPScgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lICsgJy1yZXNldENvbHVtbkZpbHRlcicpO1xuXHRcdFx0XHRuZXdfaHJlZiArPSAnJicgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lICsgJy1rZXk9JyArIGtleTtcblx0XHRcdFx0cmV0dXJuICQodGhpcykuYXR0cignaHJlZicsIG5ld19ocmVmKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=
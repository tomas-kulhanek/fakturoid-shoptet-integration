(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_core-js_modules_es_array_find_js-node_modules_core-js_modules_es_string_-448237"],{

/***/ "./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] == undefined) {
  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/array-iteration.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var arraySpeciesCreate = __webpack_require__(/*! ../internals/array-species-create */ "./node_modules/core-js/internals/array-species-create.js");

var push = [].push;

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var IS_FILTER_REJECT = TYPE == 7;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var boundFunction = bind(callbackfn, that, 3);
    var length = toLength(self.length);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push.call(target, value); // filter
        } else switch (TYPE) {
          case 4: return false;             // every
          case 7: push.call(target, value); // filterReject
        }
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6),
  // `Array.prototype.filterReject` method
  // https://github.com/tc39/proposal-array-filtering
  filterReject: createMethod(7)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var SPECIES = wellKnownSymbol('species');

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? Array : C;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-create.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arraySpeciesConstructor = __webpack_require__(/*! ../internals/array-species-constructor */ "./node_modules/core-js/internals/array-species-constructor.js");

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/classof.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classofRaw = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-bind-context.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");

// optional / simple context binding
module.exports = function (fn, that, length) {
  aCallable(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 0: return function () {
      return fn.call(that);
    };
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/html.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/html.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),

/***/ "./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/is-array.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) == 'Array';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-constructor.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/is-constructor.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");

var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = constructorRegExp.exec;
var INCORRECT_TO_STRING = !constructorRegExp.exec(function () { /* empty */ });

var isConstructorModern = function (argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(Object, empty, argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function (argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
    // we can't check .prototype since constructors produced by .bind haven't it
  } return INCORRECT_TO_STRING || !!exec.call(constructorRegExp, inspectSource(argument));
};

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;


/***/ }),

/***/ "./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-create.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* global ActiveXObject -- old IE, WSH */
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var defineProperties = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var html = __webpack_require__(/*! ../internals/html */ "./node_modules/core-js/internals/html.js");
var documentCreateElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : defineProperties(result, Properties);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
module.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim-forced.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim-forced.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var PROPER_FUNCTION_NAME = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").PROPER;
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var non = '\u200B\u0085\u180E';

// check that a method works with the correct list
// of whitespaces and has a correct name
module.exports = function (METHOD_NAME) {
  return fails(function () {
    return !!whitespaces[METHOD_NAME]()
      || non[METHOD_NAME]() !== non
      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var whitespace = '[' + whitespaces + ']';
var ltrim = RegExp('^' + whitespace + whitespace + '*');
var rtrim = RegExp(whitespace + whitespace + '*$');

// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation
var createMethod = function (TYPE) {
  return function ($this) {
    var string = toString(requireObjectCoercible($this));
    if (TYPE & 1) string = string.replace(ltrim, '');
    if (TYPE & 2) string = string.replace(rtrim, '');
    return string;
  };
};

module.exports = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod(3)
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),

/***/ "./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-string.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');
  return String(argument);
};


/***/ }),

/***/ "./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/whitespaces.js ***!
  \*******************************************************/
/***/ ((module) => {

// a string of all valid unicode whitespaces
module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' +
  '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.find.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.find.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $find = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").find;
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

var FIND = 'find';
var SKIPS_HOLES = true;

// Shouldn't skip holes
if (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });

// `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find
$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables(FIND);


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.trim.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.trim.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $trim = __webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim;
var forcedStringTrimMethod = __webpack_require__(/*! ../internals/string-trim-forced */ "./node_modules/core-js/internals/string-trim-forced.js");

// `String.prototype.trim` method
// https://tc39.es/ecma262/#sec-string.prototype.trim
$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {
  trim: function trim() {
    return $trim(this);
  }
});


/***/ }),

/***/ "./node_modules/ublaboo-datagrid/assets/datagrid-instant-url-refresh.js":
/*!******************************************************************************!*\
  !*** ./node_modules/ublaboo-datagrid/assets/datagrid-instant-url-refresh.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var naja = __webpack_require__(/*! naja */ "./node_modules/naja/dist/Naja.esm.js")["default"];
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var dataGridRegisterAjaxCall;

if (typeof naja !== "undefined") {
	dataGridRegisterAjaxCall = function (params) {
		var method = params.type || 'GET';
		var data = params.data || null;

		naja.makeRequest(method, params.url, data, {
			history: 'replace'
		})
			.then(params.success)
			.catch(params.error);
	};

} else {
		dataGridRegisterAjaxCall = function (params) {
			$.nette.ajax(params);
		};
}

document.addEventListener('DOMContentLoaded', function () {
	var element = document.querySelector('.datagrid');

	if (element !== null) {
		return dataGridRegisterAjaxCall({
			type: 'GET',
			url: element.getAttribute('data-refresh-state')
		});
	}
});


/***/ }),

/***/ "./node_modules/ublaboo-datagrid/assets/datagrid-spinners.js":
/*!*******************************************************************!*\
  !*** ./node_modules/ublaboo-datagrid/assets/datagrid-spinners.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var naja = __webpack_require__(/*! naja */ "./node_modules/naja/dist/Naja.esm.js")["default"];
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var dataGridRegisterExtension;

if (typeof naja !== "undefined") {
	var isNaja2 = function () { return naja && naja.VERSION && naja.VERSION >= 2 };
	var najaEventParams = function (params) { return isNaja2() ? params.detail : params };
	var najaRequest = function (params) { return isNaja2() ? params.detail.request : params.xhr };
	dataGridRegisterExtension = function (name, extension) {
		var init = extension.init;
		var success = extension.success;
		var before = extension.before;
		var complete = extension.complete;


		var NewExtension = function NewExtension(naja, name) {
			this.name = name;

			this.initialize = function (naja) {
				if(init) {
					naja.addEventListener('init', function (params)  {
						init(najaEventParams(params).defaultOptions);
					});
				}

				if(success) {
					naja.addEventListener('success', function (params)  {
						var payload = isNaja2() ? params.detail.payload : params.response;
						success(payload, najaEventParams(params).options);
					});
				}

				if(before) {
					naja.addEventListener('before', function (params) {
						before(najaRequest(params), najaEventParams(params).options);
					});
				}

				if(complete) {
					naja.addEventListener('complete', function (params) {
						complete(najaRequest(params), najaEventParams(params).options);
					});
				}
			}
			if (!isNaja2()) {
				this.initialize(naja);
			}
			return this;
		}

		if (isNaja2()) {
			naja.registerExtension(new NewExtension(null, name));
		} else {
			naja.registerExtension(NewExtension, name);
		}
	};
} else if ($.nette) {
		dataGridRegisterExtension = function (name, extension) {
			$.nette.ext(name, extension);
		};
}

dataGridRegisterExtension('ublaboo-spinners', {
	before: function(xhr, settings) {
		var el, id, row_detail, spinner_template, grid_fullname;
		if (settings.nette) {
			el = settings.nette.el;
			spinner_template = $('<div class="ublaboo-spinner ublaboo-spinner-small"><i></i><i></i><i></i><i></i></div>');
			if (el.is('.datagrid [name="group_action[submit]"]')) {
				return el.after(spinner_template);
			} else if (el.is('.datagrid a') && el.data('toggle-detail')) {
				id = settings.nette.el.attr('data-toggle-detail');
				grid_fullname = settings.nette.el.attr('data-toggle-detail-grid-fullname');
				row_detail = $('.item-detail-' + grid_fullname + '-id-' + id);
				if (!row_detail.hasClass('loaded')) {
					return el.addClass('ublaboo-spinner-icon');
				}
			} else if (el.is('.datagrid .col-pagination a')) {
				return el.closest('.row-grid-bottom').find('.col-per-page').prepend(spinner_template);
			} else if (el.is('.datagrid .datagrid-per-page-submit')) {
				return el.closest('.row-grid-bottom').find('.col-per-page').prepend(spinner_template);
			} else if (el.is('.datagrid .reset-filter')) {
				return el.closest('.row-grid-bottom').find('.col-per-page').prepend(spinner_template);
			}
		}
	},
	complete: function() {
		$('.ublaboo-spinner').remove();
		return $('.ublaboo-spinner-icon').removeClass('ublaboo-spinner-icon');
	}
});


/***/ }),

/***/ "./node_modules/ublaboo-datagrid/assets/datagrid.js":
/*!**********************************************************!*\
  !*** ./node_modules/ublaboo-datagrid/assets/datagrid.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var naja = __webpack_require__(/*! naja */ "./node_modules/naja/dist/Naja.esm.js")["default"];
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var dataGridRegisterExtension, dataGridRegisterAjaxCall, dataGridLoad, dataGridSubmitForm;

if (typeof naja !== "undefined") {
	var isNaja2 = function () { return naja && naja.VERSION && naja.VERSION >= 2 };
	var najaEventParams = function (params) { return isNaja2() ? params.detail : params };
	var najaRequest = function (params) { return isNaja2() ? params.detail.request : params.xhr };
	dataGridRegisterExtension = function (name, extension) {
		var init = extension.init;
		var success = extension.success;
		var before = extension.before;
		var complete = extension.complete;
		var interaction = extension.interaction;


		var NewExtension = function NewExtension(naja, name) {
			this.name = name;

			this.initialize = function (naja) {
				if(init) {
					naja.addEventListener('init', function (params)  {
						init(najaEventParams(params).defaultOptions);
					});
				}

				if(success) {
					naja.addEventListener('success', function (params)  {
						var payload = isNaja2() ? params.detail.payload : params.response;
						success(payload, najaEventParams(params).options);
					});
				}

				var interactionTarget = naja;
				if (isNaja2()) {
					interactionTarget = interactionTarget.uiHandler;
				}

				interactionTarget.addEventListener('interaction', function (params) {
					if (isNaja2()) {
						params.detail.options.nette = {
							el: $(params.detail.element)
						}
					} else {
						params.options.nette = {
							el: $(params.element)
						}
					}
					if (interaction) {
						if (!interaction(najaEventParams(params).options)){
							params.preventDefault();
						}
					}
				});

				if(before) {
					naja.addEventListener('before', function (params) {
						if (!before(najaRequest(params), najaEventParams(params).options))
							params.preventDefault();
					});
				}

				if(complete) {
					naja.addEventListener('complete', function (params) {
						complete(najaRequest(params), najaEventParams(params).options);
					});
				}
			}
			if (!isNaja2()) {
				this.initialize(naja);
			}
			return this;
		}

		if (isNaja2()) {
			naja.registerExtension(new NewExtension(null, name));
		} else {
			naja.registerExtension(NewExtension, name);
		}
	};


	dataGridRegisterAjaxCall = function (params) {
        var method = params.type || 'GET';
        var data = params.data || null;

		naja.makeRequest(method, params.url, data, {})
			.then(params.success)
			.catch(params.error);
	};

	dataGridLoad = function () {
		naja.load();
	};

	dataGridSubmitForm = function (form) {
		return naja.uiHandler.submitForm(form.get(0));
	};
} else if ($.nette) {
	dataGridRegisterExtension = function (name, extension) {
		$.nette.ext(name, extension);
	};
	dataGridRegisterAjaxCall = function (params) {
		$.nette.ajax(params);
	};
	dataGridLoad = function () {
		$.nette.load();
	};
	dataGridSubmitForm = function (form) {
		return form.submit();
	};
} else {
	throw new Error("Include Naja.js or nette.ajax for datagrids to work!")
}


var datagridFitlerMultiSelect, datagridGroupActionMultiSelect, datagridShiftGroupSelection, datagridSortable, datagridSortableTree, getEventDomPath,
	indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

$(document).on('click', '[data-datagrid-confirm]:not(.ajax)', function(e) {
	if (!confirm($(e.target).closest('a').attr('data-datagrid-confirm'))) {
		e.stopPropagation();
		return e.preventDefault();
	}
});

if (typeof naja !== "undefined") {
	dataGridRegisterExtension('datagrid.confirm', {
		interaction: function(settings) {
			var confirm_message;
			if (settings.nette) {
				confirm_message = settings.nette.el.data('datagrid-confirm');
				if (confirm_message) {
					return confirm(confirm_message);
				}
			}
			return true;
		}
	});
} else {
	dataGridRegisterExtension('datagrid.confirm', {
		before: function(xhr, settings) {
			var confirm_message;
			if (settings.nette) {
				confirm_message = settings.nette.el.data('datagrid-confirm');
				if (confirm_message) {
					return confirm(confirm_message);
				}
			}
			return true;
		}
	});
}


$(document).on('change', 'select[data-autosubmit-per-page]', function() {
	var button;
	button = $(this).parent().find('input[type=submit]');
	if (button.length === 0) {
		button = $(this).parent().find('button[type=submit]');
	}
	return button.click();
}).on('change', 'select[data-autosubmit]', function() {
	return dataGridSubmitForm($(this).closest('form').first());
}).on('change', 'input[data-autosubmit][data-autosubmit-change]', function(e) {
	var $this, code;
	code = e.which || e.keyCode || 0;
	clearTimeout(window.datagrid_autosubmit_timer);
	$this = $(this);
	return window.datagrid_autosubmit_timer = setTimeout((function(_this) {
		return function() {
			return dataGridSubmitForm($this.closest('form').first());
		};
	})(this), 200);
}).on('keyup', 'input[data-autosubmit]', function(e) {
	var $this, code;
	code = e.which || e.keyCode || 0;
	if ((code !== 13) && ((code >= 9 && code <= 40) || (code >= 112 && code <= 123))) {
		return;
	}
	clearTimeout(window.datagrid_autosubmit_timer);
	$this = $(this);
	return window.datagrid_autosubmit_timer = setTimeout((function(_this) {
		return function() {
			return dataGridSubmitForm($this.closest('form').first());
		};
	})(this), 200);
}).on('keydown', '.datagrid-inline-edit input', function(e) {
	var code;
	code = e.which || e.keyCode || 0;
	if (code === 13) {
		e.stopPropagation();
		e.preventDefault();
		return $(this).closest('tr').find('.col-action-inline-edit [name="inline_edit[submit]"]').click();
	}
});

$(document).on('keydown', 'input[data-datagrid-manualsubmit]', function(e) {
	var code;
	code = e.which || e.keyCode || 0;
	if (code === 13) {
		e.stopPropagation();
		e.preventDefault();
		return dataGridSubmitForm($(this).closest('form').first());
	}
});

getEventDomPath = function(e) {
	var node, path;
	if (indexOf.call(e, path) >= 0) {
		return e.path;
	}
	path = [];
	node = e.target;
	while (node !== document.body) {
		if (node === null) {
			break;
		}
		path.push(node);
		node = node.parentNode;
	}
	return path;
};

datagridShiftGroupSelection = function() {
	var last_checkbox;
	last_checkbox = null;
	return document.addEventListener('click', function(e) {
		var checkboxes_rows, current_checkbox_row, el, event, i, ie, input, j, k, last_checkbox_row, last_checkbox_tbody, len, len1, len2, ref, ref1, results, row, rows;
		ref = getEventDomPath(e);
		for (i = 0, len = ref.length; i < len; i++) {
			el = ref[i];
			if ($(el).is('.col-checkbox') && last_checkbox && e.shiftKey) {
				current_checkbox_row = $(el).closest('tr');
				last_checkbox_row = last_checkbox.closest('tr');
				last_checkbox_tbody = last_checkbox_row.closest('tbody');
				checkboxes_rows = last_checkbox_tbody.find('tr').toArray();
				if (current_checkbox_row.index() > last_checkbox_row.index()) {
					rows = checkboxes_rows.slice(last_checkbox_row.index(), current_checkbox_row.index());
				} else if (current_checkbox_row.index() < last_checkbox_row.index()) {
					rows = checkboxes_rows.slice(current_checkbox_row.index() + 1, last_checkbox_row.index());
				}
				if (!rows) {
					return;
				}
				for (j = 0, len1 = rows.length; j < len1; j++) {
					row = rows[j];
					input = $(row).find('.col-checkbox input[type=checkbox]')[0];
					if (input) {
						input.checked = true;
						ie = window.navigator.userAgent.indexOf("MSIE ");
						if (ie) {
							event = document.createEvent('Event');
							event.initEvent('change', true, true);
						} else {
							event = new Event('change', {
								'bubbles': true
							});
						}
						input.dispatchEvent(event);
					}
				}
			}
		}
		ref1 = getEventDomPath(e);
		results = [];
		for (k = 0, len2 = ref1.length; k < len2; k++) {
			el = ref1[k];
			if ($(el).is('.col-checkbox')) {
				results.push(last_checkbox = $(el));
			} else {
				results.push(void 0);
			}
		}
		return results;
	});
};

datagridShiftGroupSelection();

document.addEventListener('change', function(e) {
	var buttons, checked_inputs, counter, event, grid, i, ie, input, inputs, len, results, select, total;
	grid = e.target.getAttribute('data-check');
	if (grid) {
		checked_inputs = document.querySelectorAll('input[data-check-all-' + grid + ']:checked');
		select = document.querySelector('.datagrid-' + grid + ' select[name="group_action[group_action]"]');
		buttons = document.querySelectorAll('.datagrid-' + grid + ' input[type="submit"]');
		if (buttons.length === 0) {
			buttons = document.querySelectorAll('.datagrid-' + grid + ' button[type="submit"]');
		}
		counter = document.querySelector('.datagrid-' + grid + ' .datagrid-selected-rows-count');

		if (checked_inputs.length) {
			if (buttons) {
				buttons.forEach(function (button) {
					button.disabled = false;
				});
			}
			if (select) {
				select.disabled = false;
			}
			total = document.querySelectorAll('input[data-check-all-' + grid + ']').length;
			if (counter) {
				counter.innerHTML = checked_inputs.length + '/' + total;
			}
		} else {
			if (buttons) {
				buttons.forEach(function (button) {
					button.disabled = true;
				});
			}
			if (select) {
				select.disabled = true;
				select.value = "";
			}
			if (counter) {
				counter.innerHTML = "";
			}
		}
		ie = window.navigator.userAgent.indexOf("MSIE ");
		if (ie) {
			event = document.createEvent('Event');
			event.initEvent('change', true, true);
		} else {
			event = new Event('change', {
				'bubbles': true
			});
		}
		if (select) {
			select.dispatchEvent(event);
		}
	}
	grid = e.target.getAttribute('data-check-all');
	if (grid) {
		inputs = document.querySelectorAll('input[type=checkbox][data-check-all-' + grid + ']');
		results = [];
		for (i = 0, len = inputs.length; i < len; i++) {
			input = inputs[i];
			input.checked = e.target.checked;
			ie = window.navigator.userAgent.indexOf("MSIE ");
			if (ie) {
				event = document.createEvent('Event');
				event.initEvent('change', true, true);
			} else {
				event = new Event('change', {
					'bubbles': true
				});
			}
			results.push(input.dispatchEvent(event));
		}
		return results;
	}
});


window.datagridSerializeUrl = function(obj, prefix) {
var str = [];
for(var p in obj) {
	if (obj.hasOwnProperty(p)) {
		var k = prefix ? prefix + "[" + p + "]" : p, v = obj[p];
		if (v !== null && v !== "") {
			if (typeof v == "object") {
				var r = window.datagridSerializeUrl(v, k);
					if (r) {
						str.push(r);
					}
			} else {
				str.push(encodeURIComponent(k) + "=" + encodeURIComponent(v));
			}
		}
	}
}
return str.join("&");
}
;

datagridSortable = function() {
	if (typeof $.fn.sortable === 'undefined') {
		return;
	}
	return $('.datagrid [data-sortable]').sortable({
		handle: '.handle-sort',
		items: 'tr',
		axis: 'y',
		update: function(event, ui) {
			var component_prefix, data, item_id, next_id, prev_id, row, url;
			row = ui.item.closest('tr[data-id]');
			item_id = row.data('id');
			prev_id = null;
			next_id = null;
			if (row.prev().length) {
				prev_id = row.prev().data('id');
			}
			if (row.next().length) {
				next_id = row.next().data('id');
			}
			url = $(this).data('sortable-url');
			data = {};
			component_prefix = row.closest('.datagrid').find('tbody').attr('data-sortable-parent-path');
			data[(component_prefix + '-item_id').replace(/^-/, '')] = item_id;
			if (prev_id !== null) {
				data[(component_prefix + '-prev_id').replace(/^-/, '')] = prev_id;
			}
			if (next_id !== null) {
				data[(component_prefix + '-next_id').replace(/^-/, '')] = next_id;
			}
			return dataGridRegisterAjaxCall({
				type: 'GET',
				url: url,
				data: data,
				error: function(jqXHR, textStatus, errorThrown) {
					return alert(jqXHR.statusText);
				}
			});
		},
		helper: function(e, ui) {
			ui.children().each(function() {
				return $(this).width($(this).width());
			});
			return ui;
		}
	});
};

$(function() {
	return datagridSortable();
});

if (typeof datagridSortableTree === 'undefined') {
	datagridSortableTree = function() {
		if (typeof $('.datagrid-tree-item-children').sortable === 'undefined') {
			return;
		}
		return $('.datagrid-tree-item-children').sortable({
			handle: '.handle-sort',
			items: '.datagrid-tree-item:not(.datagrid-tree-header)',
			toleranceElement: '> .datagrid-tree-item-content',
			connectWith: '.datagrid-tree-item-children',
			update: function(event, ui) {
				var component_prefix, data, item_id, next_id, parent, parent_id, prev_id, row, url;
				$('.toggle-tree-to-delete').remove();
				row = ui.item.closest('.datagrid-tree-item[data-id]');
				item_id = row.data('id');
				prev_id = null;
				next_id = null;
				parent_id = null;
				if (row.prev().length) {
					prev_id = row.prev().data('id');
				}
				if (row.next().length) {
					next_id = row.next().data('id');
				}
				parent = row.parent().closest('.datagrid-tree-item');
				if (parent.length) {
					parent.find('.datagrid-tree-item-children').first().css({
						display: 'block'
					});
					parent.addClass('has-children');
					parent_id = parent.data('id');
				}
				url = $(this).data('sortable-url');
				if (!url) {
					return;
				}
				parent.find('[data-toggle-tree]').first().removeClass('hidden');
				component_prefix = row.closest('.datagrid-tree').attr('data-sortable-parent-path');
				data = {};
				data[(component_prefix + '-item_id').replace(/^-/, '')] = item_id;
				if (prev_id !== null) {
					data[(component_prefix + '-prev_id').replace(/^-/, '')] = prev_id;
				}
				if (next_id !== null) {
					data[(component_prefix + '-next_id').replace(/^-/, '')] = next_id;
				}
				data[(component_prefix + '-parent_id').replace(/^-/, '')] = parent_id;
				return dataGridRegisterAjaxCall({
					type: 'GET',
					url: url,
					data: data,
					error: function(jqXHR, textStatus, errorThrown) {
						if (errorThrown !== 'abort') {
							return alert(jqXHR.statusText);
						}
					}
				});
			},
			stop: function(event, ui) {
				return $('.toggle-tree-to-delete').removeClass('toggle-tree-to-delete');
			},
			start: function(event, ui) {
				var parent;
				parent = ui.item.parent().closest('.datagrid-tree-item');
				if (parent.length) {
					if (parent.find('.datagrid-tree-item').length === 2) {
						return parent.find('[data-toggle-tree]').addClass('toggle-tree-to-delete');
					}
				}
			}
		});
	};
}

$(function() {
	return datagridSortableTree();
});

dataGridRegisterExtension('datagrid.happy', {
	success: function() {
		var c, checked_rows, class_selector, classes, event, grid, grids, i, ie, input, j, len, len1, results;
		if (window.happy) {
			window.happy.reset();
		}
		grids = $('.datagrid');
		results = [];
		for (i = 0, len = grids.length; i < len; i++) {
			grid = grids[i];
			classes = grid.classList;
			class_selector = '';
			for (j = 0, len1 = classes.length; j < len1; j++) {
				c = classes[j];
				class_selector = class_selector + '.' + c;
			}
			checked_rows = document.querySelectorAll(class_selector + ' ' + 'input[data-check]:checked');
			if (checked_rows.length === 1 && checked_rows[0].getAttribute('name') === 'toggle-all') {
				input = document.querySelector(class_selector + ' input[name=toggle-all]');
				if (input) {
					input.checked = false;
					ie = window.navigator.userAgent.indexOf("MSIE ");
					if (ie) {
						event = document.createEvent('Event');
						event.initEvent('change', true, true);
					} else {
						event = new Event('change', {
							'bubbles': true
						});
					}
					results.push(input.dispatchEvent(event));
				} else {
					results.push(void 0);
				}
			} else {
				results.push(void 0);
			}
		}
		return results;
	}
});

dataGridRegisterExtension('datagrid.sortable', {
	success: function() {
		return datagridSortable();
	}
});

dataGridRegisterExtension('datagrid.forms', {
	success: function() {
		return $('.datagrid').find('form').each(function() {
			return window.Nette.initForm(this);
		});
	}
});

dataGridRegisterExtension('datagrid.url', {
	success: function(payload) {
		var host, path, query, url;
		if (payload._datagrid_url) {
			if (window.history.replaceState) {
				host = window.location.protocol + "//" + window.location.host;
				path = window.location.pathname;
				query = window.datagridSerializeUrl(payload.state).replace(/&+$/gm, '');
				if (query) {
					url = host + path + "?" + query.replace(/\&*$/, '');
				} else {
					url = host + path;
				}
				url += window.location.hash;
				if (window.location.href !== url) {
					return window.history.replaceState({
						path: url
					}, '', url);
				}
			}
		}
	}
});

dataGridRegisterExtension('datagrid.sort', {
	success: function(payload) {
		var href, key, ref, results;
		if (payload._datagrid_sort) {
			ref = payload._datagrid_sort;
			results = [];
			for (key in ref) {
				href = ref[key];
				results.push($('#datagrid-sort-' + key).attr('href', href));
			}
			return results;
		}
	}
});

dataGridRegisterExtension('datargid.item_detail', {
	before: function(xhr, settings) {
		var id, row_detail, grid_fullname;
		if (settings.nette && settings.nette.el.attr('data-toggle-detail')) {
			id = settings.nette.el.attr('data-toggle-detail');
			grid_fullname = settings.nette.el.attr('data-toggle-detail-grid-fullname');
			row_detail = $('.item-detail-' + grid_fullname + '-id-' + id);
			if (row_detail.hasClass('loaded')) {
				if (!row_detail.find('.item-detail-content').length) {
					row_detail.removeClass('toggled');
					return true;
				}
				if (row_detail.hasClass('toggled')) {
					row_detail.find('.item-detail-content').slideToggle('fast', (function(_this) {
						return function() {
							return row_detail.toggleClass('toggled');
						};
					})(this));
				} else {
					row_detail.toggleClass('toggled');
					row_detail.find('.item-detail-content').slideToggle('fast');
				}
				return false;
			} else {
				return row_detail.addClass('loaded');
			}
		}
		return true;
	},
	success: function(payload) {
		var id, row_detail, grid_fullname;
		if (payload._datagrid_toggle_detail && payload._datagrid_name) {
			id = payload._datagrid_toggle_detail;
			grid_fullname = payload._datagrid_name;
			row_detail = $('.item-detail-' + grid_fullname + '-id-' + id);
			row_detail.toggleClass('toggled');
			return row_detail.find('.item-detail-content').slideToggle('fast');
		}
	}
});

dataGridRegisterExtension('datagrid.tree', {
	before: function(xhr, settings) {
		var children_block;
		if (settings.nette && settings.nette.el.attr('data-toggle-tree')) {
			settings.nette.el.toggleClass('toggle-rotate');
			children_block = settings.nette.el.closest('.datagrid-tree-item').find('.datagrid-tree-item-children').first();
			if (children_block.hasClass('loaded')) {
				children_block.slideToggle('fast');
				return false;
			}
		}
		return true;
	},
	success: function(payload) {
		var children_block, content, id, name, ref, snippet, template;
		if (payload._datagrid_tree) {
			id = payload._datagrid_tree;
			children_block = $('.datagrid-tree-item[data-id="' + id + '"]').find('.datagrid-tree-item-children').first();
			children_block.addClass('loaded');
			ref = payload.snippets;
			for (name in ref) {
				snippet = ref[name];
				content = $(snippet);
				template = $('<div class="datagrid-tree-item" id="' + name + '">');
				template.attr('data-id', content.attr('data-id'));
				template.append(content);
				if (content.data('has-children')) {
					template.addClass('has-children');
				}
				children_block.append(template);
			}
			children_block.addClass('loaded');
			children_block.slideToggle('fast');
			dataGridLoad();
		}
		return datagridSortableTree();
	}
});

$(document).on('click', '[data-datagrid-editable-url]', function(event) {
	var attr_name, attr_value, attrs, cell, cellValue, cell_height, cell_lines, cell_padding, input, line_height, submit, valueToEdit;
	cell = $(this);
	if (event.target.tagName.toLowerCase() === 'a') {
		return;
	}
	if (cell.hasClass('datagrid-inline-edit')) {
		return;
	}
	if (!cell.hasClass('editing')) {
		cell.addClass('editing');
		cellValue = cell.html().trim().replace('<br>', '\n');
		if (cell.attr('data-datagrid-editable-value')) {
			valueToEdit = cell.data('datagrid-editable-value');
		} else {
			valueToEdit = cellValue;
		}
		cell.data('originalValue', cellValue);
		cell.data('valueToEdit', valueToEdit);
		if (cell.data('datagrid-editable-type') === 'textarea') {
			input = $('<textarea>' + valueToEdit + '</textarea>');
			cell_padding = parseInt(cell.css('padding').replace(/[^-\d\.]/g, ''), 10);
			cell_height = cell.outerHeight();
			line_height = Math.round(parseFloat(cell.css('line-height')));
			cell_lines = (cell_height - (2 * cell_padding)) / line_height;
			input.attr('rows', Math.round(cell_lines));
		} else if (cell.data('datagrid-editable-type') === 'select') {
			input = $(cell.data('datagrid-editable-element'));
			input.find("option[value='" + valueToEdit + "']").prop('selected', true);
		} else {
			input = $('<input type="' + cell.data('datagrid-editable-type') + '">');
			input.val(valueToEdit);
		}
		attrs = cell.data('datagrid-editable-attrs');
		for (attr_name in attrs) {
			attr_value = attrs[attr_name];
			input.attr(attr_name, attr_value);
		}
		cell.removeClass('edited');
		cell.html(input);
		submit = function(cell, el) {
			var value;
			value = el.val();
			if (value !== cell.data('valueToEdit')) {
				dataGridRegisterAjaxCall({
					url: cell.data('datagrid-editable-url'),
					data: {
						value: value
					},
					type: 'POST',
					success: function(payload) {
						if (cell.data('datagrid-editable-type') === 'select') {
							cell.html(input.find("option[value='" + value + "']").html());
						} else {
							if (payload._datagrid_editable_new_value) {
								value = payload._datagrid_editable_new_value;
							}
							cell.html(value);
						}
						return cell.addClass('edited');
					},
					error: function() {
						cell.html(cell.data('originalValue'));
						return cell.addClass('edited-error');
					}
				});
			} else {
				cell.html(cell.data('originalValue'));
			}
			return setTimeout(function() {
				return cell.removeClass('editing');
			}, 1200);
		};
		cell.find('input,textarea,select').focus().on('blur', function() {
			return submit(cell, $(this));
		}).on('keydown', function(e) {
			if (cell.data('datagrid-editable-type') !== 'textarea') {
				if (e.which === 13) {
					e.stopPropagation();
					e.preventDefault();
					return submit(cell, $(this));
				}
			}
			if (e.which === 27) {
				e.stopPropagation();
				e.preventDefault();
				cell.removeClass('editing');
				return cell.html(cell.data('originalValue'));
			}
		});
		return cell.find('select').on('change', function() {
			return submit(cell, $(this));
		});
	}
});

dataGridRegisterExtension('datagrid.after_inline_edit', {
	success: function(payload) {
		var grid = $('.datagrid-' + payload._datagrid_name);

		if (payload._datagrid_inline_edited) {
			grid.find('tr[data-id=' + payload._datagrid_inline_edited + '] > td').addClass('edited');
			return grid.find('.datagrid-inline-edit-trigger').removeClass('hidden');
		} else if (payload._datagrid_inline_edit_cancel) {
			return grid.find('.datagrid-inline-edit-trigger').removeClass('hidden');
		}
	}
});

$(document).on('mouseup', '[data-datagrid-cancel-inline-add]', function(e) {
	var code = e.which || e.keyCode || 0;
	if (code === 1) {
		e.stopPropagation();
		e.preventDefault();
		return $('.datagrid-row-inline-add').addClass('datagrid-row-inline-add-hidden');
	}
});

dataGridRegisterExtension('datagrid-toggle-inline-add', {
	success: function(payload) {
		var grid = $('.datagrid-' + payload._datagrid_name);

		if (payload._datagrid_inline_adding) {
			var row = grid.find('.datagrid-row-inline-add');

			if (row.hasClass('datagrid-row-inline-add-hidden')) {
				row.removeClass('datagrid-row-inline-add-hidden');
			}

			row.find('input:not([readonly]),textarea:not([readonly])').first().focus();
		}
	}
});

datagridFitlerMultiSelect = function() {
	var select = $('.selectpicker').first();

	if ($.fn.selectpicker) {
		return $.fn.selectpicker.defaults = {
			countSelectedText: select.data('i18n-selected'),
			iconBase: '',
			tickIcon: select.data('selected-icon-check')
		};
	}
};

$(function() {
	return datagridFitlerMultiSelect();
});

datagridGroupActionMultiSelect = function() {
	var selects;

	if (!$.fn.selectpicker) {
		return;
	}

	selects = $('[data-datagrid-multiselect-id]');

	return selects.each(function() {
		var id;
		if ($(this).hasClass('selectpicker')) {
			$(this).removeAttr('id');
			id = $(this).data('datagrid-multiselect-id');
			$(this).on('loaded.bs.select', function(e) {
				$(this).parent().attr('style', 'display:none;');
				return $(this).parent().find('.hidden').removeClass('hidden').addClass('btn-default btn-secondary');
			});
			return $(this).on('rendered.bs.select', function(e) {
				return $(this).parent().attr('id', id);
			});
		}
	});
};

$(function() {
	return datagridGroupActionMultiSelect();
});

dataGridRegisterExtension('datagrid.fitlerMultiSelect', {
	success: function() {
		datagridFitlerMultiSelect();
		if ($.fn.selectpicker) {
			return $('.selectpicker').selectpicker({
				iconBase: 'fa'
			});
		}
	}
});

dataGridRegisterExtension('datagrid.groupActionMultiSelect', {
	success: function() {
		return datagridGroupActionMultiSelect();
	}
});

dataGridRegisterExtension('datagrid.inline-editing', {
	success: function(payload) {
		var grid;
		if (payload._datagrid_inline_editing) {
			grid = $('.datagrid-' + payload._datagrid_name);
			return grid.find('.datagrid-inline-edit-trigger').addClass('hidden');
		}
	}
});

dataGridRegisterExtension('datagrid.redraw-item', {
	success: function(payload) {
		var row;
		if (payload._datagrid_redraw_item_class) {
			row = $('tr[data-id=' + payload._datagrid_redraw_item_id + ']');
			return row.attr('class', payload._datagrid_redraw_item_class);
		}
	}
});

dataGridRegisterExtension('datagrid.reset-filter-by-column', {
	success: function(payload) {
		var grid, href, i, key, len, ref;
		if (!payload._datagrid_name) {
			return;
		}
		grid = $('.datagrid-' + payload._datagrid_name);
		grid.find('[data-datagrid-reset-filter-by-column]').addClass('hidden');
		if (payload.non_empty_filters && payload.non_empty_filters.length) {
			ref = payload.non_empty_filters;
			for (i = 0, len = ref.length; i < len; i++) {
				key = ref[i];
				grid.find('[data-datagrid-reset-filter-by-column=' + key + ']').removeClass('hidden');
			}
			href = grid.find('.reset-filter').attr('href');
			return grid.find('[data-datagrid-reset-filter-by-column]').each(function() {
				var new_href;
				key = $(this).attr('data-datagrid-reset-filter-by-column');
				new_href = href.replace('do=' + payload._datagrid_name + '-resetFilter', 'do=' + payload._datagrid_name + '-resetColumnFilter');
				new_href += '&' + payload._datagrid_name + '-key=' + key;
				return $(this).attr('href', new_href);
			});
		}
	}
});


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfY29yZS1qc19tb2R1bGVzX2VzX2FycmF5X2ZpbmRfanMtbm9kZV9tb2R1bGVzX2NvcmUtanNfbW9kdWxlc19lc19zdHJpbmdfLTQ0ODIzNy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLHNCQUFzQixtQkFBTyxDQUFDLDZGQUFnQztBQUM5RCxhQUFhLG1CQUFPLENBQUMscUZBQTRCO0FBQ2pELDJCQUEyQixtQkFBTyxDQUFDLHVHQUFxQzs7QUFFeEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDbkJBLFdBQVcsbUJBQU8sQ0FBQyxxR0FBb0M7QUFDdkQsb0JBQW9CLG1CQUFPLENBQUMsdUZBQTZCO0FBQ3pELGVBQWUsbUJBQU8sQ0FBQyw2RUFBd0I7QUFDL0MsZUFBZSxtQkFBTyxDQUFDLDZFQUF3QjtBQUMvQyx5QkFBeUIsbUJBQU8sQ0FBQyxtR0FBbUM7O0FBRXBFOztBQUVBLHNCQUFzQixrRUFBa0U7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBLDRDQUE0QztBQUM1Qyw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBQzVDLDRDQUE0QztBQUM1QyxVQUFVO0FBQ1YsNENBQTRDO0FBQzVDLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUN2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OztBQUVBLE1BQU0sQ0FBQztBQUNQO0FBQ0E7O0FBRUEsV0FBVyxDQUFDOztBQUVaO0FBQ0E7QUFDQSxNQUFNLENBQUM7QUFDUCxHQUFHLENBQUM7QUFDSixRQUFRLENBQUM7QUFDVCxHQUFHLENBQUM7QUFDSixJQUFJLENBQUMsNENBQTRDO0FBQ2pELFdBQVcsQ0FBQztBQUNaLElBQUk7QUFDSixVQUFVLENBQUM7QUFDWCxXQUFXLENBQUM7QUFDWixJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsQ0FBQztBQUNEO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxNQUFNLENBQUM7QUFDUCxVQUFVLENBQUM7QUFDWDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLENBQUM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxDQUFDO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLENBQUM7QUFDVjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsU0FBUztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLENBQUM7QUFDWDtBQUNBO0FBQ0EsV0FBVyxDQUFDO0FBQ1osSUFBSTtBQUNKO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1zcGVjaWVzLWNvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1zcGVjaWVzLWNyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY2xhc3NvZi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1jb250ZXh0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9odG1sLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3N0cmluZy10cmltLWZvcmNlZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3RyaW5nLXRyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tc3RyaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy93aGl0ZXNwYWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdWJsYWJvby1kYXRhZ3JpZC9hc3NldHMvZGF0YWdyaWQtaW5zdGFudC11cmwtcmVmcmVzaC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdWJsYWJvby1kYXRhZ3JpZC9hc3NldHMvZGF0YWdyaWQtc3Bpbm5lcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VibGFib28tZGF0YWdyaWQvYXNzZXRzL2RhdGFncmlkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBjcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZScpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcblxudmFyIFVOU0NPUEFCTEVTID0gd2VsbEtub3duU3ltYm9sKCd1bnNjb3BhYmxlcycpO1xudmFyIEFycmF5UHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlO1xuXG4vLyBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLUBAdW5zY29wYWJsZXNcbmlmIChBcnJheVByb3RvdHlwZVtVTlNDT1BBQkxFU10gPT0gdW5kZWZpbmVkKSB7XG4gIGRlZmluZVByb3BlcnR5TW9kdWxlLmYoQXJyYXlQcm90b3R5cGUsIFVOU0NPUEFCTEVTLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiBjcmVhdGUobnVsbClcbiAgfSk7XG59XG5cbi8vIGFkZCBhIGtleSB0byBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICBBcnJheVByb3RvdHlwZVtVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuIiwidmFyIGJpbmQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1jb250ZXh0Jyk7XG52YXIgSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbmRleGVkLW9iamVjdCcpO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9iamVjdCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xudmFyIGFycmF5U3BlY2llc0NyZWF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1zcGVjaWVzLWNyZWF0ZScpO1xuXG52YXIgcHVzaCA9IFtdLnB1c2g7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUueyBmb3JFYWNoLCBtYXAsIGZpbHRlciwgc29tZSwgZXZlcnksIGZpbmQsIGZpbmRJbmRleCwgZmlsdGVyUmVqZWN0IH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoVFlQRSkge1xuICB2YXIgSVNfTUFQID0gVFlQRSA9PSAxO1xuICB2YXIgSVNfRklMVEVSID0gVFlQRSA9PSAyO1xuICB2YXIgSVNfU09NRSA9IFRZUEUgPT0gMztcbiAgdmFyIElTX0VWRVJZID0gVFlQRSA9PSA0O1xuICB2YXIgSVNfRklORF9JTkRFWCA9IFRZUEUgPT0gNjtcbiAgdmFyIElTX0ZJTFRFUl9SRUpFQ1QgPSBUWVBFID09IDc7XG4gIHZhciBOT19IT0xFUyA9IFRZUEUgPT0gNSB8fCBJU19GSU5EX0lOREVYO1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBjYWxsYmFja2ZuLCB0aGF0LCBzcGVjaWZpY0NyZWF0ZSkge1xuICAgIHZhciBPID0gdG9PYmplY3QoJHRoaXMpO1xuICAgIHZhciBzZWxmID0gSW5kZXhlZE9iamVjdChPKTtcbiAgICB2YXIgYm91bmRGdW5jdGlvbiA9IGJpbmQoY2FsbGJhY2tmbiwgdGhhdCwgMyk7XG4gICAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKHNlbGYubGVuZ3RoKTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBjcmVhdGUgPSBzcGVjaWZpY0NyZWF0ZSB8fCBhcnJheVNwZWNpZXNDcmVhdGU7XG4gICAgdmFyIHRhcmdldCA9IElTX01BUCA/IGNyZWF0ZSgkdGhpcywgbGVuZ3RoKSA6IElTX0ZJTFRFUiB8fCBJU19GSUxURVJfUkVKRUNUID8gY3JlYXRlKCR0aGlzLCAwKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgdmFsdWUsIHJlc3VsdDtcbiAgICBmb3IgKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgaWYgKE5PX0hPTEVTIHx8IGluZGV4IGluIHNlbGYpIHtcbiAgICAgIHZhbHVlID0gc2VsZltpbmRleF07XG4gICAgICByZXN1bHQgPSBib3VuZEZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgTyk7XG4gICAgICBpZiAoVFlQRSkge1xuICAgICAgICBpZiAoSVNfTUFQKSB0YXJnZXRbaW5kZXhdID0gcmVzdWx0OyAvLyBtYXBcbiAgICAgICAgZWxzZSBpZiAocmVzdWx0KSBzd2l0Y2ggKFRZUEUpIHtcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAgLy8gc29tZVxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuIHZhbHVlOyAgICAgICAgICAgICAvLyBmaW5kXG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4gaW5kZXg7ICAgICAgICAgICAgIC8vIGZpbmRJbmRleFxuICAgICAgICAgIGNhc2UgMjogcHVzaC5jYWxsKHRhcmdldCwgdmFsdWUpOyAvLyBmaWx0ZXJcbiAgICAgICAgfSBlbHNlIHN3aXRjaCAoVFlQRSkge1xuICAgICAgICAgIGNhc2UgNDogcmV0dXJuIGZhbHNlOyAgICAgICAgICAgICAvLyBldmVyeVxuICAgICAgICAgIGNhc2UgNzogcHVzaC5jYWxsKHRhcmdldCwgdmFsdWUpOyAvLyBmaWx0ZXJSZWplY3RcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gSVNfRklORF9JTkRFWCA/IC0xIDogSVNfU09NRSB8fCBJU19FVkVSWSA/IElTX0VWRVJZIDogdGFyZ2V0O1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZm9yRWFjaGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZvcmVhY2hcbiAgZm9yRWFjaDogY3JlYXRlTWV0aG9kKDApLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLm1hcGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLm1hcFxuICBtYXA6IGNyZWF0ZU1ldGhvZCgxKSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maWx0ZXJcbiAgZmlsdGVyOiBjcmVhdGVNZXRob2QoMiksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuc29tZWAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnNvbWVcbiAgc29tZTogY3JlYXRlTWV0aG9kKDMpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmV2ZXJ5YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZXZlcnlcbiAgZXZlcnk6IGNyZWF0ZU1ldGhvZCg0KSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maW5kYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZmluZFxuICBmaW5kOiBjcmVhdGVNZXRob2QoNSksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZmluZEluZGV4XG4gIGZpbmRJbmRleDogY3JlYXRlTWV0aG9kKDYpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbHRlclJlamVjdGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWFycmF5LWZpbHRlcmluZ1xuICBmaWx0ZXJSZWplY3Q6IGNyZWF0ZU1ldGhvZCg3KVxufTtcbiIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWFycmF5Jyk7XG52YXIgaXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jb25zdHJ1Y3RvcicpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xuXG4vLyBhIHBhcnQgb2YgYEFycmF5U3BlY2llc0NyZWF0ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5c3BlY2llc2NyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3JpZ2luYWxBcnJheSkge1xuICB2YXIgQztcbiAgaWYgKGlzQXJyYXkob3JpZ2luYWxBcnJheSkpIHtcbiAgICBDID0gb3JpZ2luYWxBcnJheS5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjcm9zcy1yZWFsbSBmYWxsYmFja1xuICAgIGlmIChpc0NvbnN0cnVjdG9yKEMpICYmIChDID09PSBBcnJheSB8fCBpc0FycmF5KEMucHJvdG90eXBlKSkpIEMgPSB1bmRlZmluZWQ7XG4gICAgZWxzZSBpZiAoaXNPYmplY3QoQykpIHtcbiAgICAgIEMgPSBDW1NQRUNJRVNdO1xuICAgICAgaWYgKEMgPT09IG51bGwpIEMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IHJldHVybiBDID09PSB1bmRlZmluZWQgPyBBcnJheSA6IEM7XG59O1xuIiwidmFyIGFycmF5U3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3InKTtcblxuLy8gYEFycmF5U3BlY2llc0NyZWF0ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5c3BlY2llc2NyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3JpZ2luYWxBcnJheSwgbGVuZ3RoKSB7XG4gIHJldHVybiBuZXcgKGFycmF5U3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsQXJyYXkpKShsZW5ndGggPT09IDAgPyAwIDogbGVuZ3RoKTtcbn07XG4iLCJ2YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBjbGFzc29mUmF3ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xuLy8gRVMzIHdyb25nIGhlcmVcbnZhciBDT1JSRUNUX0FSR1VNRU5UUyA9IGNsYXNzb2ZSYXcoZnVuY3Rpb24gKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnO1xuXG4vLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvclxudmFyIHRyeUdldCA9IGZ1bmN0aW9uIChpdCwga2V5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGl0W2tleV07XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbn07XG5cbi8vIGdldHRpbmcgdGFnIGZyb20gRVM2KyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2Bcbm1vZHVsZS5leHBvcnRzID0gVE9fU1RSSU5HX1RBR19TVVBQT1JUID8gY2xhc3NvZlJhdyA6IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgTywgdGFnLCByZXN1bHQ7XG4gIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkID8gJ1VuZGVmaW5lZCcgOiBpdCA9PT0gbnVsbCA/ICdOdWxsJ1xuICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZVxuICAgIDogdHlwZW9mICh0YWcgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRPX1NUUklOR19UQUcpKSA9PSAnc3RyaW5nJyA/IHRhZ1xuICAgIC8vIGJ1aWx0aW5UYWcgY2FzZVxuICAgIDogQ09SUkVDVF9BUkdVTUVOVFMgPyBjbGFzc29mUmF3KE8pXG4gICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFja1xuICAgIDogKHJlc3VsdCA9IGNsYXNzb2ZSYXcoTykpID09ICdPYmplY3QnICYmIGlzQ2FsbGFibGUoTy5jYWxsZWUpID8gJ0FyZ3VtZW50cycgOiByZXN1bHQ7XG59O1xuIiwidmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG5cbi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4sIHRoYXQsIGxlbmd0aCkge1xuICBhQ2FsbGFibGUoZm4pO1xuICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZm47XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCk7XG4gICAgfTtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG4iLCJ2YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRCdWlsdEluKCdkb2N1bWVudCcsICdkb2N1bWVudEVsZW1lbnQnKTtcbiIsInZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG5cbi8vIGBJc0FycmF5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaXNhcnJheVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLWFycmF5LWlzYXJyYXkgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJndW1lbnQpIHtcbiAgcmV0dXJuIGNsYXNzb2YoYXJndW1lbnQpID09ICdBcnJheSc7XG59O1xuIiwidmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xudmFyIGdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWJ1aWx0LWluJyk7XG52YXIgaW5zcGVjdFNvdXJjZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnNwZWN0LXNvdXJjZScpO1xuXG52YXIgZW1wdHkgPSBbXTtcbnZhciBjb25zdHJ1Y3QgPSBnZXRCdWlsdEluKCdSZWZsZWN0JywgJ2NvbnN0cnVjdCcpO1xudmFyIGNvbnN0cnVjdG9yUmVnRXhwID0gL15cXHMqKD86Y2xhc3N8ZnVuY3Rpb24pXFxiLztcbnZhciBleGVjID0gY29uc3RydWN0b3JSZWdFeHAuZXhlYztcbnZhciBJTkNPUlJFQ1RfVE9fU1RSSU5HID0gIWNvbnN0cnVjdG9yUmVnRXhwLmV4ZWMoZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9KTtcblxudmFyIGlzQ29uc3RydWN0b3JNb2Rlcm4gPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgaWYgKCFpc0NhbGxhYmxlKGFyZ3VtZW50KSkgcmV0dXJuIGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0cnVjdChPYmplY3QsIGVtcHR5LCBhcmd1bWVudCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG52YXIgaXNDb25zdHJ1Y3RvckxlZ2FjeSA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoIWlzQ2FsbGFibGUoYXJndW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gIHN3aXRjaCAoY2xhc3NvZihhcmd1bWVudCkpIHtcbiAgICBjYXNlICdBc3luY0Z1bmN0aW9uJzpcbiAgICBjYXNlICdHZW5lcmF0b3JGdW5jdGlvbic6XG4gICAgY2FzZSAnQXN5bmNHZW5lcmF0b3JGdW5jdGlvbic6IHJldHVybiBmYWxzZTtcbiAgICAvLyB3ZSBjYW4ndCBjaGVjayAucHJvdG90eXBlIHNpbmNlIGNvbnN0cnVjdG9ycyBwcm9kdWNlZCBieSAuYmluZCBoYXZlbid0IGl0XG4gIH0gcmV0dXJuIElOQ09SUkVDVF9UT19TVFJJTkcgfHwgISFleGVjLmNhbGwoY29uc3RydWN0b3JSZWdFeHAsIGluc3BlY3RTb3VyY2UoYXJndW1lbnQpKTtcbn07XG5cbi8vIGBJc0NvbnN0cnVjdG9yYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaXNjb25zdHJ1Y3RvclxubW9kdWxlLmV4cG9ydHMgPSAhY29uc3RydWN0IHx8IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbGxlZDtcbiAgcmV0dXJuIGlzQ29uc3RydWN0b3JNb2Rlcm4oaXNDb25zdHJ1Y3Rvck1vZGVybi5jYWxsKVxuICAgIHx8ICFpc0NvbnN0cnVjdG9yTW9kZXJuKE9iamVjdClcbiAgICB8fCAhaXNDb25zdHJ1Y3Rvck1vZGVybihmdW5jdGlvbiAoKSB7IGNhbGxlZCA9IHRydWU7IH0pXG4gICAgfHwgY2FsbGVkO1xufSkgPyBpc0NvbnN0cnVjdG9yTGVnYWN5IDogaXNDb25zdHJ1Y3Rvck1vZGVybjtcbiIsIi8qIGdsb2JhbCBBY3RpdmVYT2JqZWN0IC0tIG9sZCBJRSwgV1NIICovXG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgZGVmaW5lUHJvcGVydGllcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnRpZXMnKTtcbnZhciBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbnVtLWJ1Zy1rZXlzJyk7XG52YXIgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRkZW4ta2V5cycpO1xudmFyIGh0bWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaHRtbCcpO1xudmFyIGRvY3VtZW50Q3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudCcpO1xudmFyIHNoYXJlZEtleSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQta2V5Jyk7XG5cbnZhciBHVCA9ICc+JztcbnZhciBMVCA9ICc8JztcbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcbnZhciBTQ1JJUFQgPSAnc2NyaXB0JztcbnZhciBJRV9QUk9UTyA9IHNoYXJlZEtleSgnSUVfUFJPVE8nKTtcblxudmFyIEVtcHR5Q29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG5cbnZhciBzY3JpcHRUYWcgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICByZXR1cm4gTFQgKyBTQ1JJUFQgKyBHVCArIGNvbnRlbnQgKyBMVCArICcvJyArIFNDUklQVCArIEdUO1xufTtcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIEFjdGl2ZVggT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGVcbnZhciBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYID0gZnVuY3Rpb24gKGFjdGl2ZVhEb2N1bWVudCkge1xuICBhY3RpdmVYRG9jdW1lbnQud3JpdGUoc2NyaXB0VGFnKCcnKSk7XG4gIGFjdGl2ZVhEb2N1bWVudC5jbG9zZSgpO1xuICB2YXIgdGVtcCA9IGFjdGl2ZVhEb2N1bWVudC5wYXJlbnRXaW5kb3cuT2JqZWN0O1xuICBhY3RpdmVYRG9jdW1lbnQgPSBudWxsOyAvLyBhdm9pZCBtZW1vcnkgbGVha1xuICByZXR1cm4gdGVtcDtcbn07XG5cbi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGVcbnZhciBOdWxsUHJvdG9PYmplY3RWaWFJRnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnXG4gIHZhciBpZnJhbWUgPSBkb2N1bWVudENyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICB2YXIgSlMgPSAnamF2YScgKyBTQ1JJUFQgKyAnOic7XG4gIHZhciBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGh0bWwuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzQ3NVxuICBpZnJhbWUuc3JjID0gU3RyaW5nKEpTKTtcbiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgaWZyYW1lRG9jdW1lbnQub3BlbigpO1xuICBpZnJhbWVEb2N1bWVudC53cml0ZShzY3JpcHRUYWcoJ2RvY3VtZW50LkY9T2JqZWN0JykpO1xuICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpO1xuICByZXR1cm4gaWZyYW1lRG9jdW1lbnQuRjtcbn07XG5cbi8vIENoZWNrIGZvciBkb2N1bWVudC5kb21haW4gYW5kIGFjdGl2ZSB4IHN1cHBvcnRcbi8vIE5vIG5lZWQgdG8gdXNlIGFjdGl2ZSB4IGFwcHJvYWNoIHdoZW4gZG9jdW1lbnQuZG9tYWluIGlzIG5vdCBzZXRcbi8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXMtc2hpbXMvZXM1LXNoaW0vaXNzdWVzLzE1MFxuLy8gdmFyaWF0aW9uIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9raXRjYW1icmlkZ2UvZXM1LXNoaW0vY29tbWl0LzRmNzM4YWMwNjYzNDZcbi8vIGF2b2lkIElFIEdDIGJ1Z1xudmFyIGFjdGl2ZVhEb2N1bWVudDtcbnZhciBOdWxsUHJvdG9PYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgYWN0aXZlWERvY3VtZW50ID0gbmV3IEFjdGl2ZVhPYmplY3QoJ2h0bWxmaWxlJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGlnbm9yZSAqLyB9XG4gIE51bGxQcm90b09iamVjdCA9IHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJ1xuICAgID8gZG9jdW1lbnQuZG9tYWluICYmIGFjdGl2ZVhEb2N1bWVudFxuICAgICAgPyBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYKGFjdGl2ZVhEb2N1bWVudCkgLy8gb2xkIElFXG4gICAgICA6IE51bGxQcm90b09iamVjdFZpYUlGcmFtZSgpXG4gICAgOiBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYKGFjdGl2ZVhEb2N1bWVudCk7IC8vIFdTSFxuICB2YXIgbGVuZ3RoID0gZW51bUJ1Z0tleXMubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIGRlbGV0ZSBOdWxsUHJvdG9PYmplY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tsZW5ndGhdXTtcbiAgcmV0dXJuIE51bGxQcm90b09iamVjdCgpO1xufTtcblxuaGlkZGVuS2V5c1tJRV9QUk9UT10gPSB0cnVlO1xuXG4vLyBgT2JqZWN0LmNyZWF0ZWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5jcmVhdGVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcykge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoTyAhPT0gbnVsbCkge1xuICAgIEVtcHR5Q29uc3RydWN0b3JbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pO1xuICAgIHJlc3VsdCA9IG5ldyBFbXB0eUNvbnN0cnVjdG9yKCk7XG4gICAgRW1wdHlDb25zdHJ1Y3RvcltQUk9UT1RZUEVdID0gbnVsbDtcbiAgICAvLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXG4gICAgcmVzdWx0W0lFX1BST1RPXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBOdWxsUHJvdG9PYmplY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRlZmluZVByb3BlcnRpZXMocmVzdWx0LCBQcm9wZXJ0aWVzKTtcbn07XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgb2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cycpO1xuXG4vLyBgT2JqZWN0LmRlZmluZVByb3BlcnRpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydGllc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1kZWZpbmVwcm9wZXJ0aWVzIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gREVTQ1JJUFRPUlMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykge1xuICBhbk9iamVjdChPKTtcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFByb3BlcnRpZXMpO1xuICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBrZXk7XG4gIHdoaWxlIChsZW5ndGggPiBpbmRleCkgZGVmaW5lUHJvcGVydHlNb2R1bGUuZihPLCBrZXkgPSBrZXlzW2luZGV4KytdLCBQcm9wZXJ0aWVzW2tleV0pO1xuICByZXR1cm4gTztcbn07XG4iLCJ2YXIgaW50ZXJuYWxPYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzLWludGVybmFsJyk7XG52YXIgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW51bS1idWcta2V5cycpO1xuXG4vLyBgT2JqZWN0LmtleXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3Qua2V5c1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1rZXlzIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKSB7XG4gIHJldHVybiBpbnRlcm5hbE9iamVjdEtleXMoTywgZW51bUJ1Z0tleXMpO1xufTtcbiIsInZhciBQUk9QRVJfRlVOQ1RJT05fTkFNRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1uYW1lJykuUFJPUEVSO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgd2hpdGVzcGFjZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2hpdGVzcGFjZXMnKTtcblxudmFyIG5vbiA9ICdcXHUyMDBCXFx1MDA4NVxcdTE4MEUnO1xuXG4vLyBjaGVjayB0aGF0IGEgbWV0aG9kIHdvcmtzIHdpdGggdGhlIGNvcnJlY3QgbGlzdFxuLy8gb2Ygd2hpdGVzcGFjZXMgYW5kIGhhcyBhIGNvcnJlY3QgbmFtZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTUVUSE9EX05BTUUpIHtcbiAgcmV0dXJuIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gISF3aGl0ZXNwYWNlc1tNRVRIT0RfTkFNRV0oKVxuICAgICAgfHwgbm9uW01FVEhPRF9OQU1FXSgpICE9PSBub25cbiAgICAgIHx8IChQUk9QRVJfRlVOQ1RJT05fTkFNRSAmJiB3aGl0ZXNwYWNlc1tNRVRIT0RfTkFNRV0ubmFtZSAhPT0gTUVUSE9EX05BTUUpO1xuICB9KTtcbn07XG4iLCJ2YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmcnKTtcbnZhciB3aGl0ZXNwYWNlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93aGl0ZXNwYWNlcycpO1xuXG52YXIgd2hpdGVzcGFjZSA9ICdbJyArIHdoaXRlc3BhY2VzICsgJ10nO1xudmFyIGx0cmltID0gUmVnRXhwKCdeJyArIHdoaXRlc3BhY2UgKyB3aGl0ZXNwYWNlICsgJyonKTtcbnZhciBydHJpbSA9IFJlZ0V4cCh3aGl0ZXNwYWNlICsgd2hpdGVzcGFjZSArICcqJCcpO1xuXG4vLyBgU3RyaW5nLnByb3RvdHlwZS57IHRyaW0sIHRyaW1TdGFydCwgdHJpbUVuZCwgdHJpbUxlZnQsIHRyaW1SaWdodCB9YCBtZXRob2RzIGltcGxlbWVudGF0aW9uXG52YXIgY3JlYXRlTWV0aG9kID0gZnVuY3Rpb24gKFRZUEUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcykge1xuICAgIHZhciBzdHJpbmcgPSB0b1N0cmluZyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKCR0aGlzKSk7XG4gICAgaWYgKFRZUEUgJiAxKSBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShsdHJpbSwgJycpO1xuICAgIGlmIChUWVBFICYgMikgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocnRyaW0sICcnKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLnsgdHJpbUxlZnQsIHRyaW1TdGFydCB9YCBtZXRob2RzXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS50cmltc3RhcnRcbiAgc3RhcnQ6IGNyZWF0ZU1ldGhvZCgxKSxcbiAgLy8gYFN0cmluZy5wcm90b3R5cGUueyB0cmltUmlnaHQsIHRyaW1FbmQgfWAgbWV0aG9kc1xuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUudHJpbWVuZFxuICBlbmQ6IGNyZWF0ZU1ldGhvZCgyKSxcbiAgLy8gYFN0cmluZy5wcm90b3R5cGUudHJpbWAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS50cmltXG4gIHRyaW06IGNyZWF0ZU1ldGhvZCgzKVxufTtcbiIsInZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFRPX1NUUklOR19UQUcgPSB3ZWxsS25vd25TeW1ib2woJ3RvU3RyaW5nVGFnJyk7XG52YXIgdGVzdCA9IHt9O1xuXG50ZXN0W1RPX1NUUklOR19UQUddID0gJ3onO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmluZyh0ZXN0KSA9PT0gJ1tvYmplY3Qgel0nO1xuIiwidmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoY2xhc3NvZihhcmd1bWVudCkgPT09ICdTeW1ib2wnKSB0aHJvdyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGEgU3ltYm9sIHZhbHVlIHRvIGEgc3RyaW5nJyk7XG4gIHJldHVybiBTdHJpbmcoYXJndW1lbnQpO1xufTtcbiIsIi8vIGEgc3RyaW5nIG9mIGFsbCB2YWxpZCB1bmljb2RlIHdoaXRlc3BhY2VzXG5tb2R1bGUuZXhwb3J0cyA9ICdcXHUwMDA5XFx1MDAwQVxcdTAwMEJcXHUwMDBDXFx1MDAwRFxcdTAwMjBcXHUwMEEwXFx1MTY4MFxcdTIwMDBcXHUyMDAxXFx1MjAwMicgK1xuICAnXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMEFcXHUyMDJGXFx1MjA1RlxcdTMwMDBcXHUyMDI4XFx1MjAyOVxcdUZFRkYnO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgJGZpbmQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZmluZDtcbnZhciBhZGRUb1Vuc2NvcGFibGVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcycpO1xuXG52YXIgRklORCA9ICdmaW5kJztcbnZhciBTS0lQU19IT0xFUyA9IHRydWU7XG5cbi8vIFNob3VsZG4ndCBza2lwIGhvbGVzXG5pZiAoRklORCBpbiBbXSkgQXJyYXkoMSlbRklORF0oZnVuY3Rpb24gKCkgeyBTS0lQU19IT0xFUyA9IGZhbHNlOyB9KTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS5maW5kYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRcbiQoeyB0YXJnZXQ6ICdBcnJheScsIHByb3RvOiB0cnVlLCBmb3JjZWQ6IFNLSVBTX0hPTEVTIH0sIHtcbiAgZmluZDogZnVuY3Rpb24gZmluZChjYWxsYmFja2ZuIC8qICwgdGhhdCA9IHVuZGVmaW5lZCAqLykge1xuICAgIHJldHVybiAkZmluZCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS1AQHVuc2NvcGFibGVzXG5hZGRUb1Vuc2NvcGFibGVzKEZJTkQpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgJHRyaW0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLXRyaW0nKS50cmltO1xudmFyIGZvcmNlZFN0cmluZ1RyaW1NZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLXRyaW0tZm9yY2VkJyk7XG5cbi8vIGBTdHJpbmcucHJvdG90eXBlLnRyaW1gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLnRyaW1cbiQoeyB0YXJnZXQ6ICdTdHJpbmcnLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiBmb3JjZWRTdHJpbmdUcmltTWV0aG9kKCd0cmltJykgfSwge1xuICB0cmltOiBmdW5jdGlvbiB0cmltKCkge1xuICAgIHJldHVybiAkdHJpbSh0aGlzKTtcbiAgfVxufSk7XG4iLCJ2YXIgZGF0YUdyaWRSZWdpc3RlckFqYXhDYWxsO1xuXG5pZiAodHlwZW9mIG5hamEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0ZGF0YUdyaWRSZWdpc3RlckFqYXhDYWxsID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdHZhciBtZXRob2QgPSBwYXJhbXMudHlwZSB8fCAnR0VUJztcblx0XHR2YXIgZGF0YSA9IHBhcmFtcy5kYXRhIHx8IG51bGw7XG5cblx0XHRuYWphLm1ha2VSZXF1ZXN0KG1ldGhvZCwgcGFyYW1zLnVybCwgZGF0YSwge1xuXHRcdFx0aGlzdG9yeTogJ3JlcGxhY2UnXG5cdFx0fSlcblx0XHRcdC50aGVuKHBhcmFtcy5zdWNjZXNzKVxuXHRcdFx0LmNhdGNoKHBhcmFtcy5lcnJvcik7XG5cdH07XG5cbn0gZWxzZSB7XG5cdFx0ZGF0YUdyaWRSZWdpc3RlckFqYXhDYWxsID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdFx0JC5uZXR0ZS5hamF4KHBhcmFtcyk7XG5cdFx0fTtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0YWdyaWQnKTtcblxuXHRpZiAoZWxlbWVudCAhPT0gbnVsbCkge1xuXHRcdHJldHVybiBkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwoe1xuXHRcdFx0dHlwZTogJ0dFVCcsXG5cdFx0XHR1cmw6IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXJlZnJlc2gtc3RhdGUnKVxuXHRcdH0pO1xuXHR9XG59KTtcbiIsInZhciBkYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uO1xuXG5pZiAodHlwZW9mIG5hamEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0dmFyIGlzTmFqYTIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuYWphICYmIG5hamEuVkVSU0lPTiAmJiBuYWphLlZFUlNJT04gPj0gMiB9O1xuXHR2YXIgbmFqYUV2ZW50UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykgeyByZXR1cm4gaXNOYWphMigpID8gcGFyYW1zLmRldGFpbCA6IHBhcmFtcyB9O1xuXHR2YXIgbmFqYVJlcXVlc3QgPSBmdW5jdGlvbiAocGFyYW1zKSB7IHJldHVybiBpc05hamEyKCkgPyBwYXJhbXMuZGV0YWlsLnJlcXVlc3QgOiBwYXJhbXMueGhyIH07XG5cdGRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24gPSBmdW5jdGlvbiAobmFtZSwgZXh0ZW5zaW9uKSB7XG5cdFx0dmFyIGluaXQgPSBleHRlbnNpb24uaW5pdDtcblx0XHR2YXIgc3VjY2VzcyA9IGV4dGVuc2lvbi5zdWNjZXNzO1xuXHRcdHZhciBiZWZvcmUgPSBleHRlbnNpb24uYmVmb3JlO1xuXHRcdHZhciBjb21wbGV0ZSA9IGV4dGVuc2lvbi5jb21wbGV0ZTtcblxuXG5cdFx0dmFyIE5ld0V4dGVuc2lvbiA9IGZ1bmN0aW9uIE5ld0V4dGVuc2lvbihuYWphLCBuYW1lKSB7XG5cdFx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXG5cdFx0XHR0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbiAobmFqYSkge1xuXHRcdFx0XHRpZihpbml0KSB7XG5cdFx0XHRcdFx0bmFqYS5hZGRFdmVudExpc3RlbmVyKCdpbml0JywgZnVuY3Rpb24gKHBhcmFtcykgIHtcblx0XHRcdFx0XHRcdGluaXQobmFqYUV2ZW50UGFyYW1zKHBhcmFtcykuZGVmYXVsdE9wdGlvbnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYoc3VjY2Vzcykge1xuXHRcdFx0XHRcdG5hamEuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIGZ1bmN0aW9uIChwYXJhbXMpICB7XG5cdFx0XHRcdFx0XHR2YXIgcGF5bG9hZCA9IGlzTmFqYTIoKSA/IHBhcmFtcy5kZXRhaWwucGF5bG9hZCA6IHBhcmFtcy5yZXNwb25zZTtcblx0XHRcdFx0XHRcdHN1Y2Nlc3MocGF5bG9hZCwgbmFqYUV2ZW50UGFyYW1zKHBhcmFtcykub3B0aW9ucyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihiZWZvcmUpIHtcblx0XHRcdFx0XHRuYWphLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0XHRcdFx0XHRcdGJlZm9yZShuYWphUmVxdWVzdChwYXJhbXMpLCBuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5vcHRpb25zKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGNvbXBsZXRlKSB7XG5cdFx0XHRcdFx0bmFqYS5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0XHRcdFx0XHRcdGNvbXBsZXRlKG5hamFSZXF1ZXN0KHBhcmFtcyksIG5hamFFdmVudFBhcmFtcyhwYXJhbXMpLm9wdGlvbnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWlzTmFqYTIoKSkge1xuXHRcdFx0XHR0aGlzLmluaXRpYWxpemUobmFqYSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRpZiAoaXNOYWphMigpKSB7XG5cdFx0XHRuYWphLnJlZ2lzdGVyRXh0ZW5zaW9uKG5ldyBOZXdFeHRlbnNpb24obnVsbCwgbmFtZSkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuYWphLnJlZ2lzdGVyRXh0ZW5zaW9uKE5ld0V4dGVuc2lvbiwgbmFtZSk7XG5cdFx0fVxuXHR9O1xufSBlbHNlIGlmICgkLm5ldHRlKSB7XG5cdFx0ZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbiA9IGZ1bmN0aW9uIChuYW1lLCBleHRlbnNpb24pIHtcblx0XHRcdCQubmV0dGUuZXh0KG5hbWUsIGV4dGVuc2lvbik7XG5cdFx0fTtcbn1cblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbigndWJsYWJvby1zcGlubmVycycsIHtcblx0YmVmb3JlOiBmdW5jdGlvbih4aHIsIHNldHRpbmdzKSB7XG5cdFx0dmFyIGVsLCBpZCwgcm93X2RldGFpbCwgc3Bpbm5lcl90ZW1wbGF0ZSwgZ3JpZF9mdWxsbmFtZTtcblx0XHRpZiAoc2V0dGluZ3MubmV0dGUpIHtcblx0XHRcdGVsID0gc2V0dGluZ3MubmV0dGUuZWw7XG5cdFx0XHRzcGlubmVyX3RlbXBsYXRlID0gJCgnPGRpdiBjbGFzcz1cInVibGFib28tc3Bpbm5lciB1YmxhYm9vLXNwaW5uZXItc21hbGxcIj48aT48L2k+PGk+PC9pPjxpPjwvaT48aT48L2k+PC9kaXY+Jyk7XG5cdFx0XHRpZiAoZWwuaXMoJy5kYXRhZ3JpZCBbbmFtZT1cImdyb3VwX2FjdGlvbltzdWJtaXRdXCJdJykpIHtcblx0XHRcdFx0cmV0dXJuIGVsLmFmdGVyKHNwaW5uZXJfdGVtcGxhdGUpO1xuXHRcdFx0fSBlbHNlIGlmIChlbC5pcygnLmRhdGFncmlkIGEnKSAmJiBlbC5kYXRhKCd0b2dnbGUtZGV0YWlsJykpIHtcblx0XHRcdFx0aWQgPSBzZXR0aW5ncy5uZXR0ZS5lbC5hdHRyKCdkYXRhLXRvZ2dsZS1kZXRhaWwnKTtcblx0XHRcdFx0Z3JpZF9mdWxsbmFtZSA9IHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbC1ncmlkLWZ1bGxuYW1lJyk7XG5cdFx0XHRcdHJvd19kZXRhaWwgPSAkKCcuaXRlbS1kZXRhaWwtJyArIGdyaWRfZnVsbG5hbWUgKyAnLWlkLScgKyBpZCk7XG5cdFx0XHRcdGlmICghcm93X2RldGFpbC5oYXNDbGFzcygnbG9hZGVkJykpIHtcblx0XHRcdFx0XHRyZXR1cm4gZWwuYWRkQ2xhc3MoJ3VibGFib28tc3Bpbm5lci1pY29uJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZWwuaXMoJy5kYXRhZ3JpZCAuY29sLXBhZ2luYXRpb24gYScpKSB7XG5cdFx0XHRcdHJldHVybiBlbC5jbG9zZXN0KCcucm93LWdyaWQtYm90dG9tJykuZmluZCgnLmNvbC1wZXItcGFnZScpLnByZXBlbmQoc3Bpbm5lcl90ZW1wbGF0ZSk7XG5cdFx0XHR9IGVsc2UgaWYgKGVsLmlzKCcuZGF0YWdyaWQgLmRhdGFncmlkLXBlci1wYWdlLXN1Ym1pdCcpKSB7XG5cdFx0XHRcdHJldHVybiBlbC5jbG9zZXN0KCcucm93LWdyaWQtYm90dG9tJykuZmluZCgnLmNvbC1wZXItcGFnZScpLnByZXBlbmQoc3Bpbm5lcl90ZW1wbGF0ZSk7XG5cdFx0XHR9IGVsc2UgaWYgKGVsLmlzKCcuZGF0YWdyaWQgLnJlc2V0LWZpbHRlcicpKSB7XG5cdFx0XHRcdHJldHVybiBlbC5jbG9zZXN0KCcucm93LWdyaWQtYm90dG9tJykuZmluZCgnLmNvbC1wZXItcGFnZScpLnByZXBlbmQoc3Bpbm5lcl90ZW1wbGF0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0JCgnLnVibGFib28tc3Bpbm5lcicpLnJlbW92ZSgpO1xuXHRcdHJldHVybiAkKCcudWJsYWJvby1zcGlubmVyLWljb24nKS5yZW1vdmVDbGFzcygndWJsYWJvby1zcGlubmVyLWljb24nKTtcblx0fVxufSk7XG4iLCJ2YXIgZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbiwgZGF0YUdyaWRSZWdpc3RlckFqYXhDYWxsLCBkYXRhR3JpZExvYWQsIGRhdGFHcmlkU3VibWl0Rm9ybTtcblxuaWYgKHR5cGVvZiBuYWphICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdHZhciBpc05hamEyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmFqYSAmJiBuYWphLlZFUlNJT04gJiYgbmFqYS5WRVJTSU9OID49IDIgfTtcblx0dmFyIG5hamFFdmVudFBhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXMpIHsgcmV0dXJuIGlzTmFqYTIoKSA/IHBhcmFtcy5kZXRhaWwgOiBwYXJhbXMgfTtcblx0dmFyIG5hamFSZXF1ZXN0ID0gZnVuY3Rpb24gKHBhcmFtcykgeyByZXR1cm4gaXNOYWphMigpID8gcGFyYW1zLmRldGFpbC5yZXF1ZXN0IDogcGFyYW1zLnhociB9O1xuXHRkYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uID0gZnVuY3Rpb24gKG5hbWUsIGV4dGVuc2lvbikge1xuXHRcdHZhciBpbml0ID0gZXh0ZW5zaW9uLmluaXQ7XG5cdFx0dmFyIHN1Y2Nlc3MgPSBleHRlbnNpb24uc3VjY2Vzcztcblx0XHR2YXIgYmVmb3JlID0gZXh0ZW5zaW9uLmJlZm9yZTtcblx0XHR2YXIgY29tcGxldGUgPSBleHRlbnNpb24uY29tcGxldGU7XG5cdFx0dmFyIGludGVyYWN0aW9uID0gZXh0ZW5zaW9uLmludGVyYWN0aW9uO1xuXG5cblx0XHR2YXIgTmV3RXh0ZW5zaW9uID0gZnVuY3Rpb24gTmV3RXh0ZW5zaW9uKG5hamEsIG5hbWUpIHtcblx0XHRcdHRoaXMubmFtZSA9IG5hbWU7XG5cblx0XHRcdHRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChuYWphKSB7XG5cdFx0XHRcdGlmKGluaXQpIHtcblx0XHRcdFx0XHRuYWphLmFkZEV2ZW50TGlzdGVuZXIoJ2luaXQnLCBmdW5jdGlvbiAocGFyYW1zKSAge1xuXHRcdFx0XHRcdFx0aW5pdChuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5kZWZhdWx0T3B0aW9ucyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihzdWNjZXNzKSB7XG5cdFx0XHRcdFx0bmFqYS5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgZnVuY3Rpb24gKHBhcmFtcykgIHtcblx0XHRcdFx0XHRcdHZhciBwYXlsb2FkID0gaXNOYWphMigpID8gcGFyYW1zLmRldGFpbC5wYXlsb2FkIDogcGFyYW1zLnJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0c3VjY2VzcyhwYXlsb2FkLCBuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5vcHRpb25zKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBpbnRlcmFjdGlvblRhcmdldCA9IG5hamE7XG5cdFx0XHRcdGlmIChpc05hamEyKCkpIHtcblx0XHRcdFx0XHRpbnRlcmFjdGlvblRhcmdldCA9IGludGVyYWN0aW9uVGFyZ2V0LnVpSGFuZGxlcjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGludGVyYWN0aW9uVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2ludGVyYWN0aW9uJywgZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdFx0XHRcdGlmIChpc05hamEyKCkpIHtcblx0XHRcdFx0XHRcdHBhcmFtcy5kZXRhaWwub3B0aW9ucy5uZXR0ZSA9IHtcblx0XHRcdFx0XHRcdFx0ZWw6ICQocGFyYW1zLmRldGFpbC5lbGVtZW50KVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwYXJhbXMub3B0aW9ucy5uZXR0ZSA9IHtcblx0XHRcdFx0XHRcdFx0ZWw6ICQocGFyYW1zLmVsZW1lbnQpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpbnRlcmFjdGlvbikge1xuXHRcdFx0XHRcdFx0aWYgKCFpbnRlcmFjdGlvbihuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5vcHRpb25zKSl7XG5cdFx0XHRcdFx0XHRcdHBhcmFtcy5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYoYmVmb3JlKSB7XG5cdFx0XHRcdFx0bmFqYS5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmUnLCBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWJlZm9yZShuYWphUmVxdWVzdChwYXJhbXMpLCBuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5vcHRpb25zKSlcblx0XHRcdFx0XHRcdFx0cGFyYW1zLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihjb21wbGV0ZSkge1xuXHRcdFx0XHRcdG5hamEuYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdFx0XHRcdFx0XHRjb21wbGV0ZShuYWphUmVxdWVzdChwYXJhbXMpLCBuYWphRXZlbnRQYXJhbXMocGFyYW1zKS5vcHRpb25zKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCFpc05hamEyKCkpIHtcblx0XHRcdFx0dGhpcy5pbml0aWFsaXplKG5hamEpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKGlzTmFqYTIoKSkge1xuXHRcdFx0bmFqYS5yZWdpc3RlckV4dGVuc2lvbihuZXcgTmV3RXh0ZW5zaW9uKG51bGwsIG5hbWUpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmFqYS5yZWdpc3RlckV4dGVuc2lvbihOZXdFeHRlbnNpb24sIG5hbWUpO1xuXHRcdH1cblx0fTtcblxuXG5cdGRhdGFHcmlkUmVnaXN0ZXJBamF4Q2FsbCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IHBhcmFtcy50eXBlIHx8ICdHRVQnO1xuICAgICAgICB2YXIgZGF0YSA9IHBhcmFtcy5kYXRhIHx8IG51bGw7XG5cblx0XHRuYWphLm1ha2VSZXF1ZXN0KG1ldGhvZCwgcGFyYW1zLnVybCwgZGF0YSwge30pXG5cdFx0XHQudGhlbihwYXJhbXMuc3VjY2Vzcylcblx0XHRcdC5jYXRjaChwYXJhbXMuZXJyb3IpO1xuXHR9O1xuXG5cdGRhdGFHcmlkTG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRuYWphLmxvYWQoKTtcblx0fTtcblxuXHRkYXRhR3JpZFN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkge1xuXHRcdHJldHVybiBuYWphLnVpSGFuZGxlci5zdWJtaXRGb3JtKGZvcm0uZ2V0KDApKTtcblx0fTtcbn0gZWxzZSBpZiAoJC5uZXR0ZSkge1xuXHRkYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uID0gZnVuY3Rpb24gKG5hbWUsIGV4dGVuc2lvbikge1xuXHRcdCQubmV0dGUuZXh0KG5hbWUsIGV4dGVuc2lvbik7XG5cdH07XG5cdGRhdGFHcmlkUmVnaXN0ZXJBamF4Q2FsbCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0XHQkLm5ldHRlLmFqYXgocGFyYW1zKTtcblx0fTtcblx0ZGF0YUdyaWRMb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdCQubmV0dGUubG9hZCgpO1xuXHR9O1xuXHRkYXRhR3JpZFN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkge1xuXHRcdHJldHVybiBmb3JtLnN1Ym1pdCgpO1xuXHR9O1xufSBlbHNlIHtcblx0dGhyb3cgbmV3IEVycm9yKFwiSW5jbHVkZSBOYWphLmpzIG9yIG5ldHRlLmFqYXggZm9yIGRhdGFncmlkcyB0byB3b3JrIVwiKVxufVxuXG5cbnZhciBkYXRhZ3JpZEZpdGxlck11bHRpU2VsZWN0LCBkYXRhZ3JpZEdyb3VwQWN0aW9uTXVsdGlTZWxlY3QsIGRhdGFncmlkU2hpZnRHcm91cFNlbGVjdGlvbiwgZGF0YWdyaWRTb3J0YWJsZSwgZGF0YWdyaWRTb3J0YWJsZVRyZWUsIGdldEV2ZW50RG9tUGF0aCxcblx0aW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZGF0YWdyaWQtY29uZmlybV06bm90KC5hamF4KScsIGZ1bmN0aW9uKGUpIHtcblx0aWYgKCFjb25maXJtKCQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKS5hdHRyKCdkYXRhLWRhdGFncmlkLWNvbmZpcm0nKSkpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cbn0pO1xuXG5pZiAodHlwZW9mIG5hamEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0ZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuY29uZmlybScsIHtcblx0XHRpbnRlcmFjdGlvbjogZnVuY3Rpb24oc2V0dGluZ3MpIHtcblx0XHRcdHZhciBjb25maXJtX21lc3NhZ2U7XG5cdFx0XHRpZiAoc2V0dGluZ3MubmV0dGUpIHtcblx0XHRcdFx0Y29uZmlybV9tZXNzYWdlID0gc2V0dGluZ3MubmV0dGUuZWwuZGF0YSgnZGF0YWdyaWQtY29uZmlybScpO1xuXHRcdFx0XHRpZiAoY29uZmlybV9tZXNzYWdlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbmZpcm0oY29uZmlybV9tZXNzYWdlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9KTtcbn0gZWxzZSB7XG5cdGRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLmNvbmZpcm0nLCB7XG5cdFx0YmVmb3JlOiBmdW5jdGlvbih4aHIsIHNldHRpbmdzKSB7XG5cdFx0XHR2YXIgY29uZmlybV9tZXNzYWdlO1xuXHRcdFx0aWYgKHNldHRpbmdzLm5ldHRlKSB7XG5cdFx0XHRcdGNvbmZpcm1fbWVzc2FnZSA9IHNldHRpbmdzLm5ldHRlLmVsLmRhdGEoJ2RhdGFncmlkLWNvbmZpcm0nKTtcblx0XHRcdFx0aWYgKGNvbmZpcm1fbWVzc2FnZSkge1xuXHRcdFx0XHRcdHJldHVybiBjb25maXJtKGNvbmZpcm1fbWVzc2FnZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fSk7XG59XG5cblxuJChkb2N1bWVudCkub24oJ2NoYW5nZScsICdzZWxlY3RbZGF0YS1hdXRvc3VibWl0LXBlci1wYWdlXScsIGZ1bmN0aW9uKCkge1xuXHR2YXIgYnV0dG9uO1xuXHRidXR0b24gPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9c3VibWl0XScpO1xuXHRpZiAoYnV0dG9uLmxlbmd0aCA9PT0gMCkge1xuXHRcdGJ1dHRvbiA9ICQodGhpcykucGFyZW50KCkuZmluZCgnYnV0dG9uW3R5cGU9c3VibWl0XScpO1xuXHR9XG5cdHJldHVybiBidXR0b24uY2xpY2soKTtcbn0pLm9uKCdjaGFuZ2UnLCAnc2VsZWN0W2RhdGEtYXV0b3N1Ym1pdF0nLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIGRhdGFHcmlkU3VibWl0Rm9ybSgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maXJzdCgpKTtcbn0pLm9uKCdjaGFuZ2UnLCAnaW5wdXRbZGF0YS1hdXRvc3VibWl0XVtkYXRhLWF1dG9zdWJtaXQtY2hhbmdlXScsIGZ1bmN0aW9uKGUpIHtcblx0dmFyICR0aGlzLCBjb2RlO1xuXHRjb2RlID0gZS53aGljaCB8fCBlLmtleUNvZGUgfHwgMDtcblx0Y2xlYXJUaW1lb3V0KHdpbmRvdy5kYXRhZ3JpZF9hdXRvc3VibWl0X3RpbWVyKTtcblx0JHRoaXMgPSAkKHRoaXMpO1xuXHRyZXR1cm4gd2luZG93LmRhdGFncmlkX2F1dG9zdWJtaXRfdGltZXIgPSBzZXRUaW1lb3V0KChmdW5jdGlvbihfdGhpcykge1xuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkYXRhR3JpZFN1Ym1pdEZvcm0oJHRoaXMuY2xvc2VzdCgnZm9ybScpLmZpcnN0KCkpO1xuXHRcdH07XG5cdH0pKHRoaXMpLCAyMDApO1xufSkub24oJ2tleXVwJywgJ2lucHV0W2RhdGEtYXV0b3N1Ym1pdF0nLCBmdW5jdGlvbihlKSB7XG5cdHZhciAkdGhpcywgY29kZTtcblx0Y29kZSA9IGUud2hpY2ggfHwgZS5rZXlDb2RlIHx8IDA7XG5cdGlmICgoY29kZSAhPT0gMTMpICYmICgoY29kZSA+PSA5ICYmIGNvZGUgPD0gNDApIHx8IChjb2RlID49IDExMiAmJiBjb2RlIDw9IDEyMykpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGNsZWFyVGltZW91dCh3aW5kb3cuZGF0YWdyaWRfYXV0b3N1Ym1pdF90aW1lcik7XG5cdCR0aGlzID0gJCh0aGlzKTtcblx0cmV0dXJuIHdpbmRvdy5kYXRhZ3JpZF9hdXRvc3VibWl0X3RpbWVyID0gc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZGF0YUdyaWRTdWJtaXRGb3JtKCR0aGlzLmNsb3Nlc3QoJ2Zvcm0nKS5maXJzdCgpKTtcblx0XHR9O1xuXHR9KSh0aGlzKSwgMjAwKTtcbn0pLm9uKCdrZXlkb3duJywgJy5kYXRhZ3JpZC1pbmxpbmUtZWRpdCBpbnB1dCcsIGZ1bmN0aW9uKGUpIHtcblx0dmFyIGNvZGU7XG5cdGNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZSB8fCAwO1xuXHRpZiAoY29kZSA9PT0gMTMpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRyZXR1cm4gJCh0aGlzKS5jbG9zZXN0KCd0cicpLmZpbmQoJy5jb2wtYWN0aW9uLWlubGluZS1lZGl0IFtuYW1lPVwiaW5saW5lX2VkaXRbc3VibWl0XVwiXScpLmNsaWNrKCk7XG5cdH1cbn0pO1xuXG4kKGRvY3VtZW50KS5vbigna2V5ZG93bicsICdpbnB1dFtkYXRhLWRhdGFncmlkLW1hbnVhbHN1Ym1pdF0nLCBmdW5jdGlvbihlKSB7XG5cdHZhciBjb2RlO1xuXHRjb2RlID0gZS53aGljaCB8fCBlLmtleUNvZGUgfHwgMDtcblx0aWYgKGNvZGUgPT09IDEzKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0cmV0dXJuIGRhdGFHcmlkU3VibWl0Rm9ybSgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maXJzdCgpKTtcblx0fVxufSk7XG5cbmdldEV2ZW50RG9tUGF0aCA9IGZ1bmN0aW9uKGUpIHtcblx0dmFyIG5vZGUsIHBhdGg7XG5cdGlmIChpbmRleE9mLmNhbGwoZSwgcGF0aCkgPj0gMCkge1xuXHRcdHJldHVybiBlLnBhdGg7XG5cdH1cblx0cGF0aCA9IFtdO1xuXHRub2RlID0gZS50YXJnZXQ7XG5cdHdoaWxlIChub2RlICE9PSBkb2N1bWVudC5ib2R5KSB7XG5cdFx0aWYgKG5vZGUgPT09IG51bGwpIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRwYXRoLnB1c2gobm9kZSk7XG5cdFx0bm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0fVxuXHRyZXR1cm4gcGF0aDtcbn07XG5cbmRhdGFncmlkU2hpZnRHcm91cFNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgbGFzdF9jaGVja2JveDtcblx0bGFzdF9jaGVja2JveCA9IG51bGw7XG5cdHJldHVybiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHR2YXIgY2hlY2tib3hlc19yb3dzLCBjdXJyZW50X2NoZWNrYm94X3JvdywgZWwsIGV2ZW50LCBpLCBpZSwgaW5wdXQsIGosIGssIGxhc3RfY2hlY2tib3hfcm93LCBsYXN0X2NoZWNrYm94X3Rib2R5LCBsZW4sIGxlbjEsIGxlbjIsIHJlZiwgcmVmMSwgcmVzdWx0cywgcm93LCByb3dzO1xuXHRcdHJlZiA9IGdldEV2ZW50RG9tUGF0aChlKTtcblx0XHRmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGVsID0gcmVmW2ldO1xuXHRcdFx0aWYgKCQoZWwpLmlzKCcuY29sLWNoZWNrYm94JykgJiYgbGFzdF9jaGVja2JveCAmJiBlLnNoaWZ0S2V5KSB7XG5cdFx0XHRcdGN1cnJlbnRfY2hlY2tib3hfcm93ID0gJChlbCkuY2xvc2VzdCgndHInKTtcblx0XHRcdFx0bGFzdF9jaGVja2JveF9yb3cgPSBsYXN0X2NoZWNrYm94LmNsb3Nlc3QoJ3RyJyk7XG5cdFx0XHRcdGxhc3RfY2hlY2tib3hfdGJvZHkgPSBsYXN0X2NoZWNrYm94X3Jvdy5jbG9zZXN0KCd0Ym9keScpO1xuXHRcdFx0XHRjaGVja2JveGVzX3Jvd3MgPSBsYXN0X2NoZWNrYm94X3Rib2R5LmZpbmQoJ3RyJykudG9BcnJheSgpO1xuXHRcdFx0XHRpZiAoY3VycmVudF9jaGVja2JveF9yb3cuaW5kZXgoKSA+IGxhc3RfY2hlY2tib3hfcm93LmluZGV4KCkpIHtcblx0XHRcdFx0XHRyb3dzID0gY2hlY2tib3hlc19yb3dzLnNsaWNlKGxhc3RfY2hlY2tib3hfcm93LmluZGV4KCksIGN1cnJlbnRfY2hlY2tib3hfcm93LmluZGV4KCkpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRfY2hlY2tib3hfcm93LmluZGV4KCkgPCBsYXN0X2NoZWNrYm94X3Jvdy5pbmRleCgpKSB7XG5cdFx0XHRcdFx0cm93cyA9IGNoZWNrYm94ZXNfcm93cy5zbGljZShjdXJyZW50X2NoZWNrYm94X3Jvdy5pbmRleCgpICsgMSwgbGFzdF9jaGVja2JveF9yb3cuaW5kZXgoKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFyb3dzKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvciAoaiA9IDAsIGxlbjEgPSByb3dzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHRcdFx0XHRcdHJvdyA9IHJvd3Nbal07XG5cdFx0XHRcdFx0aW5wdXQgPSAkKHJvdykuZmluZCgnLmNvbC1jaGVja2JveCBpbnB1dFt0eXBlPWNoZWNrYm94XScpWzBdO1xuXHRcdFx0XHRcdGlmIChpbnB1dCkge1xuXHRcdFx0XHRcdFx0aW5wdXQuY2hlY2tlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRpZSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFIFwiKTtcblx0XHRcdFx0XHRcdGlmIChpZSkge1xuXHRcdFx0XHRcdFx0XHRldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5pbml0RXZlbnQoJ2NoYW5nZScsIHRydWUsIHRydWUpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScsIHtcblx0XHRcdFx0XHRcdFx0XHQnYnViYmxlcyc6IHRydWVcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmVmMSA9IGdldEV2ZW50RG9tUGF0aChlKTtcblx0XHRyZXN1bHRzID0gW107XG5cdFx0Zm9yIChrID0gMCwgbGVuMiA9IHJlZjEubGVuZ3RoOyBrIDwgbGVuMjsgaysrKSB7XG5cdFx0XHRlbCA9IHJlZjFba107XG5cdFx0XHRpZiAoJChlbCkuaXMoJy5jb2wtY2hlY2tib3gnKSkge1xuXHRcdFx0XHRyZXN1bHRzLnB1c2gobGFzdF9jaGVja2JveCA9ICQoZWwpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdHMucHVzaCh2b2lkIDApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fSk7XG59O1xuXG5kYXRhZ3JpZFNoaWZ0R3JvdXBTZWxlY3Rpb24oKTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuXHR2YXIgYnV0dG9ucywgY2hlY2tlZF9pbnB1dHMsIGNvdW50ZXIsIGV2ZW50LCBncmlkLCBpLCBpZSwgaW5wdXQsIGlucHV0cywgbGVuLCByZXN1bHRzLCBzZWxlY3QsIHRvdGFsO1xuXHRncmlkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrJyk7XG5cdGlmIChncmlkKSB7XG5cdFx0Y2hlY2tlZF9pbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtkYXRhLWNoZWNrLWFsbC0nICsgZ3JpZCArICddOmNoZWNrZWQnKTtcblx0XHRzZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0YWdyaWQtJyArIGdyaWQgKyAnIHNlbGVjdFtuYW1lPVwiZ3JvdXBfYWN0aW9uW2dyb3VwX2FjdGlvbl1cIl0nKTtcblx0XHRidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGFncmlkLScgKyBncmlkICsgJyBpbnB1dFt0eXBlPVwic3VibWl0XCJdJyk7XG5cdFx0aWYgKGJ1dHRvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGFncmlkLScgKyBncmlkICsgJyBidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuXHRcdH1cblx0XHRjb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGFncmlkLScgKyBncmlkICsgJyAuZGF0YWdyaWQtc2VsZWN0ZWQtcm93cy1jb3VudCcpO1xuXG5cdFx0aWYgKGNoZWNrZWRfaW5wdXRzLmxlbmd0aCkge1xuXHRcdFx0aWYgKGJ1dHRvbnMpIHtcblx0XHRcdFx0YnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidXR0b24pIHtcblx0XHRcdFx0XHRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2VsZWN0KSB7XG5cdFx0XHRcdHNlbGVjdC5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dG90YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtkYXRhLWNoZWNrLWFsbC0nICsgZ3JpZCArICddJykubGVuZ3RoO1xuXHRcdFx0aWYgKGNvdW50ZXIpIHtcblx0XHRcdFx0Y291bnRlci5pbm5lckhUTUwgPSBjaGVja2VkX2lucHV0cy5sZW5ndGggKyAnLycgKyB0b3RhbDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGJ1dHRvbnMpIHtcblx0XHRcdFx0YnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidXR0b24pIHtcblx0XHRcdFx0XHRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGlmIChzZWxlY3QpIHtcblx0XHRcdFx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0c2VsZWN0LnZhbHVlID0gXCJcIjtcblx0XHRcdH1cblx0XHRcdGlmIChjb3VudGVyKSB7XG5cdFx0XHRcdGNvdW50ZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWUgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSBcIik7XG5cdFx0aWYgKGllKSB7XG5cdFx0XHRldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdFx0ZXZlbnQuaW5pdEV2ZW50KCdjaGFuZ2UnLCB0cnVlLCB0cnVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScsIHtcblx0XHRcdFx0J2J1YmJsZXMnOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKHNlbGVjdCkge1xuXHRcdFx0c2VsZWN0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHRcdH1cblx0fVxuXHRncmlkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrLWFsbCcpO1xuXHRpZiAoZ3JpZCkge1xuXHRcdGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Y2hlY2tib3hdW2RhdGEtY2hlY2stYWxsLScgKyBncmlkICsgJ10nKTtcblx0XHRyZXN1bHRzID0gW107XG5cdFx0Zm9yIChpID0gMCwgbGVuID0gaW5wdXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpbnB1dCA9IGlucHV0c1tpXTtcblx0XHRcdGlucHV0LmNoZWNrZWQgPSBlLnRhcmdldC5jaGVja2VkO1xuXHRcdFx0aWUgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSBcIik7XG5cdFx0XHRpZiAoaWUpIHtcblx0XHRcdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0XHRcdFx0ZXZlbnQuaW5pdEV2ZW50KCdjaGFuZ2UnLCB0cnVlLCB0cnVlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7XG5cdFx0XHRcdFx0J2J1YmJsZXMnOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmVzdWx0cy5wdXNoKGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cbn0pO1xuXG5cbndpbmRvdy5kYXRhZ3JpZFNlcmlhbGl6ZVVybCA9IGZ1bmN0aW9uKG9iaiwgcHJlZml4KSB7XG52YXIgc3RyID0gW107XG5mb3IodmFyIHAgaW4gb2JqKSB7XG5cdGlmIChvYmouaGFzT3duUHJvcGVydHkocCkpIHtcblx0XHR2YXIgayA9IHByZWZpeCA/IHByZWZpeCArIFwiW1wiICsgcCArIFwiXVwiIDogcCwgdiA9IG9ialtwXTtcblx0XHRpZiAodiAhPT0gbnVsbCAmJiB2ICE9PSBcIlwiKSB7XG5cdFx0XHRpZiAodHlwZW9mIHYgPT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHR2YXIgciA9IHdpbmRvdy5kYXRhZ3JpZFNlcmlhbGl6ZVVybCh2LCBrKTtcblx0XHRcdFx0XHRpZiAocikge1xuXHRcdFx0XHRcdFx0c3RyLnB1c2gocik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodikpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxucmV0dXJuIHN0ci5qb2luKFwiJlwiKTtcbn1cbjtcblxuZGF0YWdyaWRTb3J0YWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mICQuZm4uc29ydGFibGUgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHJldHVybiAkKCcuZGF0YWdyaWQgW2RhdGEtc29ydGFibGVdJykuc29ydGFibGUoe1xuXHRcdGhhbmRsZTogJy5oYW5kbGUtc29ydCcsXG5cdFx0aXRlbXM6ICd0cicsXG5cdFx0YXhpczogJ3knLFxuXHRcdHVwZGF0ZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG5cdFx0XHR2YXIgY29tcG9uZW50X3ByZWZpeCwgZGF0YSwgaXRlbV9pZCwgbmV4dF9pZCwgcHJldl9pZCwgcm93LCB1cmw7XG5cdFx0XHRyb3cgPSB1aS5pdGVtLmNsb3Nlc3QoJ3RyW2RhdGEtaWRdJyk7XG5cdFx0XHRpdGVtX2lkID0gcm93LmRhdGEoJ2lkJyk7XG5cdFx0XHRwcmV2X2lkID0gbnVsbDtcblx0XHRcdG5leHRfaWQgPSBudWxsO1xuXHRcdFx0aWYgKHJvdy5wcmV2KCkubGVuZ3RoKSB7XG5cdFx0XHRcdHByZXZfaWQgPSByb3cucHJldigpLmRhdGEoJ2lkJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocm93Lm5leHQoKS5sZW5ndGgpIHtcblx0XHRcdFx0bmV4dF9pZCA9IHJvdy5uZXh0KCkuZGF0YSgnaWQnKTtcblx0XHRcdH1cblx0XHRcdHVybCA9ICQodGhpcykuZGF0YSgnc29ydGFibGUtdXJsJyk7XG5cdFx0XHRkYXRhID0ge307XG5cdFx0XHRjb21wb25lbnRfcHJlZml4ID0gcm93LmNsb3Nlc3QoJy5kYXRhZ3JpZCcpLmZpbmQoJ3Rib2R5JykuYXR0cignZGF0YS1zb3J0YWJsZS1wYXJlbnQtcGF0aCcpO1xuXHRcdFx0ZGF0YVsoY29tcG9uZW50X3ByZWZpeCArICctaXRlbV9pZCcpLnJlcGxhY2UoL14tLywgJycpXSA9IGl0ZW1faWQ7XG5cdFx0XHRpZiAocHJldl9pZCAhPT0gbnVsbCkge1xuXHRcdFx0XHRkYXRhWyhjb21wb25lbnRfcHJlZml4ICsgJy1wcmV2X2lkJykucmVwbGFjZSgvXi0vLCAnJyldID0gcHJldl9pZDtcblx0XHRcdH1cblx0XHRcdGlmIChuZXh0X2lkICE9PSBudWxsKSB7XG5cdFx0XHRcdGRhdGFbKGNvbXBvbmVudF9wcmVmaXggKyAnLW5leHRfaWQnKS5yZXBsYWNlKC9eLS8sICcnKV0gPSBuZXh0X2lkO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRhdGFHcmlkUmVnaXN0ZXJBamF4Q2FsbCh7XG5cdFx0XHRcdHR5cGU6ICdHRVQnLFxuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXHRcdFx0XHRcdHJldHVybiBhbGVydChqcVhIUi5zdGF0dXNUZXh0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRoZWxwZXI6IGZ1bmN0aW9uKGUsIHVpKSB7XG5cdFx0XHR1aS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkKHRoaXMpLndpZHRoKCQodGhpcykud2lkdGgoKSk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB1aTtcblx0XHR9XG5cdH0pO1xufTtcblxuJChmdW5jdGlvbigpIHtcblx0cmV0dXJuIGRhdGFncmlkU29ydGFibGUoKTtcbn0pO1xuXG5pZiAodHlwZW9mIGRhdGFncmlkU29ydGFibGVUcmVlID09PSAndW5kZWZpbmVkJykge1xuXHRkYXRhZ3JpZFNvcnRhYmxlVHJlZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0eXBlb2YgJCgnLmRhdGFncmlkLXRyZWUtaXRlbS1jaGlsZHJlbicpLnNvcnRhYmxlID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRyZXR1cm4gJCgnLmRhdGFncmlkLXRyZWUtaXRlbS1jaGlsZHJlbicpLnNvcnRhYmxlKHtcblx0XHRcdGhhbmRsZTogJy5oYW5kbGUtc29ydCcsXG5cdFx0XHRpdGVtczogJy5kYXRhZ3JpZC10cmVlLWl0ZW06bm90KC5kYXRhZ3JpZC10cmVlLWhlYWRlciknLFxuXHRcdFx0dG9sZXJhbmNlRWxlbWVudDogJz4gLmRhdGFncmlkLXRyZWUtaXRlbS1jb250ZW50Jyxcblx0XHRcdGNvbm5lY3RXaXRoOiAnLmRhdGFncmlkLXRyZWUtaXRlbS1jaGlsZHJlbicsXG5cdFx0XHR1cGRhdGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuXHRcdFx0XHR2YXIgY29tcG9uZW50X3ByZWZpeCwgZGF0YSwgaXRlbV9pZCwgbmV4dF9pZCwgcGFyZW50LCBwYXJlbnRfaWQsIHByZXZfaWQsIHJvdywgdXJsO1xuXHRcdFx0XHQkKCcudG9nZ2xlLXRyZWUtdG8tZGVsZXRlJykucmVtb3ZlKCk7XG5cdFx0XHRcdHJvdyA9IHVpLml0ZW0uY2xvc2VzdCgnLmRhdGFncmlkLXRyZWUtaXRlbVtkYXRhLWlkXScpO1xuXHRcdFx0XHRpdGVtX2lkID0gcm93LmRhdGEoJ2lkJyk7XG5cdFx0XHRcdHByZXZfaWQgPSBudWxsO1xuXHRcdFx0XHRuZXh0X2lkID0gbnVsbDtcblx0XHRcdFx0cGFyZW50X2lkID0gbnVsbDtcblx0XHRcdFx0aWYgKHJvdy5wcmV2KCkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0cHJldl9pZCA9IHJvdy5wcmV2KCkuZGF0YSgnaWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocm93Lm5leHQoKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRuZXh0X2lkID0gcm93Lm5leHQoKS5kYXRhKCdpZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBhcmVudCA9IHJvdy5wYXJlbnQoKS5jbG9zZXN0KCcuZGF0YWdyaWQtdHJlZS1pdGVtJyk7XG5cdFx0XHRcdGlmIChwYXJlbnQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0cGFyZW50LmZpbmQoJy5kYXRhZ3JpZC10cmVlLWl0ZW0tY2hpbGRyZW4nKS5maXJzdCgpLmNzcyh7XG5cdFx0XHRcdFx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cGFyZW50LmFkZENsYXNzKCdoYXMtY2hpbGRyZW4nKTtcblx0XHRcdFx0XHRwYXJlbnRfaWQgPSBwYXJlbnQuZGF0YSgnaWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR1cmwgPSAkKHRoaXMpLmRhdGEoJ3NvcnRhYmxlLXVybCcpO1xuXHRcdFx0XHRpZiAoIXVybCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRwYXJlbnQuZmluZCgnW2RhdGEtdG9nZ2xlLXRyZWVdJykuZmlyc3QoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHRcdGNvbXBvbmVudF9wcmVmaXggPSByb3cuY2xvc2VzdCgnLmRhdGFncmlkLXRyZWUnKS5hdHRyKCdkYXRhLXNvcnRhYmxlLXBhcmVudC1wYXRoJyk7XG5cdFx0XHRcdGRhdGEgPSB7fTtcblx0XHRcdFx0ZGF0YVsoY29tcG9uZW50X3ByZWZpeCArICctaXRlbV9pZCcpLnJlcGxhY2UoL14tLywgJycpXSA9IGl0ZW1faWQ7XG5cdFx0XHRcdGlmIChwcmV2X2lkICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0ZGF0YVsoY29tcG9uZW50X3ByZWZpeCArICctcHJldl9pZCcpLnJlcGxhY2UoL14tLywgJycpXSA9IHByZXZfaWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5leHRfaWQgIT09IG51bGwpIHtcblx0XHRcdFx0XHRkYXRhWyhjb21wb25lbnRfcHJlZml4ICsgJy1uZXh0X2lkJykucmVwbGFjZSgvXi0vLCAnJyldID0gbmV4dF9pZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhWyhjb21wb25lbnRfcHJlZml4ICsgJy1wYXJlbnRfaWQnKS5yZXBsYWNlKC9eLS8sICcnKV0gPSBwYXJlbnRfaWQ7XG5cdFx0XHRcdHJldHVybiBkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwoe1xuXHRcdFx0XHRcdHR5cGU6ICdHRVQnLFxuXHRcdFx0XHRcdHVybDogdXJsLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXHRcdFx0XHRcdFx0aWYgKGVycm9yVGhyb3duICE9PSAnYWJvcnQnKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBhbGVydChqcVhIUi5zdGF0dXNUZXh0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuXHRcdFx0XHRyZXR1cm4gJCgnLnRvZ2dsZS10cmVlLXRvLWRlbGV0ZScpLnJlbW92ZUNsYXNzKCd0b2dnbGUtdHJlZS10by1kZWxldGUnKTtcblx0XHRcdH0sXG5cdFx0XHRzdGFydDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG5cdFx0XHRcdHZhciBwYXJlbnQ7XG5cdFx0XHRcdHBhcmVudCA9IHVpLml0ZW0ucGFyZW50KCkuY2xvc2VzdCgnLmRhdGFncmlkLXRyZWUtaXRlbScpO1xuXHRcdFx0XHRpZiAocGFyZW50Lmxlbmd0aCkge1xuXHRcdFx0XHRcdGlmIChwYXJlbnQuZmluZCgnLmRhdGFncmlkLXRyZWUtaXRlbScpLmxlbmd0aCA9PT0gMikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhcmVudC5maW5kKCdbZGF0YS10b2dnbGUtdHJlZV0nKS5hZGRDbGFzcygndG9nZ2xlLXRyZWUtdG8tZGVsZXRlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG59XG5cbiQoZnVuY3Rpb24oKSB7XG5cdHJldHVybiBkYXRhZ3JpZFNvcnRhYmxlVHJlZSgpO1xufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLmhhcHB5Jywge1xuXHRzdWNjZXNzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYywgY2hlY2tlZF9yb3dzLCBjbGFzc19zZWxlY3RvciwgY2xhc3NlcywgZXZlbnQsIGdyaWQsIGdyaWRzLCBpLCBpZSwgaW5wdXQsIGosIGxlbiwgbGVuMSwgcmVzdWx0cztcblx0XHRpZiAod2luZG93LmhhcHB5KSB7XG5cdFx0XHR3aW5kb3cuaGFwcHkucmVzZXQoKTtcblx0XHR9XG5cdFx0Z3JpZHMgPSAkKCcuZGF0YWdyaWQnKTtcblx0XHRyZXN1bHRzID0gW107XG5cdFx0Zm9yIChpID0gMCwgbGVuID0gZ3JpZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGdyaWQgPSBncmlkc1tpXTtcblx0XHRcdGNsYXNzZXMgPSBncmlkLmNsYXNzTGlzdDtcblx0XHRcdGNsYXNzX3NlbGVjdG9yID0gJyc7XG5cdFx0XHRmb3IgKGogPSAwLCBsZW4xID0gY2xhc3Nlcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0XHRcdFx0YyA9IGNsYXNzZXNbal07XG5cdFx0XHRcdGNsYXNzX3NlbGVjdG9yID0gY2xhc3Nfc2VsZWN0b3IgKyAnLicgKyBjO1xuXHRcdFx0fVxuXHRcdFx0Y2hlY2tlZF9yb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjbGFzc19zZWxlY3RvciArICcgJyArICdpbnB1dFtkYXRhLWNoZWNrXTpjaGVja2VkJyk7XG5cdFx0XHRpZiAoY2hlY2tlZF9yb3dzLmxlbmd0aCA9PT0gMSAmJiBjaGVja2VkX3Jvd3NbMF0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICd0b2dnbGUtYWxsJykge1xuXHRcdFx0XHRpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3Nfc2VsZWN0b3IgKyAnIGlucHV0W25hbWU9dG9nZ2xlLWFsbF0nKTtcblx0XHRcdFx0aWYgKGlucHV0KSB7XG5cdFx0XHRcdFx0aW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGllID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUUgXCIpO1xuXHRcdFx0XHRcdGlmIChpZSkge1xuXHRcdFx0XHRcdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0XHRcdFx0XHRcdGV2ZW50LmluaXRFdmVudCgnY2hhbmdlJywgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7XG5cdFx0XHRcdFx0XHRcdCdidWJibGVzJzogdHJ1ZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaChpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzdWx0cy5wdXNoKHZvaWQgMCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdHMucHVzaCh2b2lkIDApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLnNvcnRhYmxlJywge1xuXHRzdWNjZXNzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZGF0YWdyaWRTb3J0YWJsZSgpO1xuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuZm9ybXMnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkKCcuZGF0YWdyaWQnKS5maW5kKCdmb3JtJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB3aW5kb3cuTmV0dGUuaW5pdEZvcm0odGhpcyk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC51cmwnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgaG9zdCwgcGF0aCwgcXVlcnksIHVybDtcblx0XHRpZiAocGF5bG9hZC5fZGF0YWdyaWRfdXJsKSB7XG5cdFx0XHRpZiAod2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG5cdFx0XHRcdGhvc3QgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdDtcblx0XHRcdFx0cGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblx0XHRcdFx0cXVlcnkgPSB3aW5kb3cuZGF0YWdyaWRTZXJpYWxpemVVcmwocGF5bG9hZC5zdGF0ZSkucmVwbGFjZSgvJiskL2dtLCAnJyk7XG5cdFx0XHRcdGlmIChxdWVyeSkge1xuXHRcdFx0XHRcdHVybCA9IGhvc3QgKyBwYXRoICsgXCI/XCIgKyBxdWVyeS5yZXBsYWNlKC9cXCYqJC8sICcnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR1cmwgPSBob3N0ICsgcGF0aDtcblx0XHRcdFx0fVxuXHRcdFx0XHR1cmwgKz0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRcdGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiAhPT0gdXJsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG5cdFx0XHRcdFx0XHRwYXRoOiB1cmxcblx0XHRcdFx0XHR9LCAnJywgdXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFncmlkLnNvcnQnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgaHJlZiwga2V5LCByZWYsIHJlc3VsdHM7XG5cdFx0aWYgKHBheWxvYWQuX2RhdGFncmlkX3NvcnQpIHtcblx0XHRcdHJlZiA9IHBheWxvYWQuX2RhdGFncmlkX3NvcnQ7XG5cdFx0XHRyZXN1bHRzID0gW107XG5cdFx0XHRmb3IgKGtleSBpbiByZWYpIHtcblx0XHRcdFx0aHJlZiA9IHJlZltrZXldO1xuXHRcdFx0XHRyZXN1bHRzLnB1c2goJCgnI2RhdGFncmlkLXNvcnQtJyArIGtleSkuYXR0cignaHJlZicsIGhyZWYpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH1cblx0fVxufSk7XG5cbmRhdGFHcmlkUmVnaXN0ZXJFeHRlbnNpb24oJ2RhdGFyZ2lkLml0ZW1fZGV0YWlsJywge1xuXHRiZWZvcmU6IGZ1bmN0aW9uKHhociwgc2V0dGluZ3MpIHtcblx0XHR2YXIgaWQsIHJvd19kZXRhaWwsIGdyaWRfZnVsbG5hbWU7XG5cdFx0aWYgKHNldHRpbmdzLm5ldHRlICYmIHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbCcpKSB7XG5cdFx0XHRpZCA9IHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbCcpO1xuXHRcdFx0Z3JpZF9mdWxsbmFtZSA9IHNldHRpbmdzLm5ldHRlLmVsLmF0dHIoJ2RhdGEtdG9nZ2xlLWRldGFpbC1ncmlkLWZ1bGxuYW1lJyk7XG5cdFx0XHRyb3dfZGV0YWlsID0gJCgnLml0ZW0tZGV0YWlsLScgKyBncmlkX2Z1bGxuYW1lICsgJy1pZC0nICsgaWQpO1xuXHRcdFx0aWYgKHJvd19kZXRhaWwuaGFzQ2xhc3MoJ2xvYWRlZCcpKSB7XG5cdFx0XHRcdGlmICghcm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJvd19kZXRhaWwucmVtb3ZlQ2xhc3MoJ3RvZ2dsZWQnKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocm93X2RldGFpbC5oYXNDbGFzcygndG9nZ2xlZCcpKSB7XG5cdFx0XHRcdFx0cm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLnNsaWRlVG9nZ2xlKCdmYXN0JywgKGZ1bmN0aW9uKF90aGlzKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByb3dfZGV0YWlsLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0pKHRoaXMpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyb3dfZGV0YWlsLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG5cdFx0XHRcdFx0cm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLnNsaWRlVG9nZ2xlKCdmYXN0Jyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHJvd19kZXRhaWwuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBpZCwgcm93X2RldGFpbCwgZ3JpZF9mdWxsbmFtZTtcblx0XHRpZiAocGF5bG9hZC5fZGF0YWdyaWRfdG9nZ2xlX2RldGFpbCAmJiBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKSB7XG5cdFx0XHRpZCA9IHBheWxvYWQuX2RhdGFncmlkX3RvZ2dsZV9kZXRhaWw7XG5cdFx0XHRncmlkX2Z1bGxuYW1lID0gcGF5bG9hZC5fZGF0YWdyaWRfbmFtZTtcblx0XHRcdHJvd19kZXRhaWwgPSAkKCcuaXRlbS1kZXRhaWwtJyArIGdyaWRfZnVsbG5hbWUgKyAnLWlkLScgKyBpZCk7XG5cdFx0XHRyb3dfZGV0YWlsLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG5cdFx0XHRyZXR1cm4gcm93X2RldGFpbC5maW5kKCcuaXRlbS1kZXRhaWwtY29udGVudCcpLnNsaWRlVG9nZ2xlKCdmYXN0Jyk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQudHJlZScsIHtcblx0YmVmb3JlOiBmdW5jdGlvbih4aHIsIHNldHRpbmdzKSB7XG5cdFx0dmFyIGNoaWxkcmVuX2Jsb2NrO1xuXHRcdGlmIChzZXR0aW5ncy5uZXR0ZSAmJiBzZXR0aW5ncy5uZXR0ZS5lbC5hdHRyKCdkYXRhLXRvZ2dsZS10cmVlJykpIHtcblx0XHRcdHNldHRpbmdzLm5ldHRlLmVsLnRvZ2dsZUNsYXNzKCd0b2dnbGUtcm90YXRlJyk7XG5cdFx0XHRjaGlsZHJlbl9ibG9jayA9IHNldHRpbmdzLm5ldHRlLmVsLmNsb3Nlc3QoJy5kYXRhZ3JpZC10cmVlLWl0ZW0nKS5maW5kKCcuZGF0YWdyaWQtdHJlZS1pdGVtLWNoaWxkcmVuJykuZmlyc3QoKTtcblx0XHRcdGlmIChjaGlsZHJlbl9ibG9jay5oYXNDbGFzcygnbG9hZGVkJykpIHtcblx0XHRcdFx0Y2hpbGRyZW5fYmxvY2suc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBjaGlsZHJlbl9ibG9jaywgY29udGVudCwgaWQsIG5hbWUsIHJlZiwgc25pcHBldCwgdGVtcGxhdGU7XG5cdFx0aWYgKHBheWxvYWQuX2RhdGFncmlkX3RyZWUpIHtcblx0XHRcdGlkID0gcGF5bG9hZC5fZGF0YWdyaWRfdHJlZTtcblx0XHRcdGNoaWxkcmVuX2Jsb2NrID0gJCgnLmRhdGFncmlkLXRyZWUtaXRlbVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpLmZpbmQoJy5kYXRhZ3JpZC10cmVlLWl0ZW0tY2hpbGRyZW4nKS5maXJzdCgpO1xuXHRcdFx0Y2hpbGRyZW5fYmxvY2suYWRkQ2xhc3MoJ2xvYWRlZCcpO1xuXHRcdFx0cmVmID0gcGF5bG9hZC5zbmlwcGV0cztcblx0XHRcdGZvciAobmFtZSBpbiByZWYpIHtcblx0XHRcdFx0c25pcHBldCA9IHJlZltuYW1lXTtcblx0XHRcdFx0Y29udGVudCA9ICQoc25pcHBldCk7XG5cdFx0XHRcdHRlbXBsYXRlID0gJCgnPGRpdiBjbGFzcz1cImRhdGFncmlkLXRyZWUtaXRlbVwiIGlkPVwiJyArIG5hbWUgKyAnXCI+Jyk7XG5cdFx0XHRcdHRlbXBsYXRlLmF0dHIoJ2RhdGEtaWQnLCBjb250ZW50LmF0dHIoJ2RhdGEtaWQnKSk7XG5cdFx0XHRcdHRlbXBsYXRlLmFwcGVuZChjb250ZW50KTtcblx0XHRcdFx0aWYgKGNvbnRlbnQuZGF0YSgnaGFzLWNoaWxkcmVuJykpIHtcblx0XHRcdFx0XHR0ZW1wbGF0ZS5hZGRDbGFzcygnaGFzLWNoaWxkcmVuJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2hpbGRyZW5fYmxvY2suYXBwZW5kKHRlbXBsYXRlKTtcblx0XHRcdH1cblx0XHRcdGNoaWxkcmVuX2Jsb2NrLmFkZENsYXNzKCdsb2FkZWQnKTtcblx0XHRcdGNoaWxkcmVuX2Jsb2NrLnNsaWRlVG9nZ2xlKCdmYXN0Jyk7XG5cdFx0XHRkYXRhR3JpZExvYWQoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGRhdGFncmlkU29ydGFibGVUcmVlKCk7XG5cdH1cbn0pO1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZGF0YWdyaWQtZWRpdGFibGUtdXJsXScsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdHZhciBhdHRyX25hbWUsIGF0dHJfdmFsdWUsIGF0dHJzLCBjZWxsLCBjZWxsVmFsdWUsIGNlbGxfaGVpZ2h0LCBjZWxsX2xpbmVzLCBjZWxsX3BhZGRpbmcsIGlucHV0LCBsaW5lX2hlaWdodCwgc3VibWl0LCB2YWx1ZVRvRWRpdDtcblx0Y2VsbCA9ICQodGhpcyk7XG5cdGlmIChldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKGNlbGwuaGFzQ2xhc3MoJ2RhdGFncmlkLWlubGluZS1lZGl0JykpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKCFjZWxsLmhhc0NsYXNzKCdlZGl0aW5nJykpIHtcblx0XHRjZWxsLmFkZENsYXNzKCdlZGl0aW5nJyk7XG5cdFx0Y2VsbFZhbHVlID0gY2VsbC5odG1sKCkudHJpbSgpLnJlcGxhY2UoJzxicj4nLCAnXFxuJyk7XG5cdFx0aWYgKGNlbGwuYXR0cignZGF0YS1kYXRhZ3JpZC1lZGl0YWJsZS12YWx1ZScpKSB7XG5cdFx0XHR2YWx1ZVRvRWRpdCA9IGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtdmFsdWUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFsdWVUb0VkaXQgPSBjZWxsVmFsdWU7XG5cdFx0fVxuXHRcdGNlbGwuZGF0YSgnb3JpZ2luYWxWYWx1ZScsIGNlbGxWYWx1ZSk7XG5cdFx0Y2VsbC5kYXRhKCd2YWx1ZVRvRWRpdCcsIHZhbHVlVG9FZGl0KTtcblx0XHRpZiAoY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS10eXBlJykgPT09ICd0ZXh0YXJlYScpIHtcblx0XHRcdGlucHV0ID0gJCgnPHRleHRhcmVhPicgKyB2YWx1ZVRvRWRpdCArICc8L3RleHRhcmVhPicpO1xuXHRcdFx0Y2VsbF9wYWRkaW5nID0gcGFyc2VJbnQoY2VsbC5jc3MoJ3BhZGRpbmcnKS5yZXBsYWNlKC9bXi1cXGRcXC5dL2csICcnKSwgMTApO1xuXHRcdFx0Y2VsbF9oZWlnaHQgPSBjZWxsLm91dGVySGVpZ2h0KCk7XG5cdFx0XHRsaW5lX2hlaWdodCA9IE1hdGgucm91bmQocGFyc2VGbG9hdChjZWxsLmNzcygnbGluZS1oZWlnaHQnKSkpO1xuXHRcdFx0Y2VsbF9saW5lcyA9IChjZWxsX2hlaWdodCAtICgyICogY2VsbF9wYWRkaW5nKSkgLyBsaW5lX2hlaWdodDtcblx0XHRcdGlucHV0LmF0dHIoJ3Jvd3MnLCBNYXRoLnJvdW5kKGNlbGxfbGluZXMpKTtcblx0XHR9IGVsc2UgaWYgKGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtdHlwZScpID09PSAnc2VsZWN0Jykge1xuXHRcdFx0aW5wdXQgPSAkKGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtZWxlbWVudCcpKTtcblx0XHRcdGlucHV0LmZpbmQoXCJvcHRpb25bdmFsdWU9J1wiICsgdmFsdWVUb0VkaXQgKyBcIiddXCIpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0ID0gJCgnPGlucHV0IHR5cGU9XCInICsgY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS10eXBlJykgKyAnXCI+Jyk7XG5cdFx0XHRpbnB1dC52YWwodmFsdWVUb0VkaXQpO1xuXHRcdH1cblx0XHRhdHRycyA9IGNlbGwuZGF0YSgnZGF0YWdyaWQtZWRpdGFibGUtYXR0cnMnKTtcblx0XHRmb3IgKGF0dHJfbmFtZSBpbiBhdHRycykge1xuXHRcdFx0YXR0cl92YWx1ZSA9IGF0dHJzW2F0dHJfbmFtZV07XG5cdFx0XHRpbnB1dC5hdHRyKGF0dHJfbmFtZSwgYXR0cl92YWx1ZSk7XG5cdFx0fVxuXHRcdGNlbGwucmVtb3ZlQ2xhc3MoJ2VkaXRlZCcpO1xuXHRcdGNlbGwuaHRtbChpbnB1dCk7XG5cdFx0c3VibWl0ID0gZnVuY3Rpb24oY2VsbCwgZWwpIHtcblx0XHRcdHZhciB2YWx1ZTtcblx0XHRcdHZhbHVlID0gZWwudmFsKCk7XG5cdFx0XHRpZiAodmFsdWUgIT09IGNlbGwuZGF0YSgndmFsdWVUb0VkaXQnKSkge1xuXHRcdFx0XHRkYXRhR3JpZFJlZ2lzdGVyQWpheENhbGwoe1xuXHRcdFx0XHRcdHVybDogY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS11cmwnKSxcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWVcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHRpZiAoY2VsbC5kYXRhKCdkYXRhZ3JpZC1lZGl0YWJsZS10eXBlJykgPT09ICdzZWxlY3QnKSB7XG5cdFx0XHRcdFx0XHRcdGNlbGwuaHRtbChpbnB1dC5maW5kKFwib3B0aW9uW3ZhbHVlPSdcIiArIHZhbHVlICsgXCInXVwiKS5odG1sKCkpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBheWxvYWQuX2RhdGFncmlkX2VkaXRhYmxlX25ld192YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gcGF5bG9hZC5fZGF0YWdyaWRfZWRpdGFibGVfbmV3X3ZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGNlbGwuaHRtbCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2VsbC5hZGRDbGFzcygnZWRpdGVkJyk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRjZWxsLmh0bWwoY2VsbC5kYXRhKCdvcmlnaW5hbFZhbHVlJykpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNlbGwuYWRkQ2xhc3MoJ2VkaXRlZC1lcnJvcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjZWxsLmh0bWwoY2VsbC5kYXRhKCdvcmlnaW5hbFZhbHVlJykpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBjZWxsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XG5cdFx0XHR9LCAxMjAwKTtcblx0XHR9O1xuXHRcdGNlbGwuZmluZCgnaW5wdXQsdGV4dGFyZWEsc2VsZWN0JykuZm9jdXMoKS5vbignYmx1cicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHN1Ym1pdChjZWxsLCAkKHRoaXMpKTtcblx0XHR9KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdGlmIChjZWxsLmRhdGEoJ2RhdGFncmlkLWVkaXRhYmxlLXR5cGUnKSAhPT0gJ3RleHRhcmVhJykge1xuXHRcdFx0XHRpZiAoZS53aGljaCA9PT0gMTMpIHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyZXR1cm4gc3VibWl0KGNlbGwsICQodGhpcykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoZS53aGljaCA9PT0gMjcpIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRjZWxsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XG5cdFx0XHRcdHJldHVybiBjZWxsLmh0bWwoY2VsbC5kYXRhKCdvcmlnaW5hbFZhbHVlJykpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBjZWxsLmZpbmQoJ3NlbGVjdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBzdWJtaXQoY2VsbCwgJCh0aGlzKSk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5hZnRlcl9pbmxpbmVfZWRpdCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBncmlkID0gJCgnLmRhdGFncmlkLScgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKTtcblxuXHRcdGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9pbmxpbmVfZWRpdGVkKSB7XG5cdFx0XHRncmlkLmZpbmQoJ3RyW2RhdGEtaWQ9JyArIHBheWxvYWQuX2RhdGFncmlkX2lubGluZV9lZGl0ZWQgKyAnXSA+IHRkJykuYWRkQ2xhc3MoJ2VkaXRlZCcpO1xuXHRcdFx0cmV0dXJuIGdyaWQuZmluZCgnLmRhdGFncmlkLWlubGluZS1lZGl0LXRyaWdnZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0fSBlbHNlIGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9pbmxpbmVfZWRpdF9jYW5jZWwpIHtcblx0XHRcdHJldHVybiBncmlkLmZpbmQoJy5kYXRhZ3JpZC1pbmxpbmUtZWRpdC10cmlnZ2VyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdH1cblx0fVxufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwJywgJ1tkYXRhLWRhdGFncmlkLWNhbmNlbC1pbmxpbmUtYWRkXScsIGZ1bmN0aW9uKGUpIHtcblx0dmFyIGNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZSB8fCAwO1xuXHRpZiAoY29kZSA9PT0gMSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHJldHVybiAkKCcuZGF0YWdyaWQtcm93LWlubGluZS1hZGQnKS5hZGRDbGFzcygnZGF0YWdyaWQtcm93LWlubGluZS1hZGQtaGlkZGVuJyk7XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC10b2dnbGUtaW5saW5lLWFkZCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdHZhciBncmlkID0gJCgnLmRhdGFncmlkLScgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKTtcblxuXHRcdGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9pbmxpbmVfYWRkaW5nKSB7XG5cdFx0XHR2YXIgcm93ID0gZ3JpZC5maW5kKCcuZGF0YWdyaWQtcm93LWlubGluZS1hZGQnKTtcblxuXHRcdFx0aWYgKHJvdy5oYXNDbGFzcygnZGF0YWdyaWQtcm93LWlubGluZS1hZGQtaGlkZGVuJykpIHtcblx0XHRcdFx0cm93LnJlbW92ZUNsYXNzKCdkYXRhZ3JpZC1yb3ctaW5saW5lLWFkZC1oaWRkZW4nKTtcblx0XHRcdH1cblxuXHRcdFx0cm93LmZpbmQoJ2lucHV0Om5vdChbcmVhZG9ubHldKSx0ZXh0YXJlYTpub3QoW3JlYWRvbmx5XSknKS5maXJzdCgpLmZvY3VzKCk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YWdyaWRGaXRsZXJNdWx0aVNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgc2VsZWN0ID0gJCgnLnNlbGVjdHBpY2tlcicpLmZpcnN0KCk7XG5cblx0aWYgKCQuZm4uc2VsZWN0cGlja2VyKSB7XG5cdFx0cmV0dXJuICQuZm4uc2VsZWN0cGlja2VyLmRlZmF1bHRzID0ge1xuXHRcdFx0Y291bnRTZWxlY3RlZFRleHQ6IHNlbGVjdC5kYXRhKCdpMThuLXNlbGVjdGVkJyksXG5cdFx0XHRpY29uQmFzZTogJycsXG5cdFx0XHR0aWNrSWNvbjogc2VsZWN0LmRhdGEoJ3NlbGVjdGVkLWljb24tY2hlY2snKVxuXHRcdH07XG5cdH1cbn07XG5cbiQoZnVuY3Rpb24oKSB7XG5cdHJldHVybiBkYXRhZ3JpZEZpdGxlck11bHRpU2VsZWN0KCk7XG59KTtcblxuZGF0YWdyaWRHcm91cEFjdGlvbk11bHRpU2VsZWN0ID0gZnVuY3Rpb24oKSB7XG5cdHZhciBzZWxlY3RzO1xuXG5cdGlmICghJC5mbi5zZWxlY3RwaWNrZXIpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRzZWxlY3RzID0gJCgnW2RhdGEtZGF0YWdyaWQtbXVsdGlzZWxlY3QtaWRdJyk7XG5cblx0cmV0dXJuIHNlbGVjdHMuZWFjaChmdW5jdGlvbigpIHtcblx0XHR2YXIgaWQ7XG5cdFx0aWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NlbGVjdHBpY2tlcicpKSB7XG5cdFx0XHQkKHRoaXMpLnJlbW92ZUF0dHIoJ2lkJyk7XG5cdFx0XHRpZCA9ICQodGhpcykuZGF0YSgnZGF0YWdyaWQtbXVsdGlzZWxlY3QtaWQnKTtcblx0XHRcdCQodGhpcykub24oJ2xvYWRlZC5icy5zZWxlY3QnLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuYXR0cignc3R5bGUnLCAnZGlzcGxheTpub25lOycpO1xuXHRcdFx0XHRyZXR1cm4gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdidG4tZGVmYXVsdCBidG4tc2Vjb25kYXJ5Jyk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiAkKHRoaXMpLm9uKCdyZW5kZXJlZC5icy5zZWxlY3QnLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdHJldHVybiAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2lkJywgaWQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn07XG5cbiQoZnVuY3Rpb24oKSB7XG5cdHJldHVybiBkYXRhZ3JpZEdyb3VwQWN0aW9uTXVsdGlTZWxlY3QoKTtcbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5maXRsZXJNdWx0aVNlbGVjdCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0ZGF0YWdyaWRGaXRsZXJNdWx0aVNlbGVjdCgpO1xuXHRcdGlmICgkLmZuLnNlbGVjdHBpY2tlcikge1xuXHRcdFx0cmV0dXJuICQoJy5zZWxlY3RwaWNrZXInKS5zZWxlY3RwaWNrZXIoe1xuXHRcdFx0XHRpY29uQmFzZTogJ2ZhJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuZ3JvdXBBY3Rpb25NdWx0aVNlbGVjdCcsIHtcblx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRhdGFncmlkR3JvdXBBY3Rpb25NdWx0aVNlbGVjdCgpO1xuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQuaW5saW5lLWVkaXRpbmcnLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgZ3JpZDtcblx0XHRpZiAocGF5bG9hZC5fZGF0YWdyaWRfaW5saW5lX2VkaXRpbmcpIHtcblx0XHRcdGdyaWQgPSAkKCcuZGF0YWdyaWQtJyArIHBheWxvYWQuX2RhdGFncmlkX25hbWUpO1xuXHRcdFx0cmV0dXJuIGdyaWQuZmluZCgnLmRhdGFncmlkLWlubGluZS1lZGl0LXRyaWdnZXInKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGF0YUdyaWRSZWdpc3RlckV4dGVuc2lvbignZGF0YWdyaWQucmVkcmF3LWl0ZW0nLCB7XG5cdHN1Y2Nlc3M6IGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHR2YXIgcm93O1xuXHRcdGlmIChwYXlsb2FkLl9kYXRhZ3JpZF9yZWRyYXdfaXRlbV9jbGFzcykge1xuXHRcdFx0cm93ID0gJCgndHJbZGF0YS1pZD0nICsgcGF5bG9hZC5fZGF0YWdyaWRfcmVkcmF3X2l0ZW1faWQgKyAnXScpO1xuXHRcdFx0cmV0dXJuIHJvdy5hdHRyKCdjbGFzcycsIHBheWxvYWQuX2RhdGFncmlkX3JlZHJhd19pdGVtX2NsYXNzKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5kYXRhR3JpZFJlZ2lzdGVyRXh0ZW5zaW9uKCdkYXRhZ3JpZC5yZXNldC1maWx0ZXItYnktY29sdW1uJywge1xuXHRzdWNjZXNzOiBmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0dmFyIGdyaWQsIGhyZWYsIGksIGtleSwgbGVuLCByZWY7XG5cdFx0aWYgKCFwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGdyaWQgPSAkKCcuZGF0YWdyaWQtJyArIHBheWxvYWQuX2RhdGFncmlkX25hbWUpO1xuXHRcdGdyaWQuZmluZCgnW2RhdGEtZGF0YWdyaWQtcmVzZXQtZmlsdGVyLWJ5LWNvbHVtbl0nKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0aWYgKHBheWxvYWQubm9uX2VtcHR5X2ZpbHRlcnMgJiYgcGF5bG9hZC5ub25fZW1wdHlfZmlsdGVycy5sZW5ndGgpIHtcblx0XHRcdHJlZiA9IHBheWxvYWQubm9uX2VtcHR5X2ZpbHRlcnM7XG5cdFx0XHRmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0a2V5ID0gcmVmW2ldO1xuXHRcdFx0XHRncmlkLmZpbmQoJ1tkYXRhLWRhdGFncmlkLXJlc2V0LWZpbHRlci1ieS1jb2x1bW49JyArIGtleSArICddJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0fVxuXHRcdFx0aHJlZiA9IGdyaWQuZmluZCgnLnJlc2V0LWZpbHRlcicpLmF0dHIoJ2hyZWYnKTtcblx0XHRcdHJldHVybiBncmlkLmZpbmQoJ1tkYXRhLWRhdGFncmlkLXJlc2V0LWZpbHRlci1ieS1jb2x1bW5dJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld19ocmVmO1xuXHRcdFx0XHRrZXkgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZGF0YWdyaWQtcmVzZXQtZmlsdGVyLWJ5LWNvbHVtbicpO1xuXHRcdFx0XHRuZXdfaHJlZiA9IGhyZWYucmVwbGFjZSgnZG89JyArIHBheWxvYWQuX2RhdGFncmlkX25hbWUgKyAnLXJlc2V0RmlsdGVyJywgJ2RvPScgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lICsgJy1yZXNldENvbHVtbkZpbHRlcicpO1xuXHRcdFx0XHRuZXdfaHJlZiArPSAnJicgKyBwYXlsb2FkLl9kYXRhZ3JpZF9uYW1lICsgJy1rZXk9JyArIGtleTtcblx0XHRcdFx0cmV0dXJuICQodGhpcykuYXR0cignaHJlZicsIG5ld19ocmVmKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=